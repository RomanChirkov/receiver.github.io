/*!
 * Anvato Chromecast Receiver Framework v3
 * anvreceiver.min.js
 * Copyright 2022-2023
 */

/*!
 * Copyright jQuery Foundation and other contributors, https://jquery.org/
 * This software consists of voluntary contributions made by many
 * individuals. For exact contribution history, see the revision history
 * available at https://github.com/requirejs/almond
 *
 * ====
 *
 * Permission is hereby granted, free of charge, to any person obtaining
 * a copy of this software and associated documentation files (the
 * "Software"), to deal in the Software without restriction, including
 * without limitation the rights to use, copy, modify, merge, publish,
 * distribute, sublicense, and/or sell copies of the Software, and to
 * permit persons to whom the Software is furnished to do so, subject to
 * the following conditions:
 *
 * The above copyright notice and this permission notice shall be
 * included in all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
 * EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
 * MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
 * NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE
 * LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION
 * OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION
 * WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
 *
 * ====
 *
 * Copyright and related rights for sample code are waived via CC0. Sample
 * code is defined as all source code displayed within the prose of the
 * documentation.
 *
 * CC0: http://creativecommons.org/publicdomain/zero/1.0/
 *
 * ====
 *
 */

/*!
 * A fast MD5 JavaScript implementation
 * Copyright (c) 2012 Joseph Myers
 * http://www.myersdaily.org/joseph/javascript/md5-text.html
 *
 * Permission to use, copy, modify, and distribute this software
 * and its documentation for any purposes and without
 * fee is hereby granted provided that this copyright notice
 * appears in all copies.
 *
 * Of course, this soft is provided "as is" without express or implied
 * warranty of any kind.
 */

/*!
 *
 * The MIT License (MIT)
 *
 * Copyright (c) 2015 Richard Moore
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 *
 */

/**
         * Selects the first published_url entry that can be played and returns
         * the playback info.
         * @param {Object} videoJSON The videoJSON for the current asset.
         * @param {boolean} withDetails Flag specifying whether additional play
         *     info should be returned or just the playback url should be
         *     returned.
         * @return {string|Object} The playback url if `withDetails` is false,
         *     otherwise returns an object describing the playback url,
         *     ad break info, the DRM license url, and the playback format.
         */

/**
         * Updates the playback config for each load request, mainly to update
         * the license URL used for DRM.
         * @param {cast.framework.messages.LoadRequestData} loadRequest The
         *     incoming load request.
         * @param {cast.framework.PlaybackConfig} playbackConfig The current
         *     playbackConfig instance.
         * @return {cast.framework.PlaybackConfig} The modified playback
         *     configuration.
         */

!function(){var e,t,n;!function(a){function r(e,t){return T.call(e,t)}function i(e,t){var n,a,r,i,o,s,d,c,l,u,p=t&&t.split("/"),f=E.map,m=f&&f["*"]||{};if(e&&"."===e.charAt(0))if(t){for(p=p.slice(0,p.length-1),e=p.concat(e.split("/")),c=0;c<e.length;c+=1)if("."===(u=e[c]))e.splice(c,1),c-=1;else if(".."===u){if(1===c&&(".."===e[2]||".."===e[0]))break;c>0&&(e.splice(c-1,2),c-=2)}e=e.join("/")}else 0===e.indexOf("./")&&(e=e.substring(2));if((p||m)&&f){for(n=e.split("/"),c=n.length;c>0;c-=1){if(a=n.slice(0,c).join("/"),p)for(l=p.length;l>0;l-=1)if((r=f[p.slice(0,l).join("/")])&&(r=r[a])){i=r,o=c;break}if(i)break;!s&&m&&m[a]&&(s=m[a],d=c)}!i&&s&&(i=s,o=d),i&&(n.splice(0,o,i),e=n.join("/"))}return e}function o(e,t){return function(){return f.apply(a,_.call(arguments,0).concat([e,t]))}}function s(e){return function(t){return i(t,e)}}function d(e){return function(t){v[e]=t}}function c(e){if(r(h,e)){var t=h[e];delete h[e],A[e]=!0,p.apply(a,t)}if(!r(v,e)&&!r(A,e))throw new Error("No "+e);return v[e]}function l(e){var t,n=e?e.indexOf("!"):-1;return n>-1&&(t=e.substring(0,n),e=e.substring(n+1,e.length)),[t,e]}function u(e){return function(){return E&&E.config&&E.config[e]||{}}}var p,f,m,g,v={},h={},E={},A={},T=Object.prototype.hasOwnProperty,_=[].slice;m=function(e,t){var n,a=l(e),r=a[0];return e=a[1],r&&(r=i(r,t),n=c(r)),r?e=n&&n.normalize?n.normalize(e,s(t)):i(e,t):(e=i(e,t),a=l(e),r=a[0],e=a[1],r&&(n=c(r))),{f:r?r+"!"+e:e,n:e,pr:r,p:n}},g={require:function(e){return o(e)},exports:function(e){var t=v[e];return void 0!==t?t:v[e]={}},module:function(e){return{id:e,uri:"",exports:v[e],config:u(e)}}},p=function(e,t,n,i){var s,l,u,p,f,E,T=[];if(i=i||e,"function"==typeof n){for(t=!t.length&&n.length?["require","exports","module"]:t,f=0;f<t.length;f+=1)if(p=m(t[f],i),"require"===(l=p.f))T[f]=g.require(e);else if("exports"===l)T[f]=g.exports(e),E=!0;else if("module"===l)s=T[f]=g.module(e);else if(r(v,l)||r(h,l)||r(A,l))T[f]=c(l);else{if(!p.p)throw new Error(e+" missing "+l);p.p.load(p.n,o(i,!0),d(l),{}),T[f]=v[l]}u=n.apply(v[e],T),e&&(s&&s.exports!==a&&s.exports!==v[e]?v[e]=s.exports:u===a&&E||(v[e]=u))}else e&&(v[e]=n)},e=t=f=function(e,t,n,r,i){return"string"==typeof e?g[e]?g[e](t):c(m(e,t).f):(e.splice||(E=e,t.splice?(e=t,t=n,n=null):e=a),t=t||function(){},"function"==typeof n&&(n=r,r=i),r?p(a,e,t,n):setTimeout(function(){p(a,e,t,n)},4),f)},f.config=function(e){return E=e,E.deps&&f(E.deps,E.callback),f},e._defined=v,n=function(e,t,n){t.splice||(n=t,t=[]),r(v,e)||r(h,e)||(h[e]=[e,t,n])},n.amd={jQuery:!0}}(),n("almond",function(){}),n("util",[],function(){function e(e){var t=!1;return!ie.facebookForAndroid&&(e.requestFullScreen?t=!0:e.webkitEnterFullScreen?t=!0:e.mozRequestFullScreen?t=!0:e.webkitRequestFullScreen?t=!0:e.msRequestFullscreen&&(t=!0),t)}function t(e){console.log("[requestFullScreen]"),e.requestFullScreen?e.requestFullScreen():e.webkitEnterFullScreen?e.webkitEnterFullScreen(Element.ALLOW_KEYBOARD_INPUT):e.mozRequestFullScreen?e.mozRequestFullScreen():e.webkitRequestFullScreen?e.webkitRequestFullScreen(ie.safari?void 0:Element.ALLOW_KEYBOARD_INPUT):e.msRequestFullscreen&&e.msRequestFullscreen(e)}function n(e,t){var n=e[0],a=e[1],d=e[2],c=e[3];n=r(n,a,d,c,t[0],7,-680876936),c=r(c,n,a,d,t[1],12,-389564586),d=r(d,c,n,a,t[2],17,606105819),a=r(a,d,c,n,t[3],22,-1044525330),n=r(n,a,d,c,t[4],7,-176418897),c=r(c,n,a,d,t[5],12,1200080426),d=r(d,c,n,a,t[6],17,-1473231341),a=r(a,d,c,n,t[7],22,-45705983),n=r(n,a,d,c,t[8],7,1770035416),c=r(c,n,a,d,t[9],12,-1958414417),d=r(d,c,n,a,t[10],17,-42063),a=r(a,d,c,n,t[11],22,-1990404162),n=r(n,a,d,c,t[12],7,1804603682),c=r(c,n,a,d,t[13],12,-40341101),d=r(d,c,n,a,t[14],17,-1502002290),a=r(a,d,c,n,t[15],22,1236535329),n=i(n,a,d,c,t[1],5,-165796510),c=i(c,n,a,d,t[6],9,-1069501632),d=i(d,c,n,a,t[11],14,643717713),a=i(a,d,c,n,t[0],20,-373897302),n=i(n,a,d,c,t[5],5,-701558691),c=i(c,n,a,d,t[10],9,38016083),d=i(d,c,n,a,t[15],14,-660478335),a=i(a,d,c,n,t[4],20,-405537848),n=i(n,a,d,c,t[9],5,568446438),c=i(c,n,a,d,t[14],9,-1019803690),d=i(d,c,n,a,t[3],14,-187363961),a=i(a,d,c,n,t[8],20,1163531501),n=i(n,a,d,c,t[13],5,-1444681467),c=i(c,n,a,d,t[2],9,-51403784),d=i(d,c,n,a,t[7],14,1735328473),a=i(a,d,c,n,t[12],20,-1926607734),n=o(n,a,d,c,t[5],4,-378558),c=o(c,n,a,d,t[8],11,-2022574463),d=o(d,c,n,a,t[11],16,1839030562),a=o(a,d,c,n,t[14],23,-35309556),n=o(n,a,d,c,t[1],4,-1530992060),c=o(c,n,a,d,t[4],11,1272893353),d=o(d,c,n,a,t[7],16,-155497632),a=o(a,d,c,n,t[10],23,-1094730640),n=o(n,a,d,c,t[13],4,681279174),c=o(c,n,a,d,t[0],11,-358537222),d=o(d,c,n,a,t[3],16,-722521979),a=o(a,d,c,n,t[6],23,76029189),n=o(n,a,d,c,t[9],4,-640364487),c=o(c,n,a,d,t[12],11,-421815835),d=o(d,c,n,a,t[15],16,530742520),a=o(a,d,c,n,t[2],23,-995338651),n=s(n,a,d,c,t[0],6,-198630844),c=s(c,n,a,d,t[7],10,1126891415),d=s(d,c,n,a,t[14],15,-1416354905),a=s(a,d,c,n,t[5],21,-57434055),n=s(n,a,d,c,t[12],6,1700485571),c=s(c,n,a,d,t[3],10,-1894986606),d=s(d,c,n,a,t[10],15,-1051523),a=s(a,d,c,n,t[1],21,-2054922799),n=s(n,a,d,c,t[8],6,1873313359),c=s(c,n,a,d,t[15],10,-30611744),d=s(d,c,n,a,t[6],15,-1560198380),a=s(a,d,c,n,t[13],21,1309151649),n=s(n,a,d,c,t[4],6,-145523070),c=s(c,n,a,d,t[11],10,-1120210379),d=s(d,c,n,a,t[2],15,718787259),a=s(a,d,c,n,t[9],21,-343485551),e[0]=f(n,e[0]),e[1]=f(a,e[1]),e[2]=f(d,e[2]),e[3]=f(c,e[3])}function a(e,t,n,a,r,i){return t=f(f(t,e),f(a,i)),f(t<<r|t>>>32-r,n)}function r(e,t,n,r,i,o,s){return a(t&n|~t&r,e,t,i,o,s)}function i(e,t,n,r,i,o,s){return a(t&r|n&~r,e,t,i,o,s)}function o(e,t,n,r,i,o,s){return a(t^n^r,e,t,i,o,s)}function s(e,t,n,r,i,o,s){return a(n^(t|~r),e,t,i,o,s)}function d(e){var t,a=e.length,r=[1732584193,-271733879,-1732584194,271733878];for(t=64;t<=e.length;t+=64)n(r,c(e.substring(t-64,t)));e=e.substring(t-64);var i=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(t=0;t<e.length;t++)i[t>>2]|=e.charCodeAt(t)<<(t%4<<3);if(i[t>>2]|=128<<(t%4<<3),t>55)for(n(r,i),t=0;t<16;t++)i[t]=0;return i[14]=8*a,n(r,i),r}function c(e){var t,n=[];for(t=0;t<64;t+=4)n[t>>2]=e.charCodeAt(t)+(e.charCodeAt(t+1)<<8)+(e.charCodeAt(t+2)<<16)+(e.charCodeAt(t+3)<<24);return n}function l(e){for(var t="",n=0;n<4;n++)t+=se[e>>8*n+4&15]+se[e>>8*n&15];return t}function u(e){for(var t=0;t<e.length;t++)e[t]=l(e[t]);return e.join("")}function p(e){return u(d(e))}function f(e,t){return e+t&4294967295}function m(e,t){var n=[],a=0,r=e.length;t&&(r>32&&(e=e.slice(0,32)),r<16?a=16-e.length:r<24?a=24-e.length:r<32&&(a=32-e.length));for(var i=0,o=e.length;i<o;i++)n.push(e.charCodeAt(i));for(;a;)n.push(0),a--;return n}function g(e){for(var t,n=[],a=0,r=e.length;a<r;a++)t=e[a].toString(16),1==t.length&&(t="0"+t),n.push(t);return n.join("-")}function v(e,t){for(var n=[],a=0,r=e.length;a<r;a++)!e[a]&&t||n.push(String.fromCharCode(e[a]));return n.join("")}function h(e){var t=[];e=atob(e);for(var n=0,a=e.length;n<a;n++)t[n]=e.charCodeAt(n);return t}function E(e){for(var t,n,a,r,i,o,s,d="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",c="",l=0;l<e.length;)t=e[l++],n=e[l++],a=e[l++],r=t>>2,i=(3&t)<<4|n>>4,o=(15&n)<<2|a>>6,s=63&a,isNaN(n)?o=s=64:isNaN(a)&&(s=64),c=c+d.charAt(r)+d.charAt(i)+d.charAt(o)+d.charAt(s);return c}function A(e,t,n){for(var a,r,i=16-t.length;i>0&&i--;)t.push(0);if(e&&e in de.aesjs.ModeOfOperation)return a=new de.aesjs.ModeOfOperation[e](n),r=a.encrypt(t),a=null,r;throw new Error("aes mode: "+e+"is not recognized!")}function T(e,t,n){for(var a,r,i=16-t.length;i>0&&i--;)t.push(0);if(e&&e in de.aesjs.ModeOfOperation)return a=new de.aesjs.ModeOfOperation[e](n),r=a.decrypt(t),a=null,r;throw new Error("aes mode: "+e+" is not recognized!")}function _(e,t,n,a){var r,i,o=[],s=m(n);t=m(j(t)),r=Math.ceil(t.length/16);for(var d=0;d<r;d++){var c=16*d,l=c+16;i=A(e,t.slice(c,l),s),o=o.concat(i)}return"hex"==a?g(o,!0):"base64"==a?E(o):v(o,!0)}function y(e,t,n,a){var r,i,o,s,d="";i="hex"==a?I(t):"base64"==a?h(t):m(t),r=i.length/16+(i.length/16?0:1),s=m(n);for(var c=0;c<r;c++){var l=16*c,u=l+16;o=T(e,i.slice(l,u),s),d+=v(o,!0)}return Y(d)}function I(e){for(var t,n=[],a=0,r=e.length;a<r/2;a++)t=parseInt(e[2*a]+e[2*a+1],16),n.push(t);return n}function S(e,t){return e?t?Math.round(parseInt(e,16)/255*1e3)/1e3:parseInt(e,16):0}function D(e,t){var n=new Date,a=["Sun","Mon","Tue","Wed","Thr","Fri","Sat"],r=new Date(e),i=r.getDate(),o=r.getMonth(),s=r.getFullYear(),d=r.getHours(),c=r.getMinutes(),l=r.getSeconds(),u=r.getMilliseconds();if(t)var p=n.getDate()==i&&n.getMonth()==o&&n.getFullYear()==s,f=n.getDate()+1==i&&n.getMonth()==o&&n.getFullYear()==s;var m,g=p?"Today":f?"Tomorrow":a[r.getDay()];return o++,o=o<10?"0"+o:o,i=i<10?"0"+i:i,d=d<10?"0"+d:d,c=c<10?"0"+c:c,m=d+":"+c+" "+(p?"Today":f?"Tomorrow":o+"/"+i+"/"+s),{string:m,hour:d+":"+c,hourDetailed:[d,c,l,u].join(":"),year:s,month:o,day:i,hours:d,minutes:c,dayOfWeek:g}}function k(e,t){e=e.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var n="[\\?&]"+e+"=([^&#]*)",a=new RegExp(n),r=a.exec(t||window.location.search);return null==r?null:decodeURIComponent(r[1].replace(/\+/g," "))}function C(e){if((window.location.href+"").match(/https/)){var t=e.match(/http:\/\/(.*)\.s3.amazonaws.com\/(.*)/);t&&(e="https://s3.amazonaws.com/"+t[1]+"/"+t[2])}var n=document.getElementsByTagName("body")[0],a=document.createElement("script");a.type="text/javascript",a.src=e,n.appendChild(a)}function R(e){for(var t={},n=0,a=e.length;n<a;n++)t[e[n]]=1;return t}function b(e){var t=0,n=[];for(var a in e)e.hasOwnProperty(a)&&(n[t]=a,t++);return n}function O(e){var t,n,a,r,i,o,s,d="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",c="",l=0;for(e=j(e);l<e.length;)t=e.charCodeAt(l++),n=e.charCodeAt(l++),a=e.charCodeAt(l++),r=t>>2,i=(3&t)<<4|n>>4,o=(15&n)<<2|a>>6,s=63&a,isNaN(n)?o=s=64:isNaN(a)&&(s=64),c=c+d.charAt(r)+d.charAt(i)+d.charAt(o)+d.charAt(s);return c}function M(e){var t,n,a,r,i,o,s,d="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",c="",l=0,u=e.length,p=u%4;if(p)for(p=4-p;p--;)e+="=";for(e=e.replace(/[^A-Za-z0-9\+\/\=]/g,"");l<e.length;)r=d.indexOf(e.charAt(l++)),i=d.indexOf(e.charAt(l++)),o=d.indexOf(e.charAt(l++)),s=d.indexOf(e.charAt(l++)),t=r<<2|i>>4,n=(15&i)<<4|o>>2,a=(3&o)<<6|s,c+=String.fromCharCode(t),64!=o&&(c+=String.fromCharCode(n)),64!=s&&(c+=String.fromCharCode(a));return c=Y(c)}function N(e){return V(w(B(e),e.length*le))}function w(e,t){e[t>>5]|=128<<24-t%32,e[15+(t+64>>9<<4)]=t;for(var n=Array(80),a=1732584193,r=-271733879,i=-1732584194,o=271733878,s=-1009589776,d=0;d<e.length;d+=16){for(var c=a,l=r,u=i,p=o,f=s,m=0;m<80;m++){n[m]=m<16?e[d+m]:U(n[m-3]^n[m-8]^n[m-14]^n[m-16],1);var g=x(x(U(a,5),P(m,r,i,o)),x(x(s,n[m]),L(m)));s=o,o=i,i=U(r,30),r=a,a=g}a=x(a,c),r=x(r,l),i=x(i,u),o=x(o,p),s=x(s,f)}return Array(a,r,i,o,s)}function P(e,t,n,a){return e<20?t&n|~t&a:e<40?t^n^a:e<60?t&n|t&a|n&a:t^n^a}function L(e){return e<20?1518500249:e<40?1859775393:e<60?-1894007588:-899497514}function x(e,t){var n=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(n>>16)<<16|65535&n}function U(e,t){return e<<t|e>>>32-t}function B(e){for(var t=Array(),n=(1<<le)-1,a=0;a<e.length*le;a+=le)t[a>>5]|=(e.charCodeAt(a/le)&n)<<32-le-a%32;return t}function V(e){for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",n="",a=0;a<4*e.length;a+=3)for(var r=(e[a>>2]>>8*(3-a%4)&255)<<16|(e[a+1>>2]>>8*(3-(a+1)%4)&255)<<8|e[a+2>>2]>>8*(3-(a+2)%4)&255,i=0;i<4;i++)8*a+6*i>32*e.length?n+=ce:n+=t.charAt(r>>6*(3-i)&63);return n}function F(e){var t,n,a,r,i=new Array,o=new Date;return n=N(o.toISOString()+1e3*Math.round(Math.random())+"There is more than words"),r=O(n),a=o.toISOString(),t=N(n+a+e),i[0]=r,i[1]=a,i[2]=t,i}function H(e,t){var n=F(t);return'UsernameToken Username="'+e+'", PasswordDigest="'+n[2]+'", Created="'+n[1]+'", Nonce="'+n[0]+'"'}function K(e){var t,n=/^((.+)?:)?\/\/([^:\/\s]+)((:)([0-9]+))?((\/\w+)*\/)?([\w\-\.]+[^#?\s]+)?(.*)?(#[\w\-]+)?$/;return e&&(t=n.exec(e)),t&&t.length>11?{url:t[0],protocol:t[2],host:t[3],port:t[6],path:t[7],file:t[9],query:t[10],hash:t[11]}:{}}function G(e,t,n){if(arguments.length>2)for(var a=new RegExp(t,"i"),r=2,i=arguments.length;r<i;r++)e=e.replace(a,arguments[r]);return e}function z(){return window.location.protocol.indexOf("https")>-1}function q(e,t){var n,a={};if("object"==typeof e)for(n in e)e.hasOwnProperty(n)&&(a[n]=e[n]);if("object"==typeof t)for(n in t)t.hasOwnProperty(n)&&(n in a&&"object"==typeof a[n]&&"object"==typeof t[n]?a[n]=q(a[n],t[n]):a[n]=t[n]);return a}function j(e){var t="";if("function"==typeof unescape)return unescape(encodeURIComponent(e));e=e.replace(/\x0d\x0a/g,"\n");for(var n=0;n<e.length;n++){var a=e.charCodeAt(n);a<128?t+=String.fromCharCode(a):a>127&&a<2048?(t+=String.fromCharCode(a>>6|192),t+=String.fromCharCode(63&a|128)):(t+=String.fromCharCode(a>>12|224),t+=String.fromCharCode(a>>6&63|128),t+=String.fromCharCode(63&a|128))}return t}function Y(e){var t,n="",a=0,r=0,i=0;if("function"==typeof escape)return decodeURIComponent(escape(e));for(;a<e.length;)r=e.charCodeAt(a),r<128?(n+=String.fromCharCode(r),a++):r>191&&r<224?(i=e.charCodeAt(a+1),n+=String.fromCharCode((31&r)<<6|63&i),a+=2):(i=e.charCodeAt(a+1),t=e.charCodeAt(a+2),n+=String.fromCharCode((15&r)<<12|(63&i)<<6|63&t),a+=3);return n}function J(e,t){var n,a,r=[];for(var i in e)e.hasOwnProperty(i)&&(n=t?i:encodeURIComponent(i),a=t?e[i]:encodeURIComponent(e[i]),a||null!==a&&void 0!==a||(a=""),r.push(n+"="+a));return r.join("&")}function W(e){var t,n=/.*(\?.*)/,a=n.exec(e),r={};if(a){a=a[1].replace(/\?/,""),t=a.split("&"),t=t.map(function(e){return e.split("=")});for(var i=0,o=t.length;i<o;i++)t[i]&&t[i].length&&t[i][0]&&t[i][0].length&&(r[t[i][0]]=t[i][1])}return r}function Q(e){var t=/([^\?]*)[\?]?.*/.exec(e);return t.length>1?t[1]:-1}function $(e,t,n){var a,r=/([^\?]*)(.*)/,i=W(e);return a=r.exec(e),a=a&&a.length>1?a[1]:e,n?i[t]=n:i&&delete i[t],i=J(i),a+(i.length?"?":"")+i}function X(){"undefined"==typeof ActiveXObject&&"undefined"==typeof XDomainRequest||(XMLHttpRequest=function(){try{return new re}catch(e){console.log("IEXMLHttpRequest failed")}try{return new ActiveXObject("Msxml2.XMLHTTP.6.0")}catch(e){console.log('ActiveXObject("Msxml2.XMLHTTP.6.0") failed')}try{return new ActiveXObject("Msxml2.XMLHTTP.3.0")}catch(e){console.log('ActiveXObject("Msxml2.XMLHTTP.6.0") failed')}try{return new ActiveXObject("Msxml2.XMLHTTP")}catch(e){console.log('ActiveXObject("Msxml2.XMLHTTP.6.0") failed')}throw new Error("This browser does not support XMLHttpRequest.")})}function Z(e){return e.charAt(0).toUpperCase()+e.slice(1)}function ee(e,t,n){n&&(t="anv-"+t),e.className+=" "+t}function te(e,t,n,a,r){var i,o,s;if(i=document.createElement(t),n&&(i.id=e.id+"-"+n),a)for(o=a.split(" "),s=0;s<o.length;s++)ee(i,o[s],!0);return r&&(i.innerHTML=r),e.appendChild(i),i}function ne(e,t,n,a){e.addEventListener?(a=void 0!==a&&a,e.addEventListener(t,n,a)):e.attachEvent("on"+t,n)}function ae(e,t,n){e.removeEventListener?e.removeEventListener(t,n):e.detachEvent("on"+t,n)}var re=window.XDomainRequest&&function(){var e=new XDomainRequest;if(!e)return null;var t,n=function(e){e!==t.readyState&&(t.readyState=e,t.onreadystatechange&&t.onreadystatechange())};return e.onerror=function(){t.status=500,t.statusText="ERROR",n(4)},e.ontimeout=function(){t.status=408,t.statusText="TIMEOUT",n(4)},e.onprogress=function(){n(3)},e.onload=function(){t.status=200,t.statusText="OK",t.responseText=e.responseText,t.responseXML=new ActiveXObject("Microsoft.XMLDOM"),t.responseXML.async="false",t.responseXML.loadXML(e.responseText),n(4)},t={open:function(t,a,r,i,o){e.open(t,a),n(1)},setRequestHeader:function(){},send:function(t){e.send(t),n(2)},abort:function(){e.abort()},status:"",statusText:"",getResponseHeader:function(){},getAllResponseHeaders:function(){},responseText:"",responseXML:"",readyState:0,onreadystatechange:null}},ie=function(){var e,t,n="undefined",a=window,r=document,i=navigator,o=typeof r.getElementById!=n&&typeof r.getElementsByTagName!=n&&typeof r.createElement!=n,s=i.userAgent.toLowerCase(),d=i.platform.toLowerCase(),c=/win/.test(d?d:s),l=/mac/.test(d?d:s),u=/iphone/.test(d?d:s),p=/ipad/.test(d?d:s),f=/ipod/.test(d?d:s),m=!!d&&/cros/.test(d),g=/amazonwebappplatform|aft\w+/.test(s),v=/android/.test(d?d:s),v=v||/linux arm/.test(d?d:s),v=v||/linux.+arch/.test(d?d:s),v=v||/android/.test(s),v=v&&!m,v=v&&!g,h=/windows phone/.test(s),E=/bb10|black.*berry/.test(s),A=/(smart.*tv|maple)/.test(s),T=!!/webkit/.test(s)&&parseFloat(s.replace(/^.*webkit\/(\d+(\.\d+)?).*$/,"$1")),_=!1,y=!!window.opera||navigator.userAgent.indexOf(" OPR/")>=0,I="undefined"!=typeof InstallTrigger,S=Object.prototype.toString.call(window.HTMLElement).indexOf("Constructor")>0,D=!!window.chrome&&!y,_=!!document.documentMode,_=_||/msie|trident/.test(s),k=/fb4a/.test(s),C=[0,0,0],R=null,b=function(){var e,t=navigator.userAgent,n=navigator.appName,a=t.match(/(opera|chrome|safari|firefox|msie|trident)\/?\s*([\d\.]+)/i)||[];return a=a[2]?[a[1],a[2]]:[n,navigator.appVersion,"-?"],a&&null!=(e=t.match(/version\/([\.\d]+)/i))&&(a[2]=e[1]),a}();if(typeof i.plugins!=n&&"object"==typeof i.plugins["Shockwave Flash"])!(R=i.plugins["Shockwave Flash"].description)||typeof i.mimeTypes!=n&&i.mimeTypes["application/x-shockwave-flash"]&&!i.mimeTypes["application/x-shockwave-flash"].enabledPlugin||(!0,R=R.replace(/^.*\s+(\S+\s+\S+$)/,"$1"),C[0]=parseInt(R.replace(/^(.*)\..*$/,"$1"),10),C[1]=parseInt(R.replace(/^.*\.(.*)\s.*$/,"$1"),10),C[2]=/[a-zA-Z]/.test(R)?parseInt(R.replace(/^.*[a-zA-Z]+(.*)$/,"$1"),10):0);else if(typeof a.ActiveXObject!=n)try{var O=new ActiveXObject("ShockwaveFlash.ShockwaveFlash");O&&(R=O.GetVariable("$version"))&&(_=!0,R=R.split(" ")[1].split(","),C=[parseInt(R[0],10),parseInt(R[1],10),parseInt(R[2],10)])}catch(e){}return t=g||u||p||f||v||h||E,e=t?g?"firetv":p?"tablet":u||f||h||E?"phone":window.devicePixelRatio&&screen.width&&screen.width/window.devicePixelRatio>=700?"tablet":"phone":"desktop",{browserInfo:b,w3:o,pv:C,wk:T,ie:_,win:c,mac:l,iphone:u,ipad:p,ipod:f,android:v&!E&&!h&&!A,windowsPhone:h,blackberry:E,smartTV:A,isMobileBrowser:t,deviceType:e,firefox:I,safari:S,chrome:D,opera:y,firetv:g,facebookForAndroid:k}}(),oe={getItem:function(e){return decodeURIComponent(document.cookie.replace(new RegExp("(?:(?:^|.*;)\\s*"+encodeURIComponent(e).replace(/[\-\.\+\*]/g,"\\$&")+"\\s*\\=\\s*([^;]*).*$)|^.*$"),"$1"))||null},setItem:function(e,t,n,a,r,i){if(!e||/^(?:expires|max\-age|path|domain|secure)$/i.test(e))return!1;var o="";if(n)switch(n.constructor){case Number:o=n===1/0?"; expires=Fri, 31 Dec 9999 23:59:59 GMT":"; max-age="+n;break;case String:o="; expires="+n;break;case Date:o="; expires="+n.toUTCString()}return document.cookie=encodeURIComponent(e)+"="+encodeURIComponent(t)+o+(r?"; domain="+r:"")+(a?"; path="+a:"")+(i?"; secure":""),!0},hasItem:function(e){return new RegExp("(?:^|;\\s*)"+encodeURIComponent(e).replace(/[\-\.\+\*]/g,"\\$&")+"\\s*\\=").test(document.cookie)},removeItem:function(e,t,n){return!(!e||!new RegExp("(?:^|;\\s*)"+encodeURIComponent(e).replace(/[\-\.\+\*]/g,"\\$&")+"\\s*\\=").test(document.cookie))&&(document.cookie=encodeURIComponent(e)+"=; expires=Thu, 01 Jan 1970 00:00:00 GMT"+(n?"; domain="+n:"")+(t?"; path="+t:""),!0)},keys:function(){for(var e=document.cookie.replace(/((?:^|\s*;)[^\=]+)(?=;|$)|^\s*|\s*(?:\=[^;]*)?(?:\1|$)/g,"").split(/\s*(?:\=[^;]*)?;\s*/),t=0;t<e.length;t++)e[t]=decodeURIComponent(e[t]);return e}},se="0123456789abcdef".split("");"5d41402abc4b2a76b9719d911017c592"!=p("hello")&&(f=function(e,t){var n=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(n>>16)<<16|65535&n});var de={};!function(e){function t(e){for(var t=[],n=0;n<e.length;n+=4)t.push(e[n]<<24|e[n+1]<<16|e[n+2]<<8|e[n+3]);return t}var n,a=null,r=null,i=null,o=function(e){var t,n;if("number"==typeof e){for(n=[],t=0;t<e;t++)n.push(0);return n}for(t=0;t<e.length;t++)if(e[t]<0||e[t]>=256||"number"!=typeof e[t])throw new Error("invalid byte ("+e[t]+":"+t+")");if(e.slice)return e.slice(0);for(n=[],t=0;t<e.length;t++)n.push(e[t]);return n};if("undefined"==typeof Buffer){a=o,r=function(e,t,n,a,r){null==n&&(n=0),null==a&&(a=0),null==r&&(r=e.length);for(var i=a;i<r;i++)t[n++]=e[i]},i=function(e,t){var n,a;if(null==t||"utf8"==t.toLowerCase().replace(/ |-/g,"")){for(a=[],n=0,e=encodeURI(e);n<e.length;){var r=e.charCodeAt(n++);37===r?(a.push(parseInt(e.substr(n,2),16)),n+=2):a.push(r)}return a}if("hex"==t.toLowerCase()){for(a=[],n=0;n<e.length;n+=2)a.push(parseInt(e.substr(n,2),16));return a}return null};var s="0123456789abcdef";n=function(e,t){var n,a;if(null==t||"utf8"==t.toLowerCase().replace(/ |-/g,"")){for(a=[],n=0;n<e.length;){var r=e[n];r<128?(a.push(String.fromCharCode(r)),n++):r>191&&r<224?(a.push(String.fromCharCode((31&r)<<6|63&e[n+1])),n+=2):(a.push(String.fromCharCode((15&r)<<12|(63&e[n+1])<<6|63&e[n+2])),n+=3)}return a.join("")}if("hex"==t.toLowerCase()){for(a=[],n=0;n<e.length;n++){var i=e[n];a.push(s[(240&i)>>4]+s[15&i])}return a.join("")}return a}}else a=function(e){return new Buffer(e)},r=function(e,t,n,a,r){e.copy(t,n,a,r)},i=function(e,t){return new Buffer(e,t)},n=function(e,t){return new Buffer(e).toString(t)};var d={16:10,24:12,32:14
},c=[1,2,4,8,16,32,64,128,27,54,108,216,171,77,154,47,94,188,99,198,151,53,106,212,179,125,250,239,197,145],l=[99,124,119,123,242,107,111,197,48,1,103,43,254,215,171,118,202,130,201,125,250,89,71,240,173,212,162,175,156,164,114,192,183,253,147,38,54,63,247,204,52,165,229,241,113,216,49,21,4,199,35,195,24,150,5,154,7,18,128,226,235,39,178,117,9,131,44,26,27,110,90,160,82,59,214,179,41,227,47,132,83,209,0,237,32,252,177,91,106,203,190,57,74,76,88,207,208,239,170,251,67,77,51,133,69,249,2,127,80,60,159,168,81,163,64,143,146,157,56,245,188,182,218,33,16,255,243,210,205,12,19,236,95,151,68,23,196,167,126,61,100,93,25,115,96,129,79,220,34,42,144,136,70,238,184,20,222,94,11,219,224,50,58,10,73,6,36,92,194,211,172,98,145,149,228,121,231,200,55,109,141,213,78,169,108,86,244,234,101,122,174,8,186,120,37,46,28,166,180,198,232,221,116,31,75,189,139,138,112,62,181,102,72,3,246,14,97,53,87,185,134,193,29,158,225,248,152,17,105,217,142,148,155,30,135,233,206,85,40,223,140,161,137,13,191,230,66,104,65,153,45,15,176,84,187,22],u=[82,9,106,213,48,54,165,56,191,64,163,158,129,243,215,251,124,227,57,130,155,47,255,135,52,142,67,68,196,222,233,203,84,123,148,50,166,194,35,61,238,76,149,11,66,250,195,78,8,46,161,102,40,217,36,178,118,91,162,73,109,139,209,37,114,248,246,100,134,104,152,22,212,164,92,204,93,101,182,146,108,112,72,80,253,237,185,218,94,21,70,87,167,141,157,132,144,216,171,0,140,188,211,10,247,228,88,5,184,179,69,6,208,44,30,143,202,63,15,2,193,175,189,3,1,19,138,107,58,145,17,65,79,103,220,234,151,242,207,206,240,180,230,115,150,172,116,34,231,173,53,133,226,249,55,232,28,117,223,110,71,241,26,113,29,41,197,137,111,183,98,14,170,24,190,27,252,86,62,75,198,210,121,32,154,219,192,254,120,205,90,244,31,221,168,51,136,7,199,49,177,18,16,89,39,128,236,95,96,81,127,169,25,181,74,13,45,229,122,159,147,201,156,239,160,224,59,77,174,42,245,176,200,235,187,60,131,83,153,97,23,43,4,126,186,119,214,38,225,105,20,99,85,33,12,125],p=[3328402341,4168907908,4000806809,4135287693,4294111757,3597364157,3731845041,2445657428,1613770832,33620227,3462883241,1445669757,3892248089,3050821474,1303096294,3967186586,2412431941,528646813,2311702848,4202528135,4026202645,2992200171,2387036105,4226871307,1101901292,3017069671,1604494077,1169141738,597466303,1403299063,3832705686,2613100635,1974974402,3791519004,1033081774,1277568618,1815492186,2118074177,4126668546,2211236943,1748251740,1369810420,3521504564,4193382664,3799085459,2883115123,1647391059,706024767,134480908,2512897874,1176707941,2646852446,806885416,932615841,168101135,798661301,235341577,605164086,461406363,3756188221,3454790438,1311188841,2142417613,3933566367,302582043,495158174,1479289972,874125870,907746093,3698224818,3025820398,1537253627,2756858614,1983593293,3084310113,2108928974,1378429307,3722699582,1580150641,327451799,2790478837,3117535592,0,3253595436,1075847264,3825007647,2041688520,3059440621,3563743934,2378943302,1740553945,1916352843,2487896798,2555137236,2958579944,2244988746,3151024235,3320835882,1336584933,3992714006,2252555205,2588757463,1714631509,293963156,2319795663,3925473552,67240454,4269768577,2689618160,2017213508,631218106,1269344483,2723238387,1571005438,2151694528,93294474,1066570413,563977660,1882732616,4059428100,1673313503,2008463041,2950355573,1109467491,537923632,3858759450,4260623118,3218264685,2177748300,403442708,638784309,3287084079,3193921505,899127202,2286175436,773265209,2479146071,1437050866,4236148354,2050833735,3362022572,3126681063,840505643,3866325909,3227541664,427917720,2655997905,2749160575,1143087718,1412049534,999329963,193497219,2353415882,3354324521,1807268051,672404540,2816401017,3160301282,369822493,2916866934,3688947771,1681011286,1949973070,336202270,2454276571,201721354,1210328172,3093060836,2680341085,3184776046,1135389935,3294782118,965841320,831886756,3554993207,4068047243,3588745010,2345191491,1849112409,3664604599,26054028,2983581028,2622377682,1235855840,3630984372,2891339514,4092916743,3488279077,3395642799,4101667470,1202630377,268961816,1874508501,4034427016,1243948399,1546530418,941366308,1470539505,1941222599,2546386513,3421038627,2715671932,3899946140,1042226977,2521517021,1639824860,227249030,260737669,3765465232,2084453954,1907733956,3429263018,2420656344,100860677,4160157185,470683154,3261161891,1781871967,2924959737,1773779408,394692241,2579611992,974986535,664706745,3655459128,3958962195,731420851,571543859,3530123707,2849626480,126783113,865375399,765172662,1008606754,361203602,3387549984,2278477385,2857719295,1344809080,2782912378,59542671,1503764984,160008576,437062935,1707065306,3622233649,2218934982,3496503480,2185314755,697932208,1512910199,504303377,2075177163,2824099068,1841019862,739644986],f=[2781242211,2230877308,2582542199,2381740923,234877682,3184946027,2984144751,1418839493,1348481072,50462977,2848876391,2102799147,434634494,1656084439,3863849899,2599188086,1167051466,2636087938,1082771913,2281340285,368048890,3954334041,3381544775,201060592,3963727277,1739838676,4250903202,3930435503,3206782108,4149453988,2531553906,1536934080,3262494647,484572669,2923271059,1783375398,1517041206,1098792767,49674231,1334037708,1550332980,4098991525,886171109,150598129,2481090929,1940642008,1398944049,1059722517,201851908,1385547719,1699095331,1587397571,674240536,2704774806,252314885,3039795866,151914247,908333586,2602270848,1038082786,651029483,1766729511,3447698098,2682942837,454166793,2652734339,1951935532,775166490,758520603,3000790638,4004797018,4217086112,4137964114,1299594043,1639438038,3464344499,2068982057,1054729187,1901997871,2534638724,4121318227,1757008337,0,750906861,1614815264,535035132,3363418545,3988151131,3201591914,1183697867,3647454910,1265776953,3734260298,3566750796,3903871064,1250283471,1807470800,717615087,3847203498,384695291,3313910595,3617213773,1432761139,2484176261,3481945413,283769337,100925954,2180939647,4037038160,1148730428,3123027871,3813386408,4087501137,4267549603,3229630528,2315620239,2906624658,3156319645,1215313976,82966005,3747855548,3245848246,1974459098,1665278241,807407632,451280895,251524083,1841287890,1283575245,337120268,891687699,801369324,3787349855,2721421207,3431482436,959321879,1469301956,4065699751,2197585534,1199193405,2898814052,3887750493,724703513,2514908019,2696962144,2551808385,3516813135,2141445340,1715741218,2119445034,2872807568,2198571144,3398190662,700968686,3547052216,1009259540,2041044702,3803995742,487983883,1991105499,1004265696,1449407026,1316239930,504629770,3683797321,168560134,1816667172,3837287516,1570751170,1857934291,4014189740,2797888098,2822345105,2754712981,936633572,2347923833,852879335,1133234376,1500395319,3084545389,2348912013,1689376213,3533459022,3762923945,3034082412,4205598294,133428468,634383082,2949277029,2398386810,3913789102,403703816,3580869306,2297460856,1867130149,1918643758,607656988,4049053350,3346248884,1368901318,600565992,2090982877,2632479860,557719327,3717614411,3697393085,2249034635,2232388234,2430627952,1115438654,3295786421,2865522278,3633334344,84280067,33027830,303828494,2747425121,1600795957,4188952407,3496589753,2434238086,1486471617,658119965,3106381470,953803233,334231800,3005978776,857870609,3151128937,1890179545,2298973838,2805175444,3056442267,574365214,2450884487,550103529,1233637070,4289353045,2018519080,2057691103,2399374476,4166623649,2148108681,387583245,3664101311,836232934,3330556482,3100665960,3280093505,2955516313,2002398509,287182607,3413881008,4238890068,3597515707,975967766],m=[1671808611,2089089148,2006576759,2072901243,4061003762,1807603307,1873927791,3310653893,810573872,16974337,1739181671,729634347,4263110654,3613570519,2883997099,1989864566,3393556426,2191335298,3376449993,2106063485,4195741690,1508618841,1204391495,4027317232,2917941677,3563566036,2734514082,2951366063,2629772188,2767672228,1922491506,3227229120,3082974647,4246528509,2477669779,644500518,911895606,1061256767,4144166391,3427763148,878471220,2784252325,3845444069,4043897329,1905517169,3631459288,827548209,356461077,67897348,3344078279,593839651,3277757891,405286936,2527147926,84871685,2595565466,118033927,305538066,2157648768,3795705826,3945188843,661212711,2999812018,1973414517,152769033,2208177539,745822252,439235610,455947803,1857215598,1525593178,2700827552,1391895634,994932283,3596728278,3016654259,695947817,3812548067,795958831,2224493444,1408607827,3513301457,0,3979133421,543178784,4229948412,2982705585,1542305371,1790891114,3410398667,3201918910,961245753,1256100938,1289001036,1491644504,3477767631,3496721360,4012557807,2867154858,4212583931,1137018435,1305975373,861234739,2241073541,1171229253,4178635257,33948674,2139225727,1357946960,1011120188,2679776671,2833468328,1374921297,2751356323,1086357568,2408187279,2460827538,2646352285,944271416,4110742005,3168756668,3066132406,3665145818,560153121,271589392,4279952895,4077846003,3530407890,3444343245,202643468,322250259,3962553324,1608629855,2543990167,1154254916,389623319,3294073796,2817676711,2122513534,1028094525,1689045092,1575467613,422261273,1939203699,1621147744,2174228865,1339137615,3699352540,577127458,712922154,2427141008,2290289544,1187679302,3995715566,3100863416,339486740,3732514782,1591917662,186455563,3681988059,3762019296,844522546,978220090,169743370,1239126601,101321734,611076132,1558493276,3260915650,3547250131,2901361580,1655096418,2443721105,2510565781,3828863972,2039214713,3878868455,3359869896,928607799,1840765549,2374762893,3580146133,1322425422,2850048425,1823791212,1459268694,4094161908,3928346602,1706019429,2056189050,2934523822,135794696,3134549946,2022240376,628050469,779246638,472135708,2800834470,3032970164,3327236038,3894660072,3715932637,1956440180,522272287,1272813131,3185336765,2340818315,2323976074,1888542832,1044544574,3049550261,1722469478,1222152264,50660867,4127324150,236067854,1638122081,895445557,1475980887,3117443513,2257655686,3243809217,489110045,2662934430,3778599393,4162055160,2561878936,288563729,1773916777,3648039385,2391345038,2493985684,2612407707,505560094,2274497927,3911240169,3460925390,1442818645,678973480,3749357023,2358182796,2717407649,2306869641,219617805,3218761151,3862026214,1120306242,1756942440,1103331905,2578459033,762796589,252780047,2966125488,1425844308,3151392187,372911126],g=[1667474886,2088535288,2004326894,2071694838,4075949567,1802223062,1869591006,3318043793,808472672,16843522,1734846926,724270422,4278065639,3621216949,2880169549,1987484396,3402253711,2189597983,3385409673,2105378810,4210693615,1499065266,1195886990,4042263547,2913856577,3570689971,2728590687,2947541573,2627518243,2762274643,1920112356,3233831835,3082273397,4261223649,2475929149,640051788,909531756,1061110142,4160160501,3435941763,875846760,2779116625,3857003729,4059105529,1903268834,3638064043,825316194,353713962,67374088,3351728789,589522246,3284360861,404236336,2526454071,84217610,2593830191,117901582,303183396,2155911963,3806477791,3958056653,656894286,2998062463,1970642922,151591698,2206440989,741110872,437923380,454765878,1852748508,1515908788,2694904667,1381168804,993742198,3604373943,3014905469,690584402,3823320797,791638366,2223281939,1398011302,3520161977,0,3991743681,538992704,4244381667,2981218425,1532751286,1785380564,3419096717,3200178535,960056178,1246420628,1280103576,1482221744,3486468741,3503319995,4025428677,2863326543,4227536621,1128514950,1296947098,859002214,2240123921,1162203018,4193849577,33687044,2139062782,1347481760,1010582648,2678045221,2829640523,1364325282,2745433693,1077985408,2408548869,2459086143,2644360225,943212656,4126475505,3166494563,3065430391,3671750063,555836226,269496352,4294908645,4092792573,3537006015,3452783745,202118168,320025894,3974901699,1600119230,2543297077,1145359496,387397934,3301201811,2812801621,2122220284,1027426170,1684319432,1566435258,421079858,1936954854,1616945344,2172753945,1330631070,3705438115,572679748,707427924,2425400123,2290647819,1179044492,4008585671,3099120491,336870440,3739122087,1583276732,185277718,3688593069,3772791771,842159716,976899700,168435220,1229577106,101059084,606366792,1549591736,3267517855,3553849021,2897014595,1650632388,2442242105,2509612081,3840161747,2038008818,3890688725,3368567691,926374254,1835907034,2374863873,3587531953,1313788572,2846482505,1819063512,1448540844,4109633523,3941213647,1701162954,2054852340,2930698567,134748176,3132806511,2021165296,623210314,774795868,471606328,2795958615,3031746419,3334885783,3907527627,3722280097,1953799400,522133822,1263263126,3183336545,2341176845,2324333839,1886425312,1044267644,3048588401,1718004428,1212733584,50529542,4143317495,235803164,1633788866,892690282,1465383342,3115962473,2256965911,3250673817,488449850,2661202215,3789633753,4177007595,2560144171,286339874,1768537042,3654906025,2391705863,2492770099,2610673197,505291324,2273808917,3924369609,3469625735,1431699370,673740880,3755965093,2358021891,2711746649,2307489801,218961690,3217021541,3873845719,1111672452,1751693520,1094828930,2576986153,757954394,252645662,2964376443,1414855848,3149649517,370555436],v=[1374988112,2118214995,437757123,975658646,1001089995,530400753,2902087851,1273168787,540080725,2910219766,2295101073,4110568485,1340463100,3307916247,641025152,3043140495,3736164937,632953703,1172967064,1576976609,3274667266,2169303058,2370213795,1809054150,59727847,361929877,3211623147,2505202138,3569255213,1484005843,1239443753,2395588676,1975683434,4102977912,2572697195,666464733,3202437046,4035489047,3374361702,2110667444,1675577880,3843699074,2538681184,1649639237,2976151520,3144396420,4269907996,4178062228,1883793496,2403728665,2497604743,1383856311,2876494627,1917518562,3810496343,1716890410,3001755655,800440835,2261089178,3543599269,807962610,599762354,33778362,3977675356,2328828971,2809771154,4077384432,1315562145,1708848333,101039829,3509871135,3299278474,875451293,2733856160,92987698,2767645557,193195065,1080094634,1584504582,3178106961,1042385657,2531067453,3711829422,1306967366,2438237621,1908694277,67556463,1615861247,429456164,3602770327,2302690252,1742315127,2968011453,126454664,3877198648,2043211483,2709260871,2084704233,4169408201,0,159417987,841739592,504459436,1817866830,4245618683,260388950,1034867998,908933415,168810852,1750902305,2606453969,607530554,202008497,2472011535,3035535058,463180190,2160117071,1641816226,1517767529,470948374,3801332234,3231722213,1008918595,303765277,235474187,4069246893,766945465,337553864,1475418501,2943682380,4003061179,2743034109,4144047775,1551037884,1147550661,1543208500,2336434550,3408119516,3069049960,3102011747,3610369226,1113818384,328671808,2227573024,2236228733,3535486456,2935566865,3341394285,496906059,3702665459,226906860,2009195472,733156972,2842737049,294930682,1206477858,2835123396,2700099354,1451044056,573804783,2269728455,3644379585,2362090238,2564033334,2801107407,2776292904,3669462566,1068351396,742039012,1350078989,1784663195,1417561698,4136440770,2430122216,775550814,2193862645,2673705150,1775276924,1876241833,3475313331,3366754619,270040487,3902563182,3678124923,3441850377,1851332852,3969562369,2203032232,3868552805,2868897406,566021896,4011190502,3135740889,1248802510,3936291284,699432150,832877231,708780849,3332740144,899835584,1951317047,4236429990,3767586992,866637845,4043610186,1106041591,2144161806,395441711,1984812685,1139781709,3433712980,3835036895,2664543715,1282050075,3240894392,1181045119,2640243204,25965917,4203181171,4211818798,3009879386,2463879762,3910161971,1842759443,2597806476,933301370,1509430414,3943906441,3467192302,3076639029,3776767469,2051518780,2631065433,1441952575,404016761,1942435775,1408749034,1610459739,3745345300,2017778566,3400528769,3110650942,941896748,3265478751,371049330,3168937228,675039627,4279080257,967311729,135050206,3635733660,1683407248,2076935265,3576870512,1215061108,3501741890],h=[1347548327,1400783205,3273267108,2520393566,3409685355,4045380933,2880240216,2471224067,1428173050,4138563181,2441661558,636813900,4233094615,3620022987,2149987652,2411029155,1239331162,1730525723,2554718734,3781033664,46346101,310463728,2743944855,3328955385,3875770207,2501218972,3955191162,3667219033,768917123,3545789473,692707433,1150208456,1786102409,2029293177,1805211710,3710368113,3065962831,401639597,1724457132,3028143674,409198410,2196052529,1620529459,1164071807,3769721975,2226875310,486441376,2499348523,1483753576,428819965,2274680428,3075636216,598438867,3799141122,1474502543,711349675,129166120,53458370,2592523643,2782082824,4063242375,2988687269,3120694122,1559041666,730517276,2460449204,4042459122,2706270690,3446004468,3573941694,533804130,2328143614,2637442643,2695033685,839224033,1973745387,957055980,2856345839,106852767,1371368976,4181598602,1033297158,2933734917,1179510461,3046200461,91341917,1862534868,4284502037,605657339,2547432937,3431546947,2003294622,3182487618,2282195339,954669403,3682191598,1201765386,3917234703,3388507166,0,2198438022,1211247597,2887651696,1315723890,4227665663,1443857720,507358933,657861945,1678381017,560487590,3516619604,975451694,2970356327,261314535,3535072918,2652609425,1333838021,2724322336,1767536459,370938394,182621114,3854606378,1128014560,487725847,185469197,2918353863,3106780840,3356761769,2237133081,1286567175,3152976349,4255350624,2683765030,3160175349,3309594171,878443390,1988838185,3704300486,1756818940,1673061617,3403100636,272786309,1075025698,545572369,2105887268,4174560061,296679730,1841768865,1260232239,4091327024,3960309330,3497509347,1814803222,2578018489,4195456072,575138148,3299409036,446754879,3629546796,4011996048,3347532110,3252238545,4270639778,915985419,3483825537,681933534,651868046,2755636671,3828103837,223377554,2607439820,1649704518,3270937875,3901806776,1580087799,4118987695,3198115200,2087309459,2842678573,3016697106,1003007129,2802849917,1860738147,2077965243,164439672,4100872472,32283319,2827177882,1709610350,2125135846,136428751,3874428392,3652904859,3460984630,3572145929,3593056380,2939266226,824852259,818324884,3224740454,930369212,2801566410,2967507152,355706840,1257309336,4148292826,243256656,790073846,2373340630,1296297904,1422699085,3756299780,3818836405,457992840,3099667487,2135319889,77422314,1560382517,1945798516,788204353,1521706781,1385356242,870912086,325965383,2358957921,2050466060,2388260884,2313884476,4006521127,901210569,3990953189,1014646705,1503449823,1062597235,2031621326,3212035895,3931371469,1533017514,350174575,2256028891,2177544179,1052338372,741876788,1606591296,1914052035,213705253,2334669897,1107234197,1899603969,3725069491,2631447780,2422494913,1635502980,1893020342,1950903388,1120974935],E=[2807058932,1699970625,2764249623,1586903591,1808481195,1173430173,1487645946,59984867,4199882800,1844882806,1989249228,1277555970,3623636965,3419915562,1149249077,2744104290,1514790577,459744698,244860394,3235995134,1963115311,4027744588,2544078150,4190530515,1608975247,2627016082,2062270317,1507497298,2200818878,567498868,1764313568,3359936201,2305455554,2037970062,1047239e3,1910319033,1337376481,2904027272,2892417312,984907214,1243112415,830661914,861968209,2135253587,2011214180,2927934315,2686254721,731183368,1750626376,4246310725,1820824798,4172763771,3542330227,48394827,2404901663,2871682645,671593195,3254988725,2073724613,145085239,2280796200,2779915199,1790575107,2187128086,472615631,3029510009,4075877127,3802222185,4107101658,3201631749,1646252340,4270507174,1402811438,1436590835,3778151818,3950355702,3963161475,4020912224,2667994737,273792366,2331590177,104699613,95345982,3175501286,2377486676,1560637892,3564045318,369057872,4213447064,3919042237,1137477952,2658625497,1119727848,2340947849,1530455833,4007360968,172466556,266959938,516552836,0,2256734592,3980931627,1890328081,1917742170,4294704398,945164165,3575528878,958871085,3647212047,2787207260,1423022939,775562294,1739656202,3876557655,2530391278,2443058075,3310321856,547512796,1265195639,437656594,3121275539,719700128,3762502690,387781147,218828297,3350065803,2830708150,2848461854,428169201,122466165,3720081049,1627235199,648017665,4122762354,1002783846,2117360635,695634755,3336358691,4234721005,4049844452,3704280881,2232435299,574624663,287343814,612205898,1039717051,840019705,2708326185,793451934,821288114,1391201670,3822090177,376187827,3113855344,1224348052,1679968233,2361698556,1058709744,752375421,2431590963,1321699145,3519142200,2734591178,188127444,2177869557,3727205754,2384911031,3215212461,2648976442,2450346104,3432737375,1180849278,331544205,3102249176,4150144569,2952102595,2159976285,2474404304,766078933,313773861,2570832044,2108100632,1668212892,3145456443,2013908262,418672217,3070356634,2594734927,1852171925,3867060991,3473416636,3907448597,2614737639,919489135,164948639,2094410160,2997825956,590424639,2486224549,1723872674,3157750862,3399941250,3501252752,3625268135,2555048196,3673637356,1343127501,4130281361,3599595085,2957853679,1297403050,81781910,3051593425,2283490410,532201772,1367295589,3926170974,895287692,1953757831,1093597963,492483431,3528626907,1446242576,1192455638,1636604631,209336225,344873464,1015671571,669961897,3375740769,3857572124,2973530695,3747192018,1933530610,3464042516,935293895,3454686199,2858115069,1863638845,3683022916,4085369519,3292445032,875313188,1080017571,3279033885,621591778,1233856572,2504130317,24197544,3017672716,3835484340,3247465558,2220981195,3060847922,1551124588,1463996600],A=[4104605777,1097159550,396673818,660510266,2875968315,2638606623,4200115116,3808662347,821712160,1986918061,3430322568,38544885,3856137295,718002117,893681702,1654886325,2975484382,3122358053,3926825029,4274053469,796197571,1290801793,1184342925,3556361835,2405426947,2459735317,1836772287,1381620373,3196267988,1948373848,3764988233,3385345166,3263785589,2390325492,1480485785,3111247143,3780097726,2293045232,548169417,3459953789,3746175075,439452389,1362321559,1400849762,1685577905,1806599355,2174754046,137073913,1214797936,1174215055,3731654548,2079897426,1943217067,1258480242,529487843,1437280870,3945269170,3049390895,3313212038,923313619,679998e3,3215307299,57326082,377642221,3474729866,2041877159,133361907,1776460110,3673476453,96392454,878845905,2801699524,777231668,4082475170,2330014213,4142626212,2213296395,1626319424,1906247262,1846563261,562755902,3708173718,1040559837,3871163981,1418573201,3294430577,114585348,1343618912,2566595609,3186202582,1078185097,3651041127,3896688048,2307622919,425408743,3371096953,2081048481,1108339068,2216610296,0,2156299017,736970802,292596766,1517440620,251657213,2235061775,2933202493,758720310,265905162,1554391400,1532285339,908999204,174567692,1474760595,4002861748,2610011675,3234156416,3693126241,2001430874,303699484,2478443234,2687165888,585122620,454499602,151849742,2345119218,3064510765,514443284,4044981591,1963412655,2581445614,2137062819,19308535,1928707164,1715193156,4219352155,1126790795,600235211,3992742070,3841024952,836553431,1669664834,2535604243,3323011204,1243905413,3141400786,4180808110,698445255,2653899549,2989552604,2253581325,3252932727,3004591147,1891211689,2487810577,3915653703,4237083816,4030667424,2100090966,865136418,1229899655,953270745,3399679628,3557504664,4118925222,2061379749,3079546586,2915017791,983426092,2022837584,1607244650,2118541908,2366882550,3635996816,972512814,3283088770,1568718495,3499326569,3576539503,621982671,2895723464,410887952,2623762152,1002142683,645401037,1494807662,2595684844,1335535747,2507040230,4293295786,3167684641,367585007,3885750714,1865862730,2668221674,2960971305,2763173681,1059270954,2777952454,2724642869,1320957812,2194319100,2429595872,2815956275,77089521,3973773121,3444575871,2448830231,1305906550,4021308739,2857194700,2516901860,3518358430,1787304780,740276417,1699839814,1592394909,2352307457,2272556026,188821243,1729977011,3687994002,274084841,3594982253,3613494426,2701949495,4162096729,322734571,2837966542,1640576439,484830689,1202797690,3537852828,4067639125,349075736,3342319475,4157467219,4255800159,1030690015,1155237496,2951971274,1757691577,607398968,2738905026,499347990,3794078908,1011452712,227885567,2818666809,213114376,3034881240,1455525988,3414450555,850817237,1817998408,3092726480],T=[0,235474187,470948374,303765277,941896748,908933415,607530554,708780849,1883793496,2118214995,1817866830,1649639237,1215061108,1181045119,1417561698,1517767529,3767586992,4003061179,4236429990,4069246893,3635733660,3602770327,3299278474,3400528769,2430122216,2664543715,2362090238,2193862645,2835123396,2801107407,3035535058,3135740889,3678124923,3576870512,3341394285,3374361702,3810496343,3977675356,4279080257,4043610186,2876494627,2776292904,3076639029,3110650942,2472011535,2640243204,2403728665,2169303058,1001089995,899835584,666464733,699432150,59727847,226906860,530400753,294930682,1273168787,1172967064,1475418501,1509430414,1942435775,2110667444,1876241833,1641816226,2910219766,2743034109,2976151520,3211623147,2505202138,2606453969,2302690252,2269728455,3711829422,3543599269,3240894392,3475313331,3843699074,3943906441,4178062228,4144047775,1306967366,1139781709,1374988112,1610459739,1975683434,2076935265,1775276924,1742315127,1034867998,866637845,566021896,800440835,92987698,193195065,429456164,395441711,1984812685,2017778566,1784663195,1683407248,1315562145,1080094634,1383856311,1551037884,101039829,135050206,437757123,337553864,1042385657,807962610,573804783,742039012,2531067453,2564033334,2328828971,2227573024,2935566865,2700099354,3001755655,3168937228,3868552805,3902563182,4203181171,4102977912,3736164937,3501741890,3265478751,3433712980,1106041591,1340463100,1576976609,1408749034,2043211483,2009195472,1708848333,1809054150,832877231,1068351396,766945465,599762354,159417987,126454664,361929877,463180190,2709260871,2943682380,3178106961,3009879386,2572697195,2538681184,2236228733,2336434550,3509871135,3745345300,3441850377,3274667266,3910161971,3877198648,4110568485,4211818798,2597806476,2497604743,2261089178,2295101073,2733856160,2902087851,3202437046,2968011453,3936291284,3835036895,4136440770,4169408201,3535486456,3702665459,3467192302,3231722213,2051518780,1951317047,1716890410,1750902305,1113818384,1282050075,1584504582,1350078989,168810852,67556463,371049330,404016761,841739592,1008918595,775550814,540080725,3969562369,3801332234,4035489047,4269907996,3569255213,3669462566,3366754619,3332740144,2631065433,2463879762,2160117071,2395588676,2767645557,2868897406,3102011747,3069049960,202008497,33778362,270040487,504459436,875451293,975658646,675039627,641025152,2084704233,1917518562,1615861247,1851332852,1147550661,1248802510,1484005843,1451044056,933301370,967311729,733156972,632953703,260388950,25965917,328671808,496906059,1206477858,1239443753,1543208500,1441952575,2144161806,1908694277,1675577880,1842759443,3610369226,3644379585,3408119516,3307916247,4011190502,3776767469,4077384432,4245618683,2809771154,2842737049,3144396420,3043140495,2673705150,2438237621,2203032232,2370213795],_=[0,185469197,370938394,487725847,741876788,657861945,975451694,824852259,1483753576,1400783205,1315723890,1164071807,1950903388,2135319889,1649704518,1767536459,2967507152,3152976349,2801566410,2918353863,2631447780,2547432937,2328143614,2177544179,3901806776,3818836405,4270639778,4118987695,3299409036,3483825537,3535072918,3652904859,2077965243,1893020342,1841768865,1724457132,1474502543,1559041666,1107234197,1257309336,598438867,681933534,901210569,1052338372,261314535,77422314,428819965,310463728,3409685355,3224740454,3710368113,3593056380,3875770207,3960309330,4045380933,4195456072,2471224067,2554718734,2237133081,2388260884,3212035895,3028143674,2842678573,2724322336,4138563181,4255350624,3769721975,3955191162,3667219033,3516619604,3431546947,3347532110,2933734917,2782082824,3099667487,3016697106,2196052529,2313884476,2499348523,2683765030,1179510461,1296297904,1347548327,1533017514,1786102409,1635502980,2087309459,2003294622,507358933,355706840,136428751,53458370,839224033,957055980,605657339,790073846,2373340630,2256028891,2607439820,2422494913,2706270690,2856345839,3075636216,3160175349,3573941694,3725069491,3273267108,3356761769,4181598602,4063242375,4011996048,3828103837,1033297158,915985419,730517276,545572369,296679730,446754879,129166120,213705253,1709610350,1860738147,1945798516,2029293177,1239331162,1120974935,1606591296,1422699085,4148292826,4233094615,3781033664,3931371469,3682191598,3497509347,3446004468,3328955385,2939266226,2755636671,3106780840,2988687269,2198438022,2282195339,2501218972,2652609425,1201765386,1286567175,1371368976,1521706781,1805211710,1620529459,2105887268,1988838185,533804130,350174575,164439672,46346101,870912086,954669403,636813900,788204353,2358957921,2274680428,2592523643,2441661558,2695033685,2880240216,3065962831,3182487618,3572145929,3756299780,3270937875,3388507166,4174560061,4091327024,4006521127,3854606378,1014646705,930369212,711349675,560487590,272786309,457992840,106852767,223377554,1678381017,1862534868,1914052035,2031621326,1211247597,1128014560,1580087799,1428173050,32283319,182621114,401639597,486441376,768917123,651868046,1003007129,818324884,1503449823,1385356242,1333838021,1150208456,1973745387,2125135846,1673061617,1756818940,2970356327,3120694122,2802849917,2887651696,2637442643,2520393566,2334669897,2149987652,3917234703,3799141122,4284502037,4100872472,3309594171,3460984630,3545789473,3629546796,2050466060,1899603969,1814803222,1730525723,1443857720,1560382517,1075025698,1260232239,575138148,692707433,878443390,1062597235,243256656,91341917,409198410,325965383,3403100636,3252238545,3704300486,3620022987,3874428392,3990953189,4042459122,4227665663,2460449204,2578018489,2226875310,2411029155,3198115200,3046200461,2827177882,2743944855],y=[0,218828297,437656594,387781147,875313188,958871085,775562294,590424639,1750626376,1699970625,1917742170,2135253587,1551124588,1367295589,1180849278,1265195639,3501252752,3720081049,3399941250,3350065803,3835484340,3919042237,4270507174,4085369519,3102249176,3051593425,2734591178,2952102595,2361698556,2177869557,2530391278,2614737639,3145456443,3060847922,2708326185,2892417312,2404901663,2187128086,2504130317,2555048196,3542330227,3727205754,3375740769,3292445032,3876557655,3926170974,4246310725,4027744588,1808481195,1723872674,1910319033,2094410160,1608975247,1391201670,1173430173,1224348052,59984867,244860394,428169201,344873464,935293895,984907214,766078933,547512796,1844882806,1627235199,2011214180,2062270317,1507497298,1423022939,1137477952,1321699145,95345982,145085239,532201772,313773861,830661914,1015671571,731183368,648017665,3175501286,2957853679,2807058932,2858115069,2305455554,2220981195,2474404304,2658625497,3575528878,3625268135,3473416636,3254988725,3778151818,3963161475,4213447064,4130281361,3599595085,3683022916,3432737375,3247465558,3802222185,4020912224,4172763771,4122762354,3201631749,3017672716,2764249623,2848461854,2331590177,2280796200,2431590963,2648976442,104699613,188127444,472615631,287343814,840019705,1058709744,671593195,621591778,1852171925,1668212892,1953757831,2037970062,1514790577,1463996600,1080017571,1297403050,3673637356,3623636965,3235995134,3454686199,4007360968,3822090177,4107101658,4190530515,2997825956,3215212461,2830708150,2779915199,2256734592,2340947849,2627016082,2443058075,172466556,122466165,273792366,492483431,1047239e3,861968209,612205898,695634755,1646252340,1863638845,2013908262,1963115311,1446242576,1530455833,1277555970,1093597963,1636604631,1820824798,2073724613,1989249228,1436590835,1487645946,1337376481,1119727848,164948639,81781910,331544205,516552836,1039717051,821288114,669961897,719700128,2973530695,3157750862,2871682645,2787207260,2232435299,2283490410,2667994737,2450346104,3647212047,3564045318,3279033885,3464042516,3980931627,3762502690,4150144569,4199882800,3070356634,3121275539,2904027272,2686254721,2200818878,2384911031,2570832044,2486224549,3747192018,3528626907,3310321856,3359936201,3950355702,3867060991,4049844452,4234721005,1739656202,1790575107,2108100632,1890328081,1402811438,1586903591,1233856572,1149249077,266959938,48394827,369057872,418672217,1002783846,919489135,567498868,752375421,209336225,24197544,376187827,459744698,945164165,895287692,574624663,793451934,1679968233,1764313568,2117360635,1933530610,1343127501,1560637892,1243112415,1192455638,3704280881,3519142200,3336358691,3419915562,3907448597,3857572124,4075877127,4294704398,3029510009,3113855344,2927934315,2744104290,2159976285,2377486676,2594734927,2544078150],I=[0,151849742,303699484,454499602,607398968,758720310,908999204,1059270954,1214797936,1097159550,1517440620,1400849762,1817998408,1699839814,2118541908,2001430874,2429595872,2581445614,2194319100,2345119218,3034881240,3186202582,2801699524,2951971274,3635996816,3518358430,3399679628,3283088770,4237083816,4118925222,4002861748,3885750714,1002142683,850817237,698445255,548169417,529487843,377642221,227885567,77089521,1943217067,2061379749,1640576439,1757691577,1474760595,1592394909,1174215055,1290801793,2875968315,2724642869,3111247143,2960971305,2405426947,2253581325,2638606623,2487810577,3808662347,3926825029,4044981591,4162096729,3342319475,3459953789,3576539503,3693126241,1986918061,2137062819,1685577905,1836772287,1381620373,1532285339,1078185097,1229899655,1040559837,923313619,740276417,621982671,439452389,322734571,137073913,19308535,3871163981,4021308739,4104605777,4255800159,3263785589,3414450555,3499326569,3651041127,2933202493,2815956275,3167684641,3049390895,2330014213,2213296395,2566595609,2448830231,1305906550,1155237496,1607244650,1455525988,1776460110,1626319424,2079897426,1928707164,96392454,213114376,396673818,514443284,562755902,679998e3,865136418,983426092,3708173718,3557504664,3474729866,3323011204,4180808110,4030667424,3945269170,3794078908,2507040230,2623762152,2272556026,2390325492,2975484382,3092726480,2738905026,2857194700,3973773121,3856137295,4274053469,4157467219,3371096953,3252932727,3673476453,3556361835,2763173681,2915017791,3064510765,3215307299,2156299017,2307622919,2459735317,2610011675,2081048481,1963412655,1846563261,1729977011,1480485785,1362321559,1243905413,1126790795,878845905,1030690015,645401037,796197571,274084841,425408743,38544885,188821243,3613494426,3731654548,3313212038,3430322568,4082475170,4200115116,3780097726,3896688048,2668221674,2516901860,2366882550,2216610296,3141400786,2989552604,2837966542,2687165888,1202797690,1320957812,1437280870,1554391400,1669664834,1787304780,1906247262,2022837584,265905162,114585348,499347990,349075736,736970802,585122620,972512814,821712160,2595684844,2478443234,2293045232,2174754046,3196267988,3079546586,2895723464,2777952454,3537852828,3687994002,3234156416,3385345166,4142626212,4293295786,3841024952,3992742070,174567692,57326082,410887952,292596766,777231668,660510266,1011452712,893681702,1108339068,1258480242,1343618912,1494807662,1715193156,1865862730,1948373848,2100090966,2701949495,2818666809,3004591147,3122358053,2235061775,2352307457,2535604243,2653899549,3915653703,3764988233,4219352155,4067639125,3444575871,3294430577,3746175075,3594982253,836553431,953270745,600235211,718002117,367585007,484830689,133361907,251657213,2041877159,1891211689,1806599355,1654886325,1568718495,1418573201,1335535747,1184342925],S=function(e){
if(!(this instanceof S))throw Error("AES must be instanitated with `new`");this.key=a(e),this._prepare()};S.prototype._prepare=function(){var e,n,a,r=d[this.key.length];if(null==r)throw new Error("invalid key size (must be 16, 24 or 32 bytes)");for(this._Ke=[],this._Kd=[],e=0;e<=r;e++)this._Ke.push([0,0,0,0]),this._Kd.push([0,0,0,0]);var i,o=4*(r+1),s=this.key.length/4,u=t(this.key);for(e=0;e<s;e++)i=e>>2,this._Ke[i][e%4]=u[e],this._Kd[r-i][e%4]=u[e];for(var p,f=0,m=s;m<o;){if(p=u[s-1],u[0]^=l[p>>16&255]<<24^l[p>>8&255]<<16^l[255&p]<<8^l[p>>24&255]^c[f]<<24,f+=1,8!=s)for(e=1;e<s;e++)u[e]^=u[e-1];else{for(e=1;e<s/2;e++)u[e]^=u[e-1];for(p=u[s/2-1],u[s/2]^=l[255&p]^l[p>>8&255]<<8^l[p>>16&255]<<16^l[p>>24&255]<<24,e=s/2+1;e<s;e++)u[e]^=u[e-1]}for(e=0;e<s&&m<o;)n=m>>2,a=m%4,this._Ke[n][a]=u[e],this._Kd[r-n][a]=u[e++],m++}for(n=1;n<r;n++)for(a=0;a<4;a++)p=this._Kd[n][a],this._Kd[n][a]=T[p>>24&255]^_[p>>16&255]^y[p>>8&255]^I[255&p]},S.prototype.encrypt=function(e){var n;if(16!=e.length)throw new Error("invalid plaintext size (must be 16 bytes)");var r=this._Ke.length-1,i=[0,0,0,0],o=t(e);for(n=0;n<4;n++)o[n]^=this._Ke[0][n];for(var s=1;s<r;s++){for(n=0;n<4;n++)i[n]=p[o[n]>>24&255]^f[o[(n+1)%4]>>16&255]^m[o[(n+2)%4]>>8&255]^g[255&o[(n+3)%4]]^this._Ke[s][n];o=i.slice(0)}var d,c=a(16);for(n=0;n<4;n++)d=this._Ke[r][n],c[4*n]=255&(l[o[n]>>24&255]^d>>24),c[4*n+1]=255&(l[o[(n+1)%4]>>16&255]^d>>16),c[4*n+2]=255&(l[o[(n+2)%4]>>8&255]^d>>8),c[4*n+3]=255&(l[255&o[(n+3)%4]]^d);return c},S.prototype.decrypt=function(e){var n;if(16!=e.length)throw new Error("invalid ciphertext size (must be 16 bytes)");var r=this._Kd.length-1,i=[0,0,0,0],o=t(e);for(n=0;n<4;n++)o[n]^=this._Kd[0][n];for(var s=1;s<r;s++){for(n=0;n<4;n++)i[n]=v[o[n]>>24&255]^h[o[(n+3)%4]>>16&255]^E[o[(n+2)%4]>>8&255]^A[255&o[(n+1)%4]]^this._Kd[s][n];o=i.slice(0)}var d,c=a(16);for(n=0;n<4;n++)d=this._Kd[r][n],c[4*n]=255&(u[o[n]>>24&255]^d>>24),c[4*n+1]=255&(u[o[(n+3)%4]>>16&255]^d>>16),c[4*n+2]=255&(u[o[(n+2)%4]>>8&255]^d>>8),c[4*n+3]=255&(u[255&o[(n+1)%4]]^d);return c};var D=function(e){if(!(this instanceof D))throw Error("AES must be instanitated with `new`");this.description="Electronic Code Block",this.name="ecb",this._aes=new S(e)};D.prototype.encrypt=function(e){return this._aes.encrypt(e)},D.prototype.decrypt=function(e,t){return this._aes.decrypt(e)};var k=function(e,t){if(!(this instanceof k))throw Error("AES must be instanitated with `new`");if(this.description="Cipher Block Chaining",this.name="cbc",t){if(16!=t.length)throw new Error("invalid initialation vector size (must be 16 bytes)")}else t=a([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]);this._lastCipherblock=a(t),this._aes=new S(e)};k.prototype.encrypt=function(e){if(16!=e.length)throw new Error("invalid plaintext size (must be 16 bytes)");for(var t=a(e),n=0;n<16;n++)t[n]^=this._lastCipherblock[n];return this._lastCipherblock=this._aes.encrypt(t),this._lastCipherblock},k.prototype.decrypt=function(e){if(16!=e.length)throw new Error("invalid ciphertext size (must be 16 bytes)");for(var t=this._aes.decrypt(e),n=0;n<16;n++)t[n]^=this._lastCipherblock[n];return r(e,this._lastCipherblock),t};var C=function(e,t,n){if(!(this instanceof C))throw Error("AES must be instanitated with `new`");if(this.description="Cipher Feedback",this.name="cfb",t){if(16!=t.length)throw new Error("invalid initialation vector size (must be 16 size)")}else t=a([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]);n||(n=1),this.segmentSize=n,this._shiftRegister=a(t),this._aes=new S(e)};C.prototype.encrypt=function(e){if(e.length%this.segmentSize!=0)throw new Error("invalid plaintext size (must be segmentSize bytes)");for(var t,n=a(e),i=0;i<n.length;i+=this.segmentSize){t=this._aes.encrypt(this._shiftRegister);for(var o=0;o<this.segmentSize;o++)n[i+o]^=t[o];r(this._shiftRegister,this._shiftRegister,0,this.segmentSize),r(n,this._shiftRegister,16-this.segmentSize,i,i+this.segmentSize)}return n},C.prototype.decrypt=function(e){if(e.length%this.segmentSize!=0)throw new Error("invalid ciphertext size (must be segmentSize bytes)");for(var t,n=a(e),i=0;i<n.length;i+=this.segmentSize){t=this._aes.encrypt(this._shiftRegister);for(var o=0;o<this.segmentSize;o++)n[i+o]^=t[o];r(this._shiftRegister,this._shiftRegister,0,this.segmentSize),r(e,this._shiftRegister,16-this.segmentSize,i,i+this.segmentSize)}return n};var R=function(e,t){if(!(this instanceof R))throw Error("AES must be instanitated with `new`");if(this.description="Output Feedback",this.name="ofb",t){if(16!=t.length)throw new Error("invalid initialation vector size (must be 16 bytes)")}else t=a([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]);this._lastPrecipher=a(t),this._lastPrecipherIndex=16,this._aes=new S(e)};R.prototype.encrypt=function(e){for(var t=a(e),n=0;n<t.length;n++)16===this._lastPrecipherIndex&&(this._lastPrecipher=this._aes.encrypt(this._lastPrecipher),this._lastPrecipherIndex=0),t[n]^=this._lastPrecipher[this._lastPrecipherIndex++];return t},R.prototype.decrypt=R.prototype.encrypt;var b=function(e){if(!(this instanceof b))throw Error("Counter must be instanitated with `new`");0===e||e||(e=1),"number"==typeof e?(this._counter=a([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]),this.setValue(e)):this.setBytes(e)};b.prototype.setValue=function(e){if("number"!=typeof e||parseInt(e)!=e)throw new Error("invalid counter value (must be an integer)");for(var t=15;t>=0;--t)this._counter[t]=e%256,e>>=8},b.prototype.setBytes=function(e){if(16!=e.length)throw new Error("invalid counter bytes size (must be 16 bytes)");this._counter=a(e)},b.prototype.increment=function(){for(var e=15;e>=0;e--){if(255!==this._counter[e]){this._counter[e]++;break}this._counter[e]=0}};var O=function(e,t){if(!(this instanceof O))throw Error("AES must be instanitated with `new`");this.description="Counter",this.name="ctr",t instanceof b||(t=new b(t)),this._counter=t,this._remainingCounter=null,this._remainingCounterIndex=16,this._aes=new S(e)};O.prototype.encrypt=function(e){for(var t=a(e),n=0;n<t.length;n++)16===this._remainingCounterIndex&&(this._remainingCounter=this._aes.encrypt(this._counter._counter),this._remainingCounterIndex=0,this._counter.increment()),t[n]^=this._remainingCounter[this._remainingCounterIndex++];return t},O.prototype.decrypt=O.prototype.encrypt;var M={ecb:D,cbc:k,cfb:C,ofb:R,ctr:O},N={AES:S,Counter:b,ModeOfOperation:M,util:{convertBytesToString:n,convertStringToBytes:i,_slowCreateBuffer:o}};e.aesjs=N}(de);var ce="=",le=8;return{requestFullScreen:t,checkFullscreen:e,cancelFullScreen:function(){console.log("[cancelFullScreen]"),document.cancelFullScreen?document.cancelFullScreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitCancelFullScreen?document.webkitCancelFullScreen():document.webkitExitFullScreen?document.webkitExitFullScreen():document.msExitFullscreen&&document.msExitFullscreen()},log:function(e,t){var n,a;n=1,">"===e.charAt(0)&&(a=e.slice(1),n=2);var r=Array.prototype.slice.call(arguments,n);a?console.log("["+a+"] ",r.join(" ")):console.log(r.join(" "))},getWindowSize:function(){return{w:screen.width,h:screen.height}},getCumulativeOffset:function(e){var t,n,a;if(t=n=0,window.self!==window.top&&e.offsetWidth<e.clientWidth&&e.getBoundingClientRect().width<100)a=e.getBoundingClientRect(),n=100*a.top,t=100*a.left;else if(e.offsetParent)do{t+=e.offsetLeft,n+=e.offsetTop}while(e=e.offsetParent);return{x:t,y:n}},getRelativeOffset:function(e,t){var n,a;if(n=a=0,e.offsetParent)for(;e&&e!=t;)n+=e.offsetLeft,a+=e.offsetTop,e=e.offsetParent;return{x:n,y:a}},postMessage:function(e){console.log("just sent a msg"),parent.window.postMessage(e,"*")},getDeviceInfo:ie,node2Obj:function(e){return{getNode:function(){return e},getLayout:function(){}}},download:function(e,t,n,a,r,i){var o=0==e.indexOf("file:")||0==window.location.href.indexOf("file:")&&-1==e.indexOf("http:");X(),t&&(e+="?"+("object"==typeof t?J(t):t));var s=new XMLHttpRequest;try{if(s.open("GET",e),i&&(s.withCredentials=!0),r)for(var d in r)r.hasOwnProperty(d)&&s.setRequestHeader(d,r[d])}catch(e){return a&&a(0,"Problem opening request"),!1}s.onreadystatechange=function(){4==s.readyState&&(200==s.status||o&&0==s.status?n(s.responseText):a&&a(s.status,s.responseText))};try{return s.send(),!0}catch(e){return a&&a(0,"Problem sending request"),!1}},parseDFXP:function(e){function t(e){var t=e.split(":"),n=0;if(t.length<=3)for(var a=t.length-1,r=0;a>=0;a--,r++)n+=parseFloat(t[a])*Math.pow(60,r);else if(4==t.length){for(var a=2,r=0;a>=0;a--,r++)n+=parseFloat(t[a])*Math.pow(60,r);n+=parseFloat(t[3])/100}else n=parseFloat(e);return n}var n,a=this.str2XML(e),r=[];n=a.getElementsByTagName("p");for(var i=0,o=n.length;i<o;i++){var s,d=n[i],c=t(d.getAttribute("begin")),l=t(d.getAttribute("end"));s={id:i,begin:c,end:l,text:d.textContent||d.innerText},r.push(s)}return r},parseJSON:function(e){for(var t=JSON.parse(e),n=0,a=t.length,r=[];n<a;n++){var i=n+1,o=parseFloat(t[n].ts),s=o+parseFloat(t[n].dur),d=t[n].line,c={id:i,begin:o,end:s,text:d};r.push(c)}return r},parseVTT:function(e){function t(e){var t,n,a,r,i,o=e.split(":"),s=0;return 3==o.length?(t=o[0],n=o[1],a=o[2]):(t=0,n=o[0],a=o[1]),a=a.split(/\s+/),r=a.splice(0,1)[0],r=r.split(/\.|,/),i=parseFloat(r[1]),r=r[0],s+=3600*parseFloat(t),s+=60*parseFloat(n),s+=parseFloat(r),i&&(s+=i/1e3),s}var n,a,r,i,o=[],s=e.split("\n"),d="",c=1,l=s.length;for(String.prototype.trim||(String.prototype.trim=function(){return this.replace(/^\s+|\s+$/g,"")});c<l;c++)if(d=s[c].trim()){for(-1==d.indexOf("--\x3e")&&(i=d,d=s[++c].trim()),n={id:i},a=d.split(" --\x3e "),n.begin=t(a[0]),n.end=t(a[1]),r=[];s[++c]&&(d=s[c].trim());)r.push(d);n.text=r.join("<br/>"),o.push(n)}return o},str2XML:function(e){var t,n;return window.DOMParser?(n=new DOMParser,t=n.parseFromString(e,"text/xml")):(t=new ActiveXObject("Microsoft.XMLDOM"),t.async=!1,t.loadXML(e)),t},generateChild:function(e,t,n,a,r){return te(e,t,n,a,r)},generateEmptyImg:function(e,t,n){var a=te(e,"img",t,n);return a.src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",a},addClass:function(e,t,n){ee(e,t,n)},removeClass:function(e,t,n){n&&(t="anv-"+t),e.className=e.className.split(" ").filter(function(e){return e!==t}).join(" ")},capitalize:function(e){return Z(e)},sendPostRequest:function(e,t,n,a,r,i,o,s){var d=0===e.indexOf("file:")||0===window.location.href.indexOf("file:")&&-1===e.indexOf("http:");X();var c=new XMLHttpRequest;try{if(c.open("POST",e,!0),i&&(c.withCredentials=!0),s&&(c.responseType=s),r)for(var l in r)r.hasOwnProperty(l)&&c.setRequestHeader(l,r[l]);o?"arraybuffer"!=o&&c.setRequestHeader("Content-type",o):c.setRequestHeader("Content-type","application/x-www-form-urlencoded")}catch(e){a&&(a(e.message||e.description),console.error("POST request error",e))}c.onreadystatechange=function(){4===c.readyState&&(200===c.status||d&&0===c.status?n("arraybuffer"==s?c.response:c.responseText):a&&a(c.status))},o||"object"!=typeof t||(t=J(t));try{c.send(t)}catch(e){a&&(a(e.message||e.description),console.error("POST request error",e))}},openURIInNewWindow:function(e,t){var n=window.open(e,t||"_blank");return n.focus(),n},setFloat:function(e,t){e.style.cssFloat=t,e.style.styleFloat=t},encodeURLParams:J,decodeURLParams:W,updateURLParam:$,getBaseUrl:Q,sec2TimeString:function(e){var t="",n=parseInt(e/60,10);return e=parseInt(e%60,10),n>=60&&(t=parseInt(n/60,10),n=parseInt(n%60,10),t<10&&(t="0"+t),t+=":"),e<10&&(e="0"+e),n<10&&(n="0"+n),t+n+":"+e},timeString2Sec:function(e){var t,n,a,r;return t=e.split(":"),t.length>2?(n=parseInt(t[0]),a=parseInt(t[1]),r=parseInt(t[2])):(n=0,a=parseInt(t[0]),r=parseInt(t[1])),3600*n+60*a+r},timeString2Millisecond:function(e){var t,n,a,r,i,o=0;if("string"==typeof e)for(t=e.split(":"),n=t.length,a=n,i=t[a-1].length>2,r=i?1:1e3;a&&a--;)o+=parseInt(t[a])*r,r*=a==n-1&&i?1e3:60;return o},preventDefaultMouseDown:function(e){for(var t=0;t<e.length;t++)ne(e[t],"mousedown",function(e){e.preventDefault()},!1)},merge:q,cacheImages:function(e,t,n){for(var a=0,r=e.length,i=[];a<r;a++)i[a]=new Image,ne(i[a],"load",function(){t(this)},!1),n&&ne(i[a],"error",function(){n(this)},!1),e[a]?i[a].src=e[a]:t(i[a])},base64Encode:O,base64Decode:M,uTF8Encode:function(e){return j(e)},uTF8Decode:function(e){return Y(e)},addEventListener:function(e,t,n,a){ne(e,t,n,a)},removeEventListener:function(e,t,n){ae(e,t,n)},setReadOnly:function(e,t,n){t||(n?(ne(e,"keydown",function(e){e.preventDefault()},!1),ne(e,"cut",function(e){e.preventDefault()},!1)):e.readOnly=!0)},createUUID:function(){for(var e,t="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz".split(""),n=t,a=new Array(36),r=0,i=0;i<36;i++)8==i||13==i||18==i||23==i?a[i]="-":14==i?a[i]="4":(r<=2&&(r=33554432+16777216*Math.random()|0),e=15&r,r>>=4,a[i]=n[19==i?3&e|8:e]);return a.join("")},touchURL:function(e){(new Image).src=e},isSecureSocket:z,setCookie:oe.setItem,removeCookie:oe.removeItem,getCookie:oe.getItem,setCookies:function(e){for(var t in e)e.hasOwnProperty(t)&&void 0!==e[t]&&oe.setItem(t,e[t])},removeCookies:function(e){for(var t in e)oe.removeItem(t)},getCookies:function(e){var t={};for(var n in e){var a=oe.getItem(n);t[n]=a}return t},deepCopy:function(e){return JSON.parse(JSON.stringify(e))},md5:p,aesStdEncrypt:_,aesStdDecrypt:y,hex2Rgba:function(e){var t,n,a,r,i;if(!e)return"";switch(0==e.indexOf("#")&&(e=e.substring(1)),e.length){case 3:t=e.replace(/(.)(.)(.)/,"$1$1$2$2$3$3FF");break;case 4:t=e.replace(/(.)(.)(.)(.)/,"$1$1$2$2$3$3$4$4");break;case 6:t=e+"FF";break;case 8:t=e;break;default:return""}return n=S(t.substring(0,2),!1),a=S(t.substring(2,4),!1),r=S(t.substring(4,6),!1),i=S(t.substring(6,8),!0),"rgba("+[n,a,r,i].join(",")+")"},colorHex2Decimal:S,prettifyDate:D,getParameterByName:k,getJsonp:C,loadJS:C,array2Object:R,object2Array:b,generateWsseHeader:H,getUrlParts:K,replaceAll:G}}),n("Logger",["util"],function(e){function t(t,n,a,r){function i(n,a){var r;t&&(n in l?r=l[n]:(r=e.md5(n),r="#7"+r.substr(3,5),l[n]=r),(!g||g&&n in g)&&console.log("%c "+a,"color: "+r)),f&&f(a),u>=p&&(c.shift(),u--),c.push(a),u++}function o(e){var t,n,a,i,o,s,d;return t=e?r?new Date(e):e:new Date,r?(n=t.getHours(),a=t.getMinutes(),i=t.getSeconds(),o=t.getMilliseconds()):(s=t-m,n=Math.floor(s/1e3/60/60),s-=1e3*n*60*60,a=Math.floor(s/1e3/60),s-=1e3*a*60,i=Math.floor(s/1e3),s-=1e3*i,o=s),n<10&&(n="0"+n),a<10&&(a="0"+a),i<10&&(i="0"+i),o<10?o="00"+o:o<100&&(o="0"+o),d=[a,i,o],r&&d.unshift(n),"("+d.join(":")+")"}function s(){var e=Array.prototype.slice.call(arguments,1),t=n?o():"",a="["+arguments[0]+"] \t"+e.join(" ")+"\t "+t;i(arguments[0],a)}function d(){return c}var c=[],l={},u=0,p=a||50,f=null,m=(new Date).getTime(),g=!1;return{getLogFn:function(e){return function(){var t=[e].concat(Array.prototype.slice.call(arguments));s.apply(null,t)}},on:function(e){if("object"==typeof e&&e.length){g=[];for(var n=0,a=e.length;n<a;n++)g[e[n]]=1}t=!0},off:function(){t=!1},displayLogs:function(){for(var e=0;e<u;e++)console.log(c[e])},getTotalLogs:function(){return u},setExposeFn:function(e){f=e},getTime:function(e){return o(e).replace("(","").replace(")","")},getInitialOffset:function(){return m},getLogs:d}}return t}),n("tveapi",["util"],function(e){function t(t){function n(t){var n=(new Date).getTime()+se,a=n.toString()+"~"+e.md5(t)+"~",r=e.md5(n.toString()),i=Math.max(64-a.length,0);return r=r.slice(0,i),a+=r,a=e.aesStdEncrypt("ecb",a,"31c242849e73a0ce","base64")}function a(t,n,a,o){if(re("@getConfig",t),ae.getConfigError=o||ae.getConfigError,ae.getConfigSuccess=a||ae.getConfigSuccess,J=t||J,W=n||W,ee!=Z.length&&t){var s=Z[ee].replace(oe.anvack,J);re("selected url:",s);try{e.download(s,null,i,r)}catch(e){re("Error while downloading config:",e.message)}}else i(ne)}function r(e){re("Fail to retrieve config using "+Z[ee]),ee++,a(J,ae.getConfigSuccess,ae.getConfigError)}function i(t){re("@onGetConfigSuccess"),configURLs=e.deepCopy(te),re(t),re(te),(t="string"==typeof t?JSON.parse(t):t)&&t.api&&(ie[J]={},t.api.event_metadata_by_mcpeventid&&(ie[J].eventId=t.api.event_metadata_by_mcpeventid),t.api.event_metadata_by_upid&&(ie[J].upid=t.api.event_metadata_by_upid),t.api.video_metadata_by_mcpvideoid&&(ie[J].videoMetadata=t.api.video_metadata_by_mcpvideoid),t.api.tve&&(ie[J].tve=t.api.tve),t.api.time&&(ie[J].time=t.api.time),t.api.schedule&&(ie[J].schedule=t.api.schedule),t.api.video&&(ie[J].video=t.api.video),t.api.seckey&&(ie[J].decryptionKey=t.api.seckey),t.api.tpi&&(ie[J].tpi=t.api.tpi));for(var n in ie[J])ie[J].hasOwnProperty(n)&&ie[J][n]&&/^\/\//.test(ie[J][n])&&(ie[J][n]=ie[J][n].replace(/^\/\//i,e.isSecureSocket()?"https://":"http://"));Q||!J?ae.getConfigSuccess&&(ae.getConfigSuccess(t),delete ae.getConfigSuccess):($=ae.getConfigSuccess,X=arguments,S(J,W)),re("@onGetConfigSuccess",JSON.stringify(ie,null,3))}function o(){var e=Math.floor(10*Math.random())%configURLs.length,t=configURLs[e];return re("@getRandomConfigURL",t),t}function s(t,n,a,r){re("@getTpiToken",t);var i,o=ie[t].tpi,s=K(t);userInfo=e.deepCopy(n),re("@getTpiToken",JSON.stringify(s,null,3)),userInfo.api=s.api,ae.getTpiSuccess=a,ae.getTpiError=r,i=o.replace(oe.anvack,t),e.sendPostRequest(i,JSON.stringify(userInfo),d,c)}function d(e){ae.getTpiSuccess&&ae.getTpiSuccess(e)}function c(e){ae.getTpiError&&ae.getTpiError(e)}function l(t,n,a,r,i){var o,s,d;if(ae.getMetadataSuccess=r,ae.getMetadataError=i,a?(o=ie[t].upid,s=oe.upid,d=a):(o=ie[t].eventId,s=oe.eventId,d=n),re(o,s,d),!o)throw new Error("No templateURL to generate metadata lookup URL.");var c=o.replace(s,d);c=c.replace(oe.anvack,t),re(">> URL:",c),e.sendPostRequest(c,null,u,p)}function u(e){var t;re("metadata",e),e=JSON.parse(e),e.server_time&&(C(e.server_time),re("timeDelta:",se)),e.exception?(t=e.exception.user_msg,ae.getMetadataError&&ae.getMetadataError(t)):ae.getMetadataSuccess&&ae.getMetadataSuccess(e)}function p(e){re("ERROR @getMetadata",e),ae.getMetadataError&&ae.getMetadataError(e)}function f(t,n,a,r){var i,o;if(ae.getVideoMetadataSuccess=a,ae.getVideoMetadataError=r,i=ie[t].videoMetadata,o=oe.videoId,!i)throw new Error("No templateURL to generate metadata lookup URL.");var s=i.replace(o,n);s=s.replace(oe.anvack,t),re(">> URL:",s),e.download(s,null,m,g)}function m(e){var t;re("metadata",e),e=JSON.parse(e),e.server_time&&(C(e.server_time),re("timeDelta:",se)),e.exception?(t=e.exception.user_msg,ae.getVideoMetadataError&&ae.getVideoMetadataError(t)):ae.getVideoMetadataSuccess&&ae.getVideoMetadataSuccess(e)}function g(e){re("ERROR @getMetadata",e),ae.getVideoMetadataError&&ae.getVideoMetadataError(e)}function v(t){return e.md5(t)}function h(t,n,a,r){var i=[t,a,r,n].join("|");return re("series:",i),e.md5(i)}function E(){return e.md5(String((new Date).getTime()*Math.random())).slice(1,30)}function A(t,n,a,r,i,o){var s,d;if(!ie||!ie[t])return void I("No lookup URLs available");s=K(t,n,a,r),s=JSON.stringify(s),d=ie[t].schedule,d&&d.length?(d=d.replace(oe.videoId,a.video),d=d.replace(oe.anvack,t),re("scheduleURL:",d),ae.getScheduleSuccess=i,ae.getScheduleError=o,e.sendPostRequest(d,s,y,I)):I("No schedule service")}function T(e){var t,n,a={};for(var r in e)e.hasOwnProperty(r)&&(t=e[r].name,n=e[r].value,a[t]=n);return a}function _(t){var n;for(var a in t)if("object"==typeof t[a]&&"length"in t[a])for(var r=0,i=t[a].length;r<i;r++)n=t[a][r],n.custom_metadata_map=e.deepCopy(T(n.custom_metadata)),delete n.custom_metadata;else n=t[a],n.custom_metadata_map=e.deepCopy(T(n.custom_metadata)),delete n.custom_metadata;return t}function y(e){re("onScheduleSuccess",e),e?(e=JSON.parse(e),e=e.schedule,re("Schedule:",e),e=_(e),e.server_time&&(C(e.server_time),re("timeDelta:",se)),ae.getScheduleSuccess&&ae.getScheduleSuccess(e)):I("Schedule service returned an empty response")}function I(e){ae.getScheduleError&&ae.getScheduleError(e)}function S(t,n,a,r){var i=ie[t].time.replace(oe.anvack,t);h(t,n,null,null),e.sendPostRequest(i,null,k,R),ae.getTimeSuccess=a,ae.getTimeError=r}function D(){return se}function k(e){Q=!0,e=JSON.parse(e),se=1e3*e.server_time-(new Date).getTime(),re("server time:",e.server_time),re("time delta:",se),ae.getTimeSuccess&&ae.getTimeSuccess(1e3*e.server_time,se),$&&($.apply(null,Array.prototype.slice.call(X)),$=null)}function C(e){se=1e3*e-(new Date).getTime()}function R(e){ae.getTimeError&&ae.getTimeError(e),Q=!0,se=0,$&&($.apply(null,Array.prototype.slice.call(X)),$=null)}function b(t,n,a){ae.getLogosSuccess=n,ae.getLogosError=a,t.station.logo_url?e.download(t.station.logo_url,null,O,M):M("There is no logo url in schedule JSON")}function O(e){e=JSON.parse(e),ae.getLogosSuccess&&ae.getLogosSuccess(e)}function M(e){ae.getLogosError&&ae.getLogosError(e)}function N(t,a,r,i,o,s){var d,c,l,u,p=K(t,a,r,i),f={};if(p.api&&(p.api.anvstk||p.api.anvstk2)){if(p=JSON.stringify(p),l="adBreakDetail"in r&&r.adBreakDetail||!("adBreakDetail"in r)?"fp":"plan",r.video||r.xUrl){var m=ie[t].video;m=r.xUrl?m.replace(oe.videoId,"xurl"):m.replace(oe.videoId,r.video),m=m.replace(oe.anvack,t),d=n(m),u=m.indexOf("?")>-1?"&":"?",f.rtyp=l,f["X-Anvato-Adst-Auth"]=d,r.debug&&(f.anvsrt="375231e94afeb649223f2e67e05fba3d"),m+=u+e.encodeURLParams(f,!1)}ae.getVideoJSONSuccess=o,ae.getVideoJSONError=s,e.sendPostRequest(m,p,w.bind(null,r),U)}else c={cause:{dev_msg:"video or xUrl is not specified to make videoJSON request"},code:99,sdkErrorCode:"RCVR500",type:"exception",user_msg:"video or xUrl is not specified to make videoJSON request"},U(c)}function w(e,t){var n,a,r="_vpng=";if(r+=e.clientSideAdTracking||!1?0:1,t=t.replace(/anvatoVideoJSONLoaded *\( */,""),t=t.replace(/\} *\)/,"}"),t=JSON.parse(t),t.published_urls&&t.published_urls.length)for(var i=0,o=t.published_urls.length;i<o;i++)n={},"format"in t.published_urls[i]&&"embed_url"in t.published_urls[i]&&t.published_urls[i].format in{"m3u8-variant":1,dash:1}&&(n.primary=t.published_urls[i].embed_url,a=n.primary.indexOf("?")>-1?"&":"?",n.primary+=a+r,n.backup=t.published_urls[i].backup_url,n.backup&&(a=n.backup.indexOf("?")>-1?"&":"?",n.backup+=a+r),t.published_urls[i].embed_url=n.primary,t.published_urls[i].backup_url=n.backup);else t.exception=t.exception||{cause:{dev_msg:"Failed to retrieve the video publish URLs."},code:99,type:"exception",user_msg:"Failed to retrieve publish URLs."};t.exception?U(t.exception):ae.getVideoJSONSuccess&&ae.getVideoJSONSuccess(t)}function P(t,n,a,r){ae.getAdBreakInfoSuccess=a,ae.getAdBreakInfoError=r,e.download(t,null,L.bind(null,n,t),x)}function L(e,t,n){re("@onAdBreakInfo",t);try{n=JSON.parse(n)}catch(e){return void x(e||"Malformed ad break info;")}if(n&&"master_m3u8"in n){n.interstitials=n.interstitials||{cues:[]};for(var a=0,r=e.published_urls.length;a<r;a++)if((e.published_urls[a].format.indexOf("m3u8")>-1||e.published_urls[a].format.indexOf("dash")>-1)&&t==e.published_urls[a].embed_url){re("@onAdBreakInfo replacing",e.published_urls[a].embed_url,"with",n.master_m3u8),e.published_urls[a].embed_url=n.master_m3u8,e.published_urls[a].adBreakInfo=n;break}}ae.getAdBreakInfoSuccess&&ae.getAdBreakInfoSuccess(e)}function x(e){console.error(e||"Error while getting ad info"),ae.getAdBreakInfoError&&ae.getAdBreakInfoError(e)}function U(e){ae.getVideoJSONError&&ae.getVideoJSONError(e)}function B(t,n,a,r,i){var o=K(t,n,a);o=JSON.stringify(o);var s={schedule:!1},d=ie[t].tve+"&"+e.encodeURLParams(s);d=d.replace(oe.anvack,t),ae.tveCheckSuccess=r,ae.tveCheckError=i,e.sendPostRequest(d,o,V,F)}function V(e){var t={current:{},next:{}};e=JSON.parse(e),e.user&&(t.tveAuthorized=e.user["tve-authorized"],t.notAuthorizedCode=e.user.not_authorized_code,t.notAuthorizedReason=e.user.not_authorized_reason,e.user["home-station"]&&(t.hasHomeStationRights=e.user["home-station"].has_tve_rights),e.user["geo-station"]&&(t.hasGeoStationRights=e.user["geo-station"].has_tve_rights)),e.station&&(t.callsign=e.station.callsign,e.station.current_event&&e.station.current_event.title&&e.station.current_event.event_id&&(t.current.title=e.station.current_event.title,t.current.id=e.station.current_event.event_id),e.station.next_event&&e.station.next_event.title&&e.station.next_event.event_id&&(t.next.title=e.station.next_event.title,t.next.id=e.station.next_event.event_id)),e.server_time&&(C(e.server_time),re("timeDelta:",se)),re("@onTVECheckSuccess:",t),ae.tveCheckSuccess&&ae.tveCheckSuccess(t)}function F(e){re("@onTVECheckError:",e),ae.tveCheckError&&ae.tveCheckError(e)}function H(e,t,n){return re("@verify",e,t,n),h(e,t,n.anvrid,n.anvts)==n.anvstk}function K(e,t,n,a){var r=E(),i=(new Date).getTime()+se,o=z(n,a),s=Math.round(i/1e3);return o=o||{},o.api={anvrid:r,anvstk:h(e,t,r,s),anvts:s},(n.token||a.tkxToken)&&(delete o.api.anvstk,o.api.anvstk2=a.tkxToken||n.token),o}function G(e,t){t.video_asset_id=t.videoAssetId||e.caid,t.site_section_id=t.siteSectionId||e.csid,t.network_id=t.networkId||e.fwNetwork,t.profile_id=t.profileId||e.fwProf,t.server_url=t.serverUrl||t.serverURL||e.fwServerUrl,t.event_type=t.eventType||e.fwEventType,t.companion=t.companion||e.fwCompanion,t.mvpd=t.mvpd||e.mvpd,delete t.videoAssetId,delete t.siteSectionId,delete t.networkId,delete t.profileId,delete t.serverUrl,delete t.eventType}function z(t,n){var a,r={};return t&&t.plugins&&t.plugins.freewheel&&t.plugins.freewheel.serverSide&&(r=e.deepCopy(t.plugins.freewheel.serverSide)),t&&t.plugins&&t.plugins.dfp&&t.plugins.dfp.serverSide&&n.adKeyValues&&(t.plugins.dfp.serverSide=e.merge(t.plugins.dfp.serverSide,n.adKeyValues)),t=t||{},n=n||{},G(t,r),a=n.provider||t.accessControl&&t.accessControl.mvpd||t.user&&t.user.mvpd,{ads:{freewheel:r,dfp:t&&t.plugins&&t.plugins.dfp&&t.plugins.dfp.serverSide?t.plugins.dfp.serverSide:void 0},content:{mcp_video_id:t.video,mpx_guid:t.mpx?t.video:"",video_type:t.xUrl?t.live?"2":"1":void 0,xurl:t.xUrl,xurlAdTag:t.xUrlAdTag,video_format:t.xUrl?"hls":void 0,def_title:t.title,extarnal_id:t.xUrl?"123456":void 0},user:{glg:t.user?t.user.longitude:"",glt:t.user?t.user.latitude:"",gst:"",gzip:t.geozip||n.geoZip||(t.user?t.user.geoZip:""),hst:"",hzip:n.homeZip||(t.user?t.user.homeZip:""),ehzip:n.encryptedZip||(t.user?t.user.encryptedHomeZip:""),device:"cast",sdkver:"2.0.1",sdkenv:"cast",host:t.host,referrer:t.referrer,adobepass:t.accessControl&&"alternate"==t.accessControl.authenticator?{}:{mvpd:a,max_rating:n.maxRating,requestor:n.requestor,resource:n.resource,short_token:t.accessControl&&t.accessControl.token?t.accessControl.token:n.token?decodeURIComponent(n.token):void 0,environment:t.accessControl?t.accessControl.environment:void 0,server_url:t.accessControl?t.accessControl.serverUrl:void 0},mvpd_authorization:t.accessControl&&"alternate"==t.accessControl.authenticator?{mvpd:t.accessControl?t.accessControl.mvpd:void 0,token:t.accessControl?t.accessControl.token:void 0,max_rating:t.user?t.user.maxRating:void 0}:{},mvpd:n.provider||(t.accessControl?t.accessControl.mvpd:t.user?t.user.mvpd:void 0)}}}function q(t,n,a,r){var i,o;ae.getDecryptionKeySuccess=a,ae.getDecryptionKeyError=r,J=t||J,(i=ie[J].decryptionKey)&&(o=i.replace(oe.anvack,J),o=o.replace(oe.refKey,encodeURIComponent(n)),e.download(o,null,j,function(e){Y(n,e)}))}function j(e){ae.getDecryptionKeySuccess&&ae.getDecryptionKeySuccess(e)}function Y(e,t){ae.getDecryptionKeyError&&ae.getDecryptionKeyError(e,t)}var J,W,Q,$,X,Z=["https://access-prod.apis.anvato.net/anvacks/{{ANVACK}}?apikey=3hwbSuqqT690uxjNYBktSQpa5ZrpYYR0Iofx7NcJHyA"],ee=0,te=e.deepCopy(Z),ne=null,ae={},re=void 0!==t?t.getLogFn("TVEAPI"):function(){console.log.apply(console,["[!TVEAPI!]\t"].concat(Array.prototype.slice.call(arguments)))},ie={},oe={upid:"{{UPID}}",eventId:"{{MCP_EVENT_ID}}",anvack:"{{ANVACK}}",videoId:"{{VIDEO_ID}}",refKey:"{{KEYREF}}"},se=0;return re("TVE API initialized"),{getConfig:a,getRandomConfigURL:o,getMetadata:l,getVideoMetadata:f,md5:v,generateSecurityToken:h,generatePostObject:K,getSchedule:A,tveCheck:B,getVideoJSON:N,getAdBreakInfo:P,getTime:S,getTimeDelta:D,getLogos:b,getDecryptionKey:q,getTpiToken:s,verify:H}}return t}),function(e,t){"use strict";"undefined"!=typeof exports?exports.Mediator=t():"function"==typeof n&&n.amd?n("mediator",[],function(){return e.Mediator=t(),e.Mediator()}):e.Mediator=t()}(this,function(){"use strict";function e(){var e=function(){return(65536*(1+Math.random())|0).toString(16).substring(1)};return e()+e()+"-"+e()+"-"+e()+"-"+e()+"-"+e()+e()+e()}function t(n,a,r){if(!(this instanceof t))return new t(n,a,r);this.id=e(),this.fn=n,this.options=a,this.context=r,this.channel=null}function n(e,t){if(!(this instanceof n))return new n(e);this.namespace=e||"",this._subscribers=[],this._channels=[],this._parent=t,this.stopped=!1}function a(){if(!(this instanceof a))return new a;this._channels=new n("")}return t.prototype={update:function(e){e&&(this.fn=e.fn||this.fn,this.context=e.context||this.context,this.options=e.options||this.options,this.channel&&this.options&&void 0!==this.options.priority&&this.channel.setPriority(this.id,this.options.priority))}},n.prototype={addSubscriber:function(e,n,a){var r=new t(e,n,a);return n&&void 0!==n.priority?(n.priority=n.priority>>0,n.priority<0&&(n.priority=0),n.priority>=this._subscribers.length&&(n.priority=this._subscribers.length-1),this._subscribers.splice(n.priority,0,r)):this._subscribers.push(r),r.channel=this,r},stopPropagation:function(){this.stopped=!0},getSubscriber:function(e){var t=0,n=this._subscribers.length;for(n;t<n;t++)if(this._subscribers[t].id===e||this._subscribers[t].fn===e)return this._subscribers[t]},setPriority:function(e,t){var n,a,r,i,o=0,s=0;for(s=0,i=this._subscribers.length;s<i&&(this._subscribers[s].id!==e&&this._subscribers[s].fn!==e);s++)o++;n=this._subscribers[o],a=this._subscribers.slice(0,o),r=this._subscribers.slice(o+1),this._subscribers=a.concat(r),this._subscribers.splice(t,0,n)},addChannel:function(e){this._channels[e]=new n((this.namespace?this.namespace+":":"")+e,this)},hasChannel:function(e){return this._channels.hasOwnProperty(e)},returnChannel:function(e){return this._channels[e]},removeSubscriber:function(e){var t=this._subscribers.length-1;if(!e)return void(this._subscribers=[]);for(t;t>=0;t--)this._subscribers[t].fn!==e&&this._subscribers[t].id!==e||(this._subscribers[t].channel=null,this._subscribers.splice(t,1))},publish:function(e){var t,n,a,r=0,i=this._subscribers.length,o=!1;for(i;r<i;r++)this.stopped||(t=this._subscribers[r],void 0!==t.options&&"function"==typeof t.options.predicate?t.options.predicate.apply(t.context,e)&&(t.fn.apply(t.context,e),o=!0):(n=this._subscribers.length,t.fn.apply(t.context,e),a=this._subscribers.length,i=a,a===n-1&&r--,o=!0)),o&&t.options&&void 0!==t.options&&--t.options.calls<1&&(this.removeSubscriber(t.id),i--,r--);this._parent&&this._parent.publish(e),this.stopped=!1}},a.prototype={getChannel:function(e){var t=this._channels,n=e.split(":"),a=0,r=n.length;if(""===e)return t;if(n.length>0)for(r;a<r;a++)t.hasChannel(n[a])||t.addChannel(n[a]),t=t.returnChannel(n[a]);return t},subscribe:function(e,t,n,a){var r=this.getChannel(e);return n=n||{},a=a||{},r.addSubscriber(t,n,a)},once:function(e,t,n,a){return n=n||{},n.calls=1,this.subscribe(e,t,n,a)},getSubscriber:function(e,t){return this.getChannel(t||"").getSubscriber(e)},remove:function(e,t){this.getChannel(e).removeSubscriber(t)},publish:function(e){var t=Array.prototype.slice.call(arguments,1),n=this.getChannel(e);t.push(n),this.getChannel(e).publish(t)}},a.prototype.on=a.prototype.subscribe,a.prototype.bind=a.prototype.subscribe,a.prototype.emit=a.prototype.publish,a.prototype.trigger=a.prototype.publish,a.prototype.off=a.prototype.remove,a.Channel=n,a.Subscriber=t,a.version="0.9.5",a}),n("pluginHeartbeatBeta",["util"],function(e){function t(t,n,a,r){function i(t){var a={400:1,404:1};if(F("@initPlugin (deferred)",t),ie=new Visitor(n.marketingCloudId,ne),ie.trackingServer=n.customTrackingServer,F("namespace",ne),oe=new AppMeasurement,oe.visitor=ie,oe.visitorNamespace=ne,oe.trackingServer=n.customTrackingServer,oe.account=n.account,oe.pageName=n.parentTitle,oe.charSet="UTF-8",se=ADB.va.plugins.aa.AdobeAnalyticsPlugin,de=ADB.va.plugins.aa.AdobeAnalyticsPluginConfig,ue=ADB.va.plugins.aa.AdobeAnalyticsPluginDelegate,fe(o,ue),t){
if(t in a)return void r.dispatchError("HRTBT001");oe.account=t}ve=new l,ye=new s(ve),he=new Ae(ye),Ee=new Te,Ee.debugLogging=me,he.configure(Ee),ce=new se(oe,new o),le=new de,le.channel=n.useDerivedMetadata?r.getConfigValue(x.HEARTBEAT.MAIN,"channel"):n.channel||A("channel",{},null)||"web",le.debugLogging=me,ce.configure(le),Ie=new De(new d),Se=new ke(n.trackingServer,n.marketingCloudId||n.publisherId),Se.ovp=n.useDerivedMetadata?r.getConfigValue(x.HEARTBEAT.MAIN,"ovp"):n.ovp||A("ovp",{},null)||"",Se.ssl=e.isSecureSocket(),Se.sdk=n.useDerivedMetadata?r.getConfigValue(x.HEARTBEAT.MAIN,"sdk"):A("sdk",{},null)||(e.getDeviceInfo.firetv?"firetv":ee),Se.debugLogging=me,Ie.configure(Se),re=[he,ce,Ie],Re=new Oe(new c,re),be=new Me,be.debugLogging=me,Re.configure(be),M=r.getConfigValue(x.HEARTBEAT.CONFIG.CHAPTER,"enabled",!0),M=null==M?ae:M,ge=!0,k()}function o(){}function s(e){s.__super__.constructor.call(this),this._player=e}function d(){}function c(){}function l(){function e(){l=null}function t(e,t,n,a,r,i){p=null,f=null,l=new m,l.playerName=i||ee,l.id=String(e),l.name=t,l.length=n,l.playhead=isNaN(a)?0:a,l.streamType=r}function n(){return _(U.VIDEO),l}function a(e,t,n,a,r){n=parseInt(n),a=parseInt(a),p=null,f=null,u=new g,u.name=String(e),u.position=t,u.startTime=isNaN(n)?0:n,u.length=isNaN(a)?0:a,F("@setChapterInfo videoInfo",[u.name,u.position,u.startTime,u.length].join("|"))}function r(){return _(U.CHAPTER),u}function i(){u=null}function o(e,t,n,a,r){p=new v,p.id=String(e),p.name=String(t),p.length=parseInt(n),p.position=a,p.cpm=r}function s(){return _(U.AD),p}function d(e,t,n,a){f=new h,f.name=e,f.position=void 0!==t?t:1,f.playerName=a||ee,f.startTime=n}function c(){return _(U.AD_BREAK),f}var l=null,u=null,p=null,f=null,m=ADB.va.plugins.videoplayer.VideoInfo,g=ADB.va.plugins.videoplayer.ChapterInfo,v=ADB.va.plugins.videoplayer.AdInfo,h=ADB.va.plugins.videoplayer.AdBreakInfo;return{setVideoInfo:t,resetVideoInfo:e,setAdInfo:o,setAdBreakInfo:d,getVideoInfo:n,getChapterInfo:r,setChapterInfo:a,resetChapterInfo:i,getAdInfo:s,getAdBreakInfo:c}}function u(e,t,n){var a,r;for(r=e.exec(t);r&&r[1]in L;)a=t.replace(new RegExp(r[0]),L[r[1]]),t=n?encodeURIComponent(a):a,r=e.exec(t);return t}function p(e){L=e||{},F("setMacros",JSON.stringify(e,null,3))}function f(e){var t=/\{\{(\w+)\}\}/,n={};if("object"==typeof e){for(var a in e)e.hasOwnProperty(a)&&(n[a]=f(e[a]));return n}return t.test(e)?u(t,e):e}function m(t,a,i){var o={chapter:{},video:{}};if(n.useDerivedMetadata)(i=$.HEARTBEAT)?(r.getConfigValue(x.HEARTBEAT.CONFIG.VIDEO,"enabled",!0)&&(o.video=f(r.getDerivedMetadata(x.HEARTBEAT.METADATA.VIDEO,""))),M&&(o.chapter=f(r.getDerivedMetadata(x.HEARTBEAT.METADATA.CHAPTER,""))),r.getConfigValue(x.HEARTBEAT.CONFIG.AD,"enabled",!0)&&(o.ad=f(r.getDerivedMetadata(x.HEARTBEAT.METADATA.AD,""))),r.getConfigValue(x.HEARTBEAT.CONFIG.AD_BREAK,"enabled",!0)&&(o.adBreak=f(r.getDerivedMetadata(x.HEARTBEAT.METADATA.AD_BREAK,"")))):(i=$.APP_MEASUREMENT)&&F("derivedMetadata is not supported with aap measurement");else if(we in Be){var s,d,c,l,u=Be[we].metadata,p=[];for(var m in u)if(u.hasOwnProperty(m)&&("trackOn"in u[m]&&t in u[m].trackOn||!("trackOn"in u[m]))&&"vars"in u[m]&&u[m].vars.length){s=u[m].vars,d=u[m].types,i==$.APP_MEASUREMENT&&(oe.contextData["a.media.name"]=Be[we].trackChapters&&a.live?A("videoId",a,t):A("eventId",a,t),oe.contextData["a.media.friendlyName"]=Be[we].trackChapters&&a.live?A("videoId",a,t):A("contentTitle",a,t),oe.contextData["a.media.playerName"]=A("playerName",a),oe.contextData["a.media.channel"]=e.getDeviceInfo.firetv?"firetv":Be[we].keyValues&&Be[we].keyValues.channel?Be[we].keyValues.channel:"web",oe.contextData["a.contentType"]=A("streamType",a,t));for(var g=0,v=s.length;g<v;g++)if(i==$.APP_MEASUREMENT)-1==s[g].indexOf("eVar")&&-1==s[g].indexOf("prop")?(oe.contextData[s[g]]=u[m].adaptor?u[m].adaptor(a[m],a,t,s[g]):a[m],c="contextData.",d&&s[g]in d&&(F("@setCustomMetadata detected type for",s[g]),oe[d[s[g]]]=s[g],p.push(d[s[g]]))):(oe[s[g]]=u[m].adaptor?u[m].adaptor(a[m],a,t,s[g]):a[m],c=""),p.push(c+s[g]);else if(i==$.HEARTBEAT){if(l="",!u[m].trackWith||u[m].trackWith&&X.CHAPTER in u[m].trackWith){if(o.chapter[s[g]]=u[m].adaptor?u[m].adaptor(a[m],a,t,s[g]):a[m],t&&t in{USER_PLAY:1})break;l=f(r.getDerivedMetadata(x.HEARTBEAT.METADATA.CHAPTER,s[g],"")),F("derivedValue for:",s[g],l),l!=String(o.chapter[s[g]])?F("MISMATCH for",s[g],l,"vs",o.chapter[s[g]],"for",t):F("MATCH for",s[g],l)}if(!u[m].trackWith||u[m].trackWith&&X.VIDEO in u[m].trackWith){if(o.video[s[g]]=u[m].adaptor?u[m].adaptor(a[m],a,t,s[g]):a[m],t&&t in{USER_PLAY:1})break;l=f(r.getDerivedMetadata(x.HEARTBEAT.METADATA.VIDEO,s[g],"")),l!=String(o.chapter[s[g]])?F("MISMATCH for",s[g],l,"vs",o.chapter[s[g]],"for",t):F("MATCH:",l)}}}}return{linkTrackVars:p,heartbeatCustomMetadata:o}}function g(t,a,r,i){var o,s=[],d={},c={},l={},u={};i==$.APP_MEASUREMENT?n.useDerivedMetadata?F("derivedMetadata is not supported with aap measurement"):oe&&Be[we]&&Be[we].events&&t in Be[we].events&&(Be[we].events[t].length||r.linkTrackVars.length)&&(F("Custom event ",t,"found in profile"),o=Be[we].events[t].length,o&&(oe.events=Be[we].events[t].join(","),oe.linkTrackEvents=Be[we].events[t].join(","),s=s.concat(["events"]),F("@trackCustomEvent appMeasurement.events:",oe.events)),s=s.concat(["contextData.a.media.name","contextData.a.media.friendlyName","contextData.a.media.playerName","contextData.a.media.channel","contextData.a.contentType"]),oe.linkTrackVars=s.concat(r.linkTrackVars).join(","),F("@trackCustomEvent tracking appMeasurement.linkTrackVars",oe.linkTrackVars),F("@trackCustomEvent tracking appMeasurement.linkTrackEvents",oe.linkTrackEvents),oe.tl(!0,"o",a.contentTitle),oe.events="",oe.linkTrackEvents="None",oe.linkTrackVars="None"):i==$.HEARTBEAT&&(d=r.heartbeatCustomMetadata.video,c=r.heartbeatCustomMetadata.chapter,l=r.heartbeatCustomMetadata.ad,u=r.heartbeatCustomMetadata.adBreak,n.customMetadata&&("video"in n.customMetadata&&"object"==typeof n.customMetadata.video&&(d=e.merge(d,n.customMetadata.video)),"chapter"in n.customMetadata&&"object"==typeof n.customMetadata.chapter&&(c=e.merge(c,n.customMetadata.chapter)),"ad"in n.customMetadata&&"object"==typeof n.customMetadata.ad&&(l=e.merge(l,n.customMetadata.ad)),"adBreak"in n.customMetadata&&"object"==typeof n.customMetadata.adBreak&&(u=e.merge(u,n.customMetadata.adBreak))),(n.useDerivedMetadata&&M||!n.useDerivedMetadata&&Be[we].trackChapters)&&ce.setChapterMetadata(c),ce.setVideoMetadata(d))}function v(){var e=parseInt((new Date).getTime()/1e3);return n.playheadTrackingWithUTC&&e%86400||e}function h(e){var t={Sun:"Sunday",Mon:"Monday",Tue:"Tuesday",Wed:"Wednesday",Thr:"Thursday",Fri:"Friday",Sat:"Saturday"},a=v();L.TIME_HOUR=e.hours,L.TIME_MINUTE=e.minutes,L.DATE=e.date,L.DAY=e.day,L.DATE_DAY=t[e.dayOfWeek],L.MVPD=e.mvpd,L.MVPD_DISPLAY_NAME=e.mvpdDisplayName,L.PLAYER_NAME=e.playerName,L.PLAYER_VERSION=e.version,L.CURRENT_TIME=e.live?a:parseFloat(e.timeIndex),L.TALENT_NAME=e.live?e.talentName||"N/A":e.custom$rovi_credits||"N/A",L.CHAPTER_INDEX=e.chapterIndex?e.chapterIndex+1:1,L.CHAPTER_START_TIME=e.live?e.startTime:e.chapterStartTime,L.CHAPTER_LENGTH=e.live?e.endTime-e.startTime:e.chapterEndTime-e.chapterStartTime,L.AD_BREAK_INDEX=e.adBreakIndex,L.AD_INDEX=e.adIndex,L.AD_DURATION=e.adDuration,L.LAST_CONTENT_TIME_INDEX=e.lastContentTimeIndex,0==Math.floor(e.lastContentTimeIndex)?L.AD_POD_TYPE="Preroll":Math.ceil(e.lastContentTimeIndex)>=e.duration?L.AD_POD_TYPE="Postroll":L.AD_POD_TYPE="Midroll",L.AD_POD_INDEX=e.adBreakIndex+1,"string"==typeof e.daiRules&&e.daiRules.indexOf("no_local_dai")>-1&&e.daiRules.indexOf("no_network_dai")>-1?L.NIELSEN_AD_LOAD_TYPE=1:L.NIELSEN_AD_LOAD_TYPE=2,L.AD_LOAD_TYPE=L.NIELSEN_AD_LOAD_TYPE,L.AD_MODEL=L.NIELSEN_AD_LOAD_TYPE,L.NIELSEN_AD_MODEL=L.NIELSEN_AD_LOAD_TYPE,L.VIDEO_SCREEN_TYPE=e.fullscreen?"fullscreen":"normal",L.VIDEO_SCREEN=L.VIDEO_SCREEN_TYPE,L.VIDEO_PLAY_TYPE=e.autoManual,L.videoTitle=e.contentTitle,L.CHAPTER_TITLE=[e.live?e.episodeTitle:e.custom$cl_episode,e.chapterIndex?e.chapterIndex+1:1].join("|"),L.CHAPTER_TITLE2=e.chapterTitle,L.TITLE_OR_PROGRAM_NAME=e.live?e.initialTitle:e.program_name,L.ID1=M&&e.live?e.videoId:[e.custom$cl_scrid||"N/A",e.custom$cl_episode_type||e.custom$cl_ad_policy||"D4"].join("|"),L.ID2=M&&e.live?e.videoId:[e.custom$cl_show_name,e.custom$cl_episode].join("|"),L.DURATION2=e.live?-1:parseInt(e.duration),L.PLAYER_INSTANCE=n.pInstance,L.STREAM_TYPE=e.live?pe.ASSET_TYPE_LIVE:pe.ASSET_TYPE_VOD,L.START_TYPE=e.autoManual,L.CATEGORY=e.categories,L.STATUS=e.status,L.CALLSIGN=e.callsign,L.PLATFORM=e.platform,L.EPISODE_NUMBER=e.episodeNumber,L.EVENT_ID=e.eventId,L.AIR_DATE=e.ts_airdate,L.SEASON=e.season,L.DAY2=e["custom$[54]daypart"],L.ID=e.live?e.videoId:e.eventId,L.ID_TITLE=e.live?e.videoId:e.contentTitle;var r={0:"VOD Episode",1:"VOD Clip",2:pe.ASSET_TYPE_LIVE};L.STREAM_TYPE2="video_type"in e&&e.video_type in r?r[e.video_type]:L.STREAM_TYPE}function E(e,t,n){var a;a=m(e,t,n)||{},g(e,t,a,n)}function A(e,t,n){return F("@applyMainAdaptor",e),Be[we]&&Be[we].adaptors&&e in Be[we].adaptors?(F("@applyMainAdaptor returning",Be[we].adaptors[e](t[e],t,n)),Be[we].adaptors[e](t[e],t,n)):(F("@applyMainAdaptor returning",t[e]),t[e])}function T(e,t,n,a){for(var i=0;i<t.length;i++){var o,s=t[i],d=f(r.getDerivedMetadata(e,s,""));e==x.HEARTBEAT.CONFIG.VIDEO&&("duration"==s&&(d=N.live?-1:parseInt(N.duration)),"currentTime"==s&&(o=v(),d=N.live?o:parseFloat(N.timeIndex))),e==x.HEARTBEAT.CONFIG.AD_BREAK&&("lastContentTimeIndex"==s&&(d=N.lastContentTimeIndex),"id"==s&&(d=N.adBreakIndex+1)),e==x.HEARTBEAT.CONFIG.AD&&("adId"==s&&(d=N.adId||["ad",N.adBreakIndex,N.adIndex].join("_")),"name"==s&&(d=N.adId||["ad",N.adBreakIndex,N.adIndex].join("_")),"id"==s&&(d=N.adIndex+1),"duration"==s&&(d=N.adDuration)),F("derivedValue for:",s,d),d!=String(n[i])?F("MISMATCH for",s,d,"vs",n[i]):F("MATCH for",s,d)}}function _(e){var t,a,i,o;n.useDerivedMetadata&&E(null,N,$.HEARTBEAT),e==U.VIDEO?(o=v(),n.useDerivedMetadata?(a=f(r.getDerivedMetadata(x.HEARTBEAT.CONFIG.VIDEO,"")),t=[a.id,a.name,a.duration||N.live?-1:parseInt(N.duration),N.live?o:parseFloat(N.timeIndex),a.streamType,a.playerName]):(t=[Be[we].trackChapters&&N.live?A("videoId",N,event):A("eventId",N,event),Be[we].trackChapters&&N.live?A("videoId",N,event):A("contentTitle",N,event),N.live?-1:parseInt(N.duration),N.live?o:parseFloat(N.timeIndex),A("streamType",N,event),A("playerName",N,event)],i=["id","name","duration","currentTime","streamType","playerName"],T(x.HEARTBEAT.CONFIG.VIDEO,i,t,N)),ve.setVideoInfo.apply(null,t)):e==U.AD_BREAK?(void 0===N.adBreakIndex&&(N.adBreakIndex=-1),(n.useDerivedMetadata&&r.getConfigValue(x.HEARTBEAT.CONFIG.AD,"enabled",!0)||!n.useDerivedMetadata&&Be[we].trackAds)&&(n.useDerivedMetadata?(a=f(r.getDerivedMetadata(x.HEARTBEAT.CONFIG.AD_BREAK,"")),t=[a.name,a.id||N.adBreakIndex+1,a.lastContentTimeIndex||N.lastContentTimeIndex,a.playerName]):(t=[["ad_break",N.adBreakIndex].join("_"),N.adBreakIndex+1,N.lastContentTimeIndex],i=["name","id","lastContentTimeIndex"],T(x.HEARTBEAT.CONFIG.AD_BREAK,i,t,N)),ve.setAdBreakInfo.apply(null,t))):e==U.AD?(void 0===N.adIndex&&(N.adIndex=-1),void 0===N.duration&&(N.duration=0),n.useDerivedMetadata?(a=f(r.getDerivedMetadata(x.HEARTBEAT.CONFIG.AD,"")),t=[N.adId||["ad",N.adBreakIndex,N.adIndex].join("_"),N.adTitle||["ad",N.adBreakIndex,N.adIndex].join("_"),N.adDuration,N.adIndex+1,a.cpm||null]):(t=[N.adId||["ad",N.adBreakIndex,N.adIndex].join("_"),N.adTitle||["ad",N.adBreakIndex,N.adIndex].join("_"),N.adDuration,N.adIndex+1,null],i=["adId","name","duration","id","cpm"],T(x.HEARTBEAT.CONFIG.AD,i,t,N)),ve.setAdInfo.apply(null,t)):e==U.CHAPTER&&(n.useDerivedMetadata?(a=f(r.getDerivedMetadata(x.HEARTBEAT.CONFIG.CHAPTER,"")),t=[a.name,N.live?Y:N.chapterIndex?N.chapterIndex+1:1,N.live?N.startTime:N.chapterStartTime,N.live?N.endTime-N.startTime:N.chapterEndTime-N.chapterStartTime,a.streamType]):(t=[A("chapterTitle",N,event),N.live?Y:N.chapterIndex?N.chapterIndex+1:1,N.live?N.startTime:N.chapterStartTime,N.live?N.endTime-N.startTime:N.chapterEndTime-N.chapterStartTime,A("streamType",N,event)],i=["name","chapterIndex","chapterStartTime","chapterLength","streamType"],T(x.HEARTBEAT.CONFIG.CHAPTER,i,t,N)),ve.setChapterInfo.apply(null,t))}function y(e,t){var a,i,o,s,d,c;if(h(t),F("@track event:",e),N=t,"profile"in Be&&Be[we].dynamicChaptersTracking&&(Be[we].trackChapters=t.live?Be[we].dynamicChaptersTracking.live:Be[we].dynamicChaptersTracking.vod),he&&ve){switch(!n.useDerivedMetadata&&Be&&e in Be[we].events&&E(e,t,$.HEARTBEAT),d=t.live?"live":"vod",c=Be[we].chapterLimits[d],q&&(n.useDerivedMetadata&&M||!n.useDerivedMetadata&&Be[we].trackChapters)&&e in c.complete&&(o=ve.getChapterInfo(),"AD_STARTED"==e&&K||(o&&F("@track->chapterComplete",[o.name,o.position,o.startTime,o.length,e].join("|")),he.trackChapterComplete(),n.useDerivedMetadata&&e in Ue&&(Y=0,F("@track->complete"),he.trackComplete(),F("@track->unload"),he.trackVideoUnload(),F("@track->load"),he.trackVideoLoad(),a=ve.getVideoInfo(),F("@track->play",[a.id,a.name,a.playhead,a.length,e].join("|")),he.trackPlay()),q=!1)),e){case"METADATA_LOADED":a=ve.getVideoInfo(),H&&(F("@track->unload"),he.trackVideoUnload(),H=!1),F("@track->load",[a.id,a.name,a.playhead,a.length].join("|")),he.trackVideoLoad(),H=!0,z=!1,q=!1,K=!1,G=!1,j=!1,J=!1,Q=!1,W=!1,q=!1,Y=0;break;case"PLAYING_START":H||(he.trackVideoLoad(),H=!0);break;case"PROGRAM_CHANGED":n.useDerivedMetadata&&M||!n.useDerivedMetadata&&Be[we].trackChapters||(J?(F("@track->complete"),he.trackComplete(),F("@track->unload"),he.trackVideoUnload(),F("@track->load"),he.trackVideoLoad(),a=ve.getVideoInfo(),F("@track->play",[a.id,a.name,a.playhead,a.length,e].join("|")),he.trackPlay()):J=!0);break;case"VIDEO_STARTED":j||(j=!0,he.trackPlay(),a=ve.getVideoInfo(),F("@track->play",[a.id,a.name,a.playhead,a.length].join("|"))),z=!0,!q&&Q&&(Y++,o=ve.getChapterInfo(),o&&F("@track->chapterStart",[o.name,o.position,o.startTime,o.length,e].join("|")),he.trackChapterStart(),Q=!1,q=!0);break;case"USER_RESUME":F("@track->play (resume)"),he.trackPlay();case"USER_PLAY":break;case"USER_PAUSE":F("@track->pause"),he.trackPause();break;case"VIDEO_COMPLETED":W||(F("@track->complete"),he.trackComplete()),K=!0;break;case"AD_STARTED":(n.useDerivedMetadata&&r.getConfigValue(x.HEARTBEAT.CONFIG.AD,"enabled",!0)||!n.useDerivedMetadata&&Be[we].trackAds)&&(i=ve.getAdInfo(),s=ve.getAdBreakInfo(),s&&F("@track->adStart ad break info:",[s.playerName,s.name,s.position,s.startTime].join("|")),i&&F("@track->adStart",[i.id,i.length,i.position,i.name].join("|")),he.trackAdStart(),j||(j=!0,he.trackPlay(),a=ve.getVideoInfo(),F("@track->play",[a.id,a.name,a.playhead,a.length].join("|"))));break;case"AD_COMPLETED":(n.useDerivedMetadata&&r.getConfigValue(x.HEARTBEAT.CONFIG.AD,"enabled",!0)||!n.useDerivedMetadata&&Be[we].trackAds)&&(F("@track->adComplete"),he.trackAdComplete()),K&&(F("@track->complete"),he.trackComplete());break;case"USER_FORWARD_SEEK":case"USER_BACKWARD_SEEK":G||(F("@track->seekStart"),he.trackSeekStart(),G=!0,setTimeout(function(){F("@track->seekCompleted"),he.trackSeekComplete(),G=!1},500))}e in Be[we].events&&z&&Be[we].appMeasurementCustomTracking&&E(e,t,$.APP_MEASUREMENT),(n.useDerivedMetadata&&M||!n.useDerivedMetadata&&Be[we].trackChapters)&&e in c.start&&Be[we].trackChapters&&(z?q||(Y++,o=ve.getChapterInfo(),F("@track->chapterStart",[o.name,o.position,o.startTime,o.length].join("|"),e),he.trackChapterStart(),q=!0):(F("deferring track->chapterStart",e),Q=!0))}}function I(e,t){var a=!1;if("number"==typeof n.metadataLookupTimeout?n.metadataLookupTimeout&&(a=n.metadataLookupTimeout):a=45e3,"METADATA_LOADED"==e||w){if(t.live){if("PROGRAM_CHANGED"==e){for(var r=0,i=B.length;r<i;r++)B[r][1]=t;return!1}return!P.waitForProgramChange&&a&&(P.waitForProgramChange=setTimeout(S,a)),!0}return!1}return!1}function S(){w=!1,delete P.waitForProgramChange,k()}function D(){w=I.apply(null,Array.prototype.slice.call(arguments)),(Be[we]||n.useDerivedMetadata)&&(ge&&he&&ve&&!w?(B.length&&k(),y.apply(null,Array.prototype.slice.call(arguments))):B.push(arguments))}function k(e){F("releasing the queue",n?n.length:0);for(var t,n=e||B;n.length;)t=n.shift(),y.apply(null,Array.prototype.slice.call(t))}function C(e){W=e,F("@setPostrollExpected",e)}function R(){F("@replayEvents"),k(V)}function b(){F("@reset"),O(),i()}function O(){F("@destroy"),he.trackVideoUnload(),re=null,ie=null,oe=null,se=null,ce=null,Se=null,ue=null,ge=!1}var M,N,w=!1,P={},L={},x={HEARTBEAT:{MAIN:"plugins:heartbeat:",CONFIG:{VIDEO:"plugins:heartbeat:mapping:video:",CHAPTER:"plugins:heartbeat:mapping:chapter:",AD:"plugins:heartbeat:mapping:ad:",AD_BREAK:"plugins:heartbeat:mapping:adBreak:"},METADATA:{VIDEO:"plugins:heartbeat:mapping:video:context:",CHAPTER:"plugins:heartbeat:mapping:chapter:context:",AD:"plugins:heartbeat:mapping:ad:context:",AD_BREAK:"plugins:heartbeat:mapping:adBreak:context:"}}},U={VIDEO:"video",AD:"ad",AD_BREAK:"ad_break",CHAPTER:"chapter"},B=[],V=[],F=a?a.getLogFn("Heartbeat"):function(){console.log.apply(console,["[!Heartbeat!]\t"].concat(Array.prototype.slice.call(arguments)))},H=!1,K=!1,G=!1,z=!1,q=!1,j=!1,Y=0,J=!1,W=!1,Q=!1,$={APP_MEASUREMENT:"appMeasurement",HEARTBEAT:"heartbeat"},X={VIDEO:"video",CHAPTER:"chapter"},Z={nbc:1,sni:1};F("init config:",JSON.stringify(n,null,3));var ee="ACRF";F("config.parentPageURL",n.parentPageURL);var te=n.parentPageURL?e.getUrlParts(n.parentPageURL):{},ne=(te.host?te.host:"AnvatoUniversalPlayer")+(n.pInstance?"-"+n.pInstance:""),ae=!("chapterTracking"in n)||n.chapterTracking;F("trackChapters:",ae),n.trackingServer=n.trackingServer||"heartbeats.omtrdc.net",n.customTrackingServer=n.customTrackingServer||n.trackingServer;var re,ie,oe,se,de,ce,le,ue,pe=ADB.va.plugins.videoplayer.AssetType,fe=ADB.core.extend,me=n.debugMode||n.debug&&(1==n.debug||"object"==typeof n.debug&&"length"in n.debug&&function(){for(var e=0,t=n.debug.length;e<t;e++)if("Heartbeat"==n.debug[e])return!0;return!1}()),ge=!1;o.prototype.onError=function(e){console.log("AdobeAnalyticsPlugin error: "+e.getMessage()+" | "+e.getDetails())};var ve,he,Ee,Ae=ADB.va.plugins.videoplayer.VideoPlayerPlugin,Te=ADB.va.plugins.videoplayer.VideoPlayerPluginConfig,_e=ADB.va.plugins.videoplayer.VideoPlayerPluginDelegate;fe(s,_e),s.prototype.getVideoInfo=function(){return this._player.getVideoInfo()},s.prototype.getAdBreakInfo=function(){return this._player.getAdBreakInfo()},s.prototype.getAdInfo=function(){return this._player.getAdInfo()},s.prototype.getChapterInfo=function(){return this._player.getChapterInfo()},s.prototype.getQoSInfo=function(){return null},s.prototype.onError=function(e){F("VideoAnalytics error. Message: "+e.message+". Details: "+e.details+".")},s.prototype.onVideoUnloaded=function(){F("video unloaded")};var ye,Ie,Se,De=ADB.va.plugins.ah.AdobeHeartbeatPlugin,ke=ADB.va.plugins.ah.AdobeHeartbeatPluginConfig,Ce=ADB.va.plugins.ah.AdobeHeartbeatPluginDelegate;fe(d,Ce),d.prototype.onError=function(e){console.log("AdobeHeartbeatPlugin error: "+e.getMessage()+" | "+e.getDetails())};var Re,be,Oe=ADB.va.Heartbeat,Me=ADB.va.HeartbeatConfig,Ne=ADB.va.HeartbeatDelegate;fe(c,Ne),c.prototype.onError=function(e){console.log("Heartbeat error: "+e.getMessage()+" | "+e.getDetails())};var we=n.profile;we=we?we.toLowerCase():"default",F("profile:",we),we in Z&&void 0===n.useDerivedMetadata&&(n.useDerivedMetadata=!0,F("set useDerivedMetadata for whitelisted profile"));var Pe={duration:null,timeIndex:null,contentId:null,contentTitle:null,contentDefinition:null,type:{video:!0}},Le=[],xe=[],Ue={PROGRAM_CHANGED:1},Be={default:{metadata:{},events:{},trackChapters:ae,trackAds:!0,appMeasurementCustomTracking:!1,chapterLimits:{live:{start:{PROGRAM_CHANGED:1,AD_BREAK_COMPLETED:1},complete:{PROGRAM_CHANGED:1,AD_BREAK_STARTED:1}},vod:{start:{VIDEO_STARTED:1},complete:{AD_BREAK_STARTED:1,VIDEO_COMPLETED:1}}},keyValues:{},adaptors:{streamType:function(e,t,n){return t.live?pe.ASSET_TYPE_LIVE:pe.ASSET_TYPE_VOD}}},nbc:{metadata:{program_name:{adaptor:function(e,t,n,a){return t.live?t.initialTitle:e},vars:["videoprogram"]},derivedMetadata$videodaypart:{adaptor:function(e,t,n,a){return e||"N/A"},vars:["videodaypart"]},derivedMetadata$videotitle:{vars:["videotitle"]},minutes:{adaptor:function(e,t,n,a){return[t.hours,e].join(":")},vars:["videominute"]},hours:{vars:["videohour"]},dayOfWeek:{adaptor:function(e,t,n,a){return{Sun:"Sunday",Mon:"Monday",Tue:"Tuesday",Wed:"Wednesday",Thr:"Thursday",Fri:"Friday",Sat:"Saturday"}[e]},vars:["videoday"]},date:{vars:["videodate"]},platform:{vars:["videoplayertech","videoplatform"]},mcp_id:{adaptor:function(e,t,n,a){return"NBC"},vars:["videonetwork","videoapp"]},mvpd:{vars:["videomvpd"]},autoManual:{vars:["videoinitiate"]},screen:{adaptor:function(){return"Full"},vars:["videoscreen"]},status:{vars:["videostatus"]},callsign:{adaptor:function(e,t,n,a){return e||"N/A"},vars:["videocallsign"]},episodeNumber:{vars:["videoepnumber"]},eventId:{vars:["videoguid"]},ts_airdate:{adaptor:function(t,n,a,r){var i=e.prettifyDate(1e3*t);return[i.month,i.day,i.year].join("/")},vars:["videoairdate"]},season:{vars:["videoseason"]},stationId:{vars:[]},videoDuration:{vars:[]},playerType:{vars:[]},playerName:{vars:[]},adTitle:{vars:[]},adDuration:{vars:[]},clipLong:{},videoSegments:{},primaryCategory:{},tsPublished:{},segment:{},adId:{},pageURL:{},pod:{},podPosition:{},CPM:{},adSegment:{}},events:{VIDEO_STARTED:[],PROGRAM_CHANGED:[],VIDEO_FIRST_QUARTILE:[],VIDEO_MID_POINT:[],VIDEO_THIRD_QUARTILE:[],VIDEO_COMPLETED:[],USER_PLAY:[],USER_RESUME:[],USER_PAUSE:[],USER_GOLIVE:[],AD_STARTED:[],AD_FIRST_QUARTILE:[],AD_MID_POINT:[],AD_THIRD_QUARTILE:[],AD_COMPLETED:[],AD_CLICKED:[],USER_SHARE:[],USER_FORWARD_SEEK:[],USER_BACKWARD_SEEK:[],USER_FULLSCREEN:[],USER_CANCEL_FULLSCREEN:[]},trackAds:!0,trackChapters:!0,dynamicChaptersTracking:{live:!1,vod:!0},appMeasurementCustomTracking:!1,chapterLimits:{live:{start:{PROGRAM_CHANGED:1,AD_BREAK_COMPLETED:1},complete:{PROGRAM_CHANGED:1,AD_BREAK_STARTED:1}},vod:{start:{VIDEO_STARTED:1},complete:{AD_BREAK_STARTED:1,VIDEO_COMPLETED:1}}},adaptors:{streamType:function(e,t,n){var a={0:"VOD Episode",1:"VOD Clip",2:pe.ASSET_TYPE_LIVE};return t&&"video_type"in t&&t.video_type in a?a[t.video_type]:t.live?pe.ASSET_TYPE_LIVE:pe.ASSET_TYPE_VOD}}},sni:{metadata:{live:{adaptor:function(e,t,n){return e?"C3":t.custom$cl_episode_type||t.custom$cl_ad_policy||"D4"},vars:["videoWindowing"]},custom$cl_scrid:{adaptor:function(e,t,n,a){return e||"N/A"},vars:["videoSCRID"]},custom$cl_non_linear_id:{adaptor:function(e,t,n,a){return e||"N/A"},vars:["videoNLVID"]},custom$cl_sni_guid:{adaptor:function(e,t,n,a){return e||"N/A"},vars:["videoGUID"]},autoManual:{adaptor:function(e,t,n,a){return"auto"==e?"autoplay":"manual"},vars:["videoPlayType"]},publisher:{adaptor:function(e,t,n,a){return t.derivedMetadata$videoPublisherID||"N/A"},vars:["videoPublisherID"]},mvpd:{adaptor:function(e,t,n,a){return t.mvpd||"N/A"},vars:["videoMVPD"]},playerType:{adaptor:function(e,t,n,a){return"videoPlayerName"==a||"videoPlayerType"==a?"chromecast":"videoChannelName"==a?"tve":void 0},vars:["videoChannelName","videoPlayerName","videoPlayerType"]},initialTitle:{adaptor:function(e,t,n,a){return t.live?t.derivedMetadata$videoShowTitle:t.custom$cl_show_name},vars:["videoShowTitle"]},derivedMetadata$videoTitle:{adaptor:function(e,t,n,a){return e||t.contentTitle},vars:["videoTitle"]},duration:{adaptor:function(e,t,n,a){return t.live?-1:t.duration},vars:["videoRuntime"]},fullscreen:{adaptor:function(e,t,n,a){return"tv"},vars:["videoScreenType"]},talentName:{adaptor:function(e,t,n,a){return t.live?e||"N/A":Pe.custom$rovi_credits||"N/A"},vars:["talentName"]}},events:{VIDEO_STARTED:[],PROGRAM_CHANGED:[],METADATA_LOADED:[],VIDEO_FIRST_QUARTILE:[],VIDEO_MID_POINT:[],VIDEO_THIRD_QUARTILE:[],VIDEO_COMPLETED:[],USER_PLAY:[],USER_RESUME:[],USER_PAUSE:[],USER_GOLIVE:[],AD_STARTED:[],AD_FIRST_QUARTILE:[],AD_MID_POINT:[],AD_THIRD_QUARTILE:[],AD_COMPLETED:[],AD_CLICKED:[],USER_SHARE:[],USER_FORWARD_SEEK:[],USER_BACKWARD_SEEK:[],USER_FULLSCREEN:[],USER_CANCEL_FULLSCREEN:[]},trackChapters:ae,trackAds:!0,appMeasurementCustomTracking:!1,chapterLimits:{live:{start:{PROGRAM_CHANGED:1,AD_BREAK_COMPLETED:1},complete:{PROGRAM_CHANGED:1,AD_BREAK_STARTED:1}},vod:{start:{VIDEO_STARTED:1},complete:{AD_BREAK_STARTED:1,VIDEO_COMPLETED:1}}},keyValues:{},adaptors:{eventId:function(e,t,n){return t.live?[t.roviId,"C3"].join("|"):[t.custom$cl_scrid||"N/A",t.custom$cl_episode_type||t.custom$cl_ad_policy||"D4"].join("|")},contentTitle:function(e,t,n){return t.live?[t.derivedMetadata$videoTitle,t.derivedMetadata$videoShowTitle].join("|"):[t.custom$cl_show_name,t.custom$cl_episode].join("|")},streamType:function(e,t,n){return t.live?pe.ASSET_TYPE_LIVE:pe.ASSET_TYPE_VOD},chapterTitle:function(e,t,n){var a=t.chapterIndex?t.chapterIndex+1:1;return t.live?[t.episodeTitle,a].join("|"):[t.custom$cl_episode,a].join("|")},playerName:function(e,t,a){return n.playerName||"chromecast"},channel:function(e,t,n){return"tve"},ovp:function(e,t,a){return n.ovp||n.brand?n.brand+":tve-"+n.brand:"N/A"},sdk:function(e,t,a){return n.sdk||"ACRF v1.5"},adBreakName:function(e,t,n){return 0==t.adBreakIndex?"preroll":"midroll"}}},cbs:{metadata:{contentTitle:{adaptor:function(e,t,n,a){return t.live?e||"NA":t.program_name||"NA"},vars:["videoShowName"]},stationId:{},videoDuration:{},playerType:{},playerName:{},mvpd:{},adTitle:{},season:{adaptor:function(e,t,n,a){return e||"NA"},vars:["videoSeason"]},group:{},autoManual:{vars:["startType"]},clipLong:{},videoSegments:{},primaryCategory:{},categories:{vars:["videoCategory"],types:{videoCategory:"list3"}},tsPublished:{},segment:{},adId:{},pageURL:{},pod:{},podPosition:{},CPM:{},adSegment:{}},events:{VIDEO_STARTED:[],METADATA_LOADED:[]},trackChapters:ae,trackAds:!1,appMeasurementCustomTracking:!0,chapterLimits:{live:{start:{PROGRAM_CHANGED:1},complete:{PROGRAM_CHANGED:1}},vod:{start:{VIDEO_STARTED:1},complete:{AD_BREAK_STARTED:1,VIDEO_COMPLETED:1}}},adaptors:{playerName:function(e,t,a){return e+(n.pInstance?"-"+n.pInstance:"")},streamType:function(e,t,n){return t.live?pe.ASSET_TYPE_LIVE:pe.ASSET_TYPE_VOD},channel:function(e,t,n){return te.host}}},cox:{metadata:{contentTitle:{},stationId:{},videoDuration:{},playerType:{},playerName:{},mvpd:{},adTitle:{},season:{},group:{},autoManual:{},clipLong:{},videoSegments:{},primaryCategory:{},categories:{},tsPublished:{},segment:{},adId:{},pageURL:{},pod:{},podPosition:{},CPM:{},adSegment:{}},events:{VIDEO_STARTED:[],PROGRAM_CHANGED:[],METADATA_LOADED:[],VIDEO_FIRST_QUARTILE:[],VIDEO_MID_POINT:[],VIDEO_THIRD_QUARTILE:[],VIDEO_COMPLETED:[],USER_PLAY:[],USER_RESUME:[],USER_PAUSE:[],USER_GOLIVE:[],AD_STARTED:[],AD_FIRST_QUARTILE:[],AD_MID_POINT:[],AD_THIRD_QUARTILE:[],AD_COMPLETED:[],AD_CLICKED:[],USER_SHARE:[],USER_FORWARD_SEEK:[],USER_BACKWARD_SEEK:[],USER_FULLSCREEN:[],USER_CANCEL_FULLSCREEN:[]},trackChapters:ae,trackAds:!0,appMeasurementCustomTracking:!1,chapterLimits:{live:{start:{PROGRAM_CHANGED:1,AD_BREAK_COMPLETED:1},complete:{PROGRAM_CHANGED:1,AD_BREAK_STARTED:1}},vod:{start:{VIDEO_STARTED:1},complete:{AD_BREAK_STARTED:1,VIDEO_COMPLETED:1}}},keyValues:{},adaptors:{playerName:function(e,t,a){return e+(n.pInstance?"-"+n.pInstance:"")},streamType:function(e,t,n){var a={0:"VOD Episode",1:"VOD Clip",2:pe.ASSET_TYPE_LIVE};return t&&"video_type"in t&&t.video_type in a?a[t.video_type]:t.live?pe.ASSET_TYPE_LIVE:pe.ASSET_TYPE_VOD}}}};if(Be.cbslocal=Be.cbs,we&&!Be[we]&&(we="default"),F("config.account:",n.account),"object"!=typeof n.account?i():r.postWithWsse(n.account,i,i),we in Be){for(var Ve in Be[we].events)Be[we].events.hasOwnProperty(Ve)&&(Le=Le.concat(Be[we].events[Ve]));for(var Fe in Be[we].vars)Be[we].vars.hasOwnProperty(Fe)&&(xe=xe.concat(Be[we].vars[Fe]));Le=["events"].concat(Le).join(","),xe=xe.join(","),F("trackEvents:",Le),F("trackVars:",xe)}return{replayEvents:R,destroy:O,resetHeartbeat:b,sendBeacon:D,initPlugin:i,setMacros:p,setPostrollExpected:C}}return t}),n("PluginLoader",["util","pluginHeartbeatBeta"],function(e,t,n){function a(n,a,r,i,o,s,d){function c(e){M("@loadPlugin",e);var t=document.getElementsByTagName("head")[0],n=document.createElement("script");t.appendChild(n),N[e].appended=!0,n.onload=function(){M("just loaded the script with source:",this.src,e),N[e].ready=!0},n.src=N[e].src}function l(e){M("@polling trial #",++w);var t=!1;for(var r in a)M("@poll checking",r),a.hasOwnProperty(r)&&a[r]&&r in N&&u(r)&&(M(">>>@poll checking",r),N[r].src&&!N[r].appended&&(c(r),t=!0),N[r].appended&&!N[r].ready&&(p(r),t=!0),!N[r].ready||N[r].init||N[r].initFailed||(f(r,e),t=!0),t||(M("poll triggered emptyBeaconQueue for",r),R(r)));t?setTimeout(l.bind(null,e),10*w*w):(M("loadedPluginSDKs"),n.publish("loadedPluginSDKs"))}function u(e){return!(e in{dfp:1,freewheel:1})||a[e]&&(!a[e].clientSide&&!a[e].serverSide||a[e].clientSide)}function p(e){M("@checkPlugin",e);var t=!1;switch(e){case"freewheel":t="undefined"!=typeof tv&&void 0!==tv.freewheel;break;case"dfp":t="undefined"!=typeof google&&void 0!==google.ima;break;case"omniture":t="undefined"!=typeof AppMeasurement;break;case"heartbeat":t="undefined"!=typeof ADB;break;case"comscore":t="undefined"!=typeof ns_}N[e].ready=t,M("@checkPlugin",e,"ready?:",t)}function f(e,d){switch(M("@initPlugin",e,JSON.stringify(a,null,3)),M("@initPlugin",e," with contentInfo for",d.id||d.upload_id),e){case"freewheel":if(a.freewheel&&a.freewheel.clientSide&&("networkId"in a.freewheel.clientSide||a.freewheel.clientSide.html5&&"networkId"in a.freewheel.clientSide.html5)){M("freewheel requested");var c=a.freewheel.clientSide.html5||a.freewheel.clientSide,l=document.getElementsByClassName("anv-ad-timer")[0];c.displayBaseId=r.videoContainerNode.id,c.videoNodeId=r.videoNode.id,c.clickTrackerId=r.clickTracker.id,c.timerNode=l}break;case"dfp":if("adTagUrl"in a.dfp||a.dfp.clientSide&&"adTagUrl"in a.dfp.clientSide){M("dfp requested");var u=document.createElement("div");a.dfp.clientSide&&"adTagUrl"in a.dfp.clientSide?a.dfp.clientSide.adTagUrl:a.dfp.adTagUrl;u.id="timer",r.adNode.appendChild(u)}break;case"omniture":a.omniture.parentPageURL=o.parentPageURL,a.omniture.profile=o.profile,a.omniture.pInstance=o.pInstance,a.omniture.profile=o.profile||o.mcp;break;case"heartbeat":M("userParams:",JSON.stringify(o)),a.heartbeat.parentPageURL=o.parentPageURL,a.heartbeat.parentTitle=o.parentTitle,a.heartbeat.pInstance=o.pInstance,a.heartbeat.profile=o.mcp||o.profile,a.heartbeat.debug=o.debug;try{N.heartbeat.instance=new t(n,a.heartbeat,i,s)}catch(t){M("error",t),N[e].initFailed=!0,s.dispatchError(null,"PLGNL001",t.message||t)}break;case"comscore":;break;case"analytics":({duration:100,timeIndex:0,contentTitle:"Sample video",contentDefinition:"desc",videoURL:"http://anvato-ads.s3.amazonaws.com/ua/13/09/30/130930_382/2552732_B52BE5CB3666494F8535E9A2F82DDB1C_130930_2552732_Days_of_our_Lives_1200.m3u8",videoId:"2552845",appURL:"http://selcuk-vpd.anv.bz/v31/anvload.html?mcpId=QA&playerId=default&playlistId=53",type:{video:!0}})}N[e].init=!0}function m(e,t){C.apply(null,["sendBeacon"].concat(Array.prototype.slice.call(arguments)))}function g(){C.apply(null,["resume"].concat(Array.prototype.slice.call(arguments)))}function v(){C.apply(null,["pause"].concat(Array.prototype.slice.call(arguments)))}function h(){C.apply(null,["requestAds"].concat(Array.prototype.slice.call(arguments)))}function E(){return C.apply(null,["isCustomPlaybackUsed"].concat(Array.prototype.slice.call(arguments)))}function A(){C.apply(null,["initContainer"].concat(Array.prototype.slice.call(arguments)))}function T(e){C.apply(null,["notifyVideoBegin"].concat(Array.prototype.slice.call(arguments)))}function _(){C.apply(null,["notifyVideoEnd"].concat(Array.prototype.slice.call(arguments)))}function y(){return C.apply(null,["hasAllAdsCompleted"].concat(Array.prototype.slice.call(arguments)))}function I(){C.apply(null,["setMacros"].concat(Array.prototype.slice.call(arguments)))}function S(){
C.apply(null,["resize"].concat(Array.prototype.slice.call(arguments)))}function D(){C.apply(null,["replayEvents"].concat(Array.prototype.slice.call(arguments)))}function k(){C.apply(null,["resetHeartbeat"].concat(Array.prototype.slice.call(arguments)))}function C(){var t=Array.prototype.slice.call(arguments,1),n={};for(var r in N)M("@distributeCall",r,a[r],JSON.stringify(N[r],null,3)),N.hasOwnProperty(r)&&a[r]&&!N[r].initFailed&&(N[r].instance&&N[r].init?(O[r]&&O[r].length&&R(r),arguments[0]in N[r].instance&&(M("Invoking ",arguments[0],"on plugin:",r),n[r]=N[r].instance[arguments[0]].apply(null,t))):(M("plugin",r,"not ready adding beacon to the queue for",arguments[0]),O[r]=O[r]||[],O[r].push(e.deepCopy(Array.prototype.slice.call(arguments)))));return n}function R(e){var t,n;if(M("@emptyBeaconQueue for ",e,"total items",O[e].length),!N[e].initFailed)for(;O[e].length;)t=O[e].shift(),n=Array.prototype.slice.call(t,1),M("@emptyBeaconQueue queue item",e),t[0]in N[e].instance&&N[e].instance[t[0]].apply(null,n)}function b(t,n,r,i){var o=!0;M("@updatePlugin",JSON.stringify(n,null,3),r),t in N&&(a[t]=e.merge(a[t]||{},n),N[t].ready=!1,N[t].init=!1,N[t].instance&&"destroy"in N[t].instance&&(M("@updatePlugin destroying",t,"for re-init"),N[t].instance.destroy()),N[t].instance=null,t in{dfp:1,freewheel:1}&&!n.clientSide&&(o=!1),o?i&&l(r):("dfp"in a&&console.warn("Disabled client-side ad due to the disable flag set from backend"),delete a[t]))}var O={},M=i?i.getLogFn("PluginLoader"):function(){console.log.apply(console,["[!PluginLoader!]\t"].concat(Array.prototype.slice.call(arguments)))},N={heartbeat:{src:"lib/VideoHeartbeat.min.js",appended:!1,ready:!1,init:!1,instance:null}};a.realTimeAnalytics||(a.realTimeAnalytics={});var w=0;return M("Initialized"),{requestAds:h,isCustomPlaybackUsed:E,initContainer:A,resume:g,pause:v,poll:l,sendBeacon:m,notifyVideoBegin:T,notifyVideoEnd:_,hasAllAdsCompleted:y,isActive:function(e){return e in N&&N[e].init},isAvailable:function(e){return e in N&&N[e].init},isReady:function(e){return e in N&&N[e].ready},isRequested:function(e){return e in N&&e in a&&u(e)},setMacros:I,resize:S,updatePlugin:b,replayEvents:D,resetHeartbeat:k}}return a}),n("StitchedAdTracker",["util"],function(e){function t(t,n,a,r){function i(e,t){return"start"==e.offset&&(e.offset=0),"start"==t.offset&&(t.offset=0),parseFloat(e.offset)-parseFloat(t.offset)}function o(e,t){var n,a,r,o,s;if(e.sort(i),h.linear=[],h.nonlinear=[],T=[],t&&t.tracking)for(var d=0,c=t.tracking.length;d<c;d++)E[t.tracking[d].type]=t.tracking[d].url;for(var l=0,u=e.length;l<u;l++){if(n=e[l],a=n.ads,s=n.tracking,o={},T.push({startTime:"start"==n.offset?0:parseFloat(n.offset),totalAds:a&&a.length||0}),s)for(var p=0;p<s.length;p++)o[s[p].type]=o[s[p].type]||[],o[s[p].type].push(s[p].url);n.tracking=o;for(var f=0,m=a.length;f<m;f++)if(o={},a[f]&&a[f].tracking){for(var g=0,A=a[f].tracking.length;g<A;g++)r=a[f].tracking[g],o[r.type]=o[r.type]||[],o[r.type].push(r.url);a[f].tracking=o}"linear"==e[l].type?h.linear.push(e[l]):"nonlinear"==e[l].type&&h.nonlinear.push(e[l])}v("@setAdTrackerInfo Total linear ad breaks",h.linear.length),v("@setAdTrackerInfo Total nonlinear ad breaks",h.nonlinear.length)}function s(){return T}function d(n,i,o,s){var d,c,l,p,m;v("@notifyAdEvent, event:",n,"adBreakIndex",i,"adIndex",o,"adSequenceIndex",s),void 0===s?h.linear[i]?(g=h.linear[i].ads[o],v("@notifyAdEvent, event:",n," adBreakId:",h.linear[i].id,"\tadId:",g&&g.ad_id,"\tadSequenceIndex:",s)):g=null:s>=1?(v("@notifyAdEvent using adSequenceIndex for matching tracker info"),h.linear[i]?(g=h.linear[i].ads[s-1],v("@notifyAdEvent, event:",n," adBreakId:",h.linear[i].id,"\tadId:",g&&g.ad_id,"\tadSequenceIndex:",s)):g=null):console.error("Encountered invalid adSequenceIndex"),d={USER_PAUSE:["pause"],USER_RESUME:["resume"],USER_MUTE:["mute"],USER_UNMUTE:["unmute"],USER_FULLSCREEN:["fullscreen","expand"],USER_CANCEL_FULLSCREEN:["exitFullscreen","collapse","minimize"],AD_CLICKED:["ClickTracking","defaultClick"]};var E={AD_STARTED:["impression","start","defaultImpression","creativeView"],AD_FIRST_QUARTILE:["firstQuartile"],AD_MID_POINT:["midpoint"],AD_THIRD_QUARTILE:["thirdQuartile"],AD_COMPLETED:["complete"]};switch(d=e.merge(d,E),n){case"AD_STARTED":if(g&&g.tracking.ClickThrough&&g.tracking.ClickThrough.length?(v("adding event listener for url",g,g.tracking.ClickThrough[0]),m=f.bind(null,i,o,s),e.addEventListener(r,"click",m),A.push(m)):a.dispatchError("ADTR001"),g&&g.companions&&g.companions.length)for(l=g.companions.length;l--;)p=g.companions[l],t.publish("companionContent",p.width,p.height,null,p);break;case"AD_COMPLETED":for(;A&&A.length;)e.removeEventListener(r,"click",A.shift())}if(d[n]&&g)for(var T=0,_=d[n].length;T<_;T++)c=d[n][T],v("@notifyAdEvent pinging for ",c,g.tracking[c]&&g.tracking[c].length),u(g.tracking[c],i,o,c),n in E&&delete h.linear[i].ads[o].tracking[c]}function c(e,t){var n,a,r={AD_SLOT_STARTED:["breakStart","slotImpression"],AD_SLOT_COMPLETED:["breakEnd","slotEnd"]};if(e in r&&h&&h.linear&&h.linear[t])for(n=h.linear[t];r[e].length;){var i=r[e].shift();n.tracking&&n.tracking[i]&&(a=n.tracking[i],a=a.constructor==Array?a:[a],u(a,t,0,i))}}function l(t,n){var a;if("VAST_VIDEO_VIEW"==t){h.linear&&h.linear.length&&h.linear[0]?a=h.linear[0].tracking:h.nonlinear&&h.nonlinear.length&&h.nonlinear[0]&&(a=h.nonlinear[0].tracking),a=a||{},E&&(a=e.merge(a||{},E));var r=a.videoView;if(!r)return;r+=(r.indexOf("?")>=0?"&":"?")+"init="+(0==n?1:0),r+="&ct="+n,u([r],0,"non-ad","videoView")}}function u(t,n,a,r){var i;if(t)for(i=t.length;i--;)v("@pingUrls",i,t[i],r),e.touchURL(t[i],p.bind(null,"success",t[i],n,a,r),p.bind(null,"error",t[i],n,a,r))}function p(e,t,n,a,r,i){v("@tallyPingResults",e,t,n,a,r),_[n]=_[n]||{},_[n][a]=_[n][a]||{},_[n][a][r]=_[n][a][r]||{},_[n][a][r][e]=_[n][a][r][e]||0,_[n][a][r][e]++,i&&v("@tallyPingResults",i)}function f(t,n,r){g&&g.tracking&&g.tracking.ClickThrough&&g.tracking.ClickThrough.length?(v("@onAdClick",g.tracking.ClickThrough[0]),a.dispatchEvent("AD_CLICKED"),e.openURIInNewWindow(g.tracking.ClickThrough[0]),d("AD_CLICKED",t,n,r)):v("@onAdClick no clickthrough URL found!")}function m(e,t,n){if(v("@getAd",e,t,n),h&&h.linear)return void 0===n?h.linear[e]?h.linear[e].ads[t]:null:n>=1?h.linear[e]?(v("@notifyAdEvent using adSequenceIndex for matching tracker info"),h.linear[e].ads[n-1]):null:(console.error("Encountered invalid adSequenceIndex"),null)}var g,v=n?n.getLogFn("StitchedAdTracker"):function(){for(var e,t=arguments.length,n=new Array(t),a=0;a<t;a++)n[a]=arguments[a];(e=console).log.apply(e,["[!StitchedAdTracker!]\t"].concat(n))},h={linear:[],nonlinear:[]},E={},A=[],T=[],_={};return{setAdTrackerInfo:o,notifyAdEvent:d,notifyAdSlotEvent:c,notifyNonAdEvent:l,getAd:m,getAdSlots:s}}return t}),n("StitchedAdManager",["util","StitchedAdTracker"],function(e,t){function n(n,a,r,i,o){function s(e){P=e}function d(t,n,a,r){V("@getAdBreaks"),P=t||P,H.adBreakSuccess=a,H.adBreakError=r,e.download(P,null,l.bind(null,n),u)}function c(e,t,a){V("@resetAdBreaks",e);var i=[];p(i,e),r&&r.dispatchEvent&&r.dispatchEvent(null,"AD_BREAKS",i),n.publish("adBreaks",i,e),V("@resetAdBreaks",i),t&&t(i)}function l(t,n){V("@onAdBreaks",n,t);var a,r,i=[];try{n=e.str2XML(n)}catch(e){}V("@onAdBreaks",n),n=n.getElementsByTagName("interstitial");for(var o=0,s=n.length;o<s;o++)a=n[o].getElementsByTagName("start")[0],r=n[o].getElementsByTagName("end")[0],a=a.childNodes&&a.childNodes.length?a.childNodes[0].nodeValue:null,r=r.childNodes&&r.childNodes.length?r.childNodes[0].nodeValue:null,i.push({start:parseFloat(a),end:parseFloat(r)});p(i,t),V("@onAdBreaks",i),H.adBreakSuccess&&H.adBreakSuccess(i,t)}function u(e){r&&r.dispatchError&&r.dispatchError(null,"ADST001",e),H.adBreakError&&H.adBreakError(e)}function p(e,t){V("@populateZones",e,t);var n,a=0,r=0,i=0,o=!1;t=parseFloat(t),L=L||{},L.totalAdDuration=0,L.zones=[],o=e&&e.length>0&&"break_idx"in e[0];for(var s=0,d=e.length;s<d;s++){if(a!=e[s].start&&L.zones.push({start:a,end:e[s].start,type:"content",adOffset:L.totalAdDuration,chapterIndex:r++}),e[s].ads&&e[s].ads.length){n=0;for(var c=0,l=e[s].ads.length;c<l;c++)e[s].ads[c].offset=n,n+=e[s].ads[c].duration}L.zones.push({start:e[s].start,end:e[s].end,type:"ad",ads:e[s].ads,adOffset:L.totalAdDuration,duration:e[s].end-e[s].start,relativeAdBreakIndex:i++,adBreakIndex:o?e[s].break_idx:i++,declaredTotalAds:e[s].ad_count}),L.totalAdDuration+=e[s].end-e[s].start,a=e[s].end}a!=t&&L.zones.push({start:a,end:t+L.totalAdDuration,type:"content",adOffset:L.totalAdDuration,chapterIndex:r++}),V("totalAdDuration",L.totalAdDuration)}function f(e,t){return V("isIn",e,t),V("isIn",e,L.zones[t].start,L.zones[t].end),e<L.zones[t].end&&e>=L.zones[t].start}function m(e){V("@translateToAbsoluteTime",e,L&&L.zones);var t,n,a;if(!L||!L.zones)return e||0;for(var r=0,i=L.zones.length;r<i;r++)if("ad"==L.zones[r].type?a=e+L.zones[r].adOffset+L.zones[r].duration:(t=L.zones[r].start-L.zones[r].adOffset,n=L.zones[r].end-L.zones[r].adOffset,V("@translateToAbsoluteTime checking zone: #",r,t,n),a=e+L.zones[r].adOffset),f(a,r))return V("@translateToAbsoluteTime translated",a),a}function g(e,t){var n;if(void 0===L.currentZoneIndex||L.currentZoneIndex>=L.zones.length||void 0!==L.currentZoneIndex&&!f(e,L.currentZoneIndex)){V("updating currentZoneIndex...");for(var a=0,r=L.zones.length;a<r;a++)if(f(e,a)){L.currentZoneIndex=a;break}}var i=L.zones[L.currentZoneIndex];if("ad"==i.type){if(n={currentTime:e-i.start,totalTime:i.duration,contentType:"ad",adBreakIndex:i.adBreakIndex,absoluteOffset:i.start,startTime:i.start-i.adOffset,relativeAdBreakIndex:i.relativeAdBreakIndex},i.ads&&i.ads.length){if(void 0===L.currentAdIndex||L.currentAdIndex>=i.ads.length||void 0!==L.currentAdIndex&&(n.currentTime>=i.ads[L.currentAdIndex].offset+i.ads[L.currentAdIndex].duration||n.currentTime<i.ads[L.currentAdIndex].offset)){V("updating currentAdIndex...");for(var o=0,s=i.ads.length;o<s;o++)if(V("checking currentAdIndex... j="+o,n.currentTime,i.ads[o].offset+i.ads[o].duration,"|",n.currentTime,i.ads[o].offset),n.currentTime<i.ads[o].offset+i.ads[o].duration&&n.currentTime>=i.ads[o].offset){L.currentAdIndex=o;break}}n.currentAdTime=n.currentTime-i.ads[L.currentAdIndex].offset,n.currentAdDuration=i.ads[L.currentAdIndex].duration,n.currentAdSequenceIndex=i.ads[L.currentAdIndex].sequence,n.adIndex=L.currentAdIndex,n.totalAds=i.declaredTotalAds?i.declaredTotalAds-n.currentAdSequenceIndex+L.currentAdIndex+1:i.ads.length,n.ads=i.ads}return n}for(var d={currentTime:e-i.adOffset,totalTime:t?parseFloat(t)-L.totalAdDuration:void 0,startTime:i.start-i.adOffset,endTime:i.end-i.adOffset,contentType:"content",chapterIndex:i.chapterIndex},c=0,l=F.length;c<l;c++)if(!F[c].totalAds&&e-i.adOffset<F[c].startTime+.5&&e-i.adOffset>F[c].startTime-.5){d.unservedSlotIndex=c;break}return d}function v(e,t){r[e]=t}function h(){return L&&L.zones||[]}function E(e){W=e}function A(e,t){x&&e&&(x.setAdTrackerInfo(e,t),F=x.getAdSlots(),J=null)}function T(e){var t=null;if("ad"!=K.contentType&&"ad"==e.contentType&&(W.isLive||(t=e.totalTime?e.totalTime:null),I("AD_SLOT_STARTED",e.adBreakIndex),I("AD_BREAK_STARTED",e.adBreakIndex,t),void 0===e.adIndex&&y("AD_STARTED",e.adBreakIndex)),"content"!=K.contentType&&"content"==e.contentType&&"ad"==K.contentType&&(W.isLive||(t=K.totalTime?K.totalTime:null),y("AD_COMPLETED",K.adBreakIndex,K.adIndex,K.currentAdSequenceIndex),I("AD_BREAK_COMPLETED",K.adBreakIndex,t),I("AD_SLOT_COMPLETED",K.adBreakIndex)),"ad"==e.contentType)K.adQuartiles=K.adQuartiles||{},e.adQuartiles=K.adQuartiles,K.adIndex!=e.adIndex&&(K.adIndex<e.adIndex&&y("AD_COMPLETED",e.adBreakIndex,K.adIndex,K.currentAdSequenceIndex),y("AD_STARTED",e.adBreakIndex,e.adIndex,e.currentAdSequenceIndex),e.adQuartiles={},K.adQuartiles={}),!e.adQuartiles.AD_FIRST_QUARTILE&&e.currentAdTime>e.currentAdDuration/4&&(y("AD_FIRST_QUARTILE",e.adBreakIndex,e.adIndex,e.currentAdSequenceIndex),e.adQuartiles.AD_FIRST_QUARTILE=1),!e.adQuartiles.AD_MID_POINT&&e.currentAdTime>e.currentAdDuration/2&&(y("AD_MID_POINT",e.adBreakIndex,e.adIndex,e.currentAdSequenceIndex),e.adQuartiles.AD_MID_POINT=1),!e.adQuartiles.AD_THIRD_QUARTILE&&e.currentAdTime>3*e.currentAdDuration/4&&(y("AD_THIRD_QUARTILE",e.adBreakIndex,e.adIndex,e.currentAdSequenceIndex),e.adQuartiles.AD_THIRD_QUARTILE=1);else{B=B||e.currentTime,U=U||0;var n=e.currentTime-B;if(n<.5){U+=n;var a=U-Y;if(a>=0){U=a,_("VAST_VIDEO_VIEW",Y),j++;var r=q.length-1;Y=j>r?q[r]:q[j]}var i=Math.abs(J-e.currentTime)>2;"number"==typeof e.unservedSlotIndex&&(null==J||i)&&(J=e.currentTime,I("AD_SLOT_STARTED",e.unservedSlotIndex),I("AD_SLOT_COMPLETED",e.unservedSlotIndex))}B=e.currentTime}K=e}function _(e,t){V("@dispatchNonAdEvent",e,t),D(e,t)}function y(e,t,a,i){var s,d,c,l,u;L&&L.zones&&(u=L.zones[L.currentZoneIndex],l=u&&u.ads?u.ads.length:null,d=u&&u.ads&&u.ads[a]?u.ads[a].duration:null),V("@dispatchAdEvent",e,t,a,i),x?(s=x.getAd(t,a,i),c=["ad",t,a].join("_")):c=["ad",t].join("_");var p={clickThrough:"ClickThrough",clickTracking:"ClickTracking",defaultClick:"defaultClick",fullscreen:"fullscreen",expand:"expand",minimize:"minimize",collapse:"collapse",exitFullscreen:"exitFullscreen"},f={},m={},g=function(e){for(var t in p)({}).hasOwnProperty.call(p,t)&&(e[t]=s.tracking[p[t]]||null)};s&&s.tracking?o.chromeless?(g(f),g(m)):g(m):V("skipping populating revealedTrackingUrls due to no chromeless flag or currentAd not set"),s&&s.icons&&s.icons[0]&&("AD_STARTED"===e?n.publish("setWhyThisAdIcon",s.icons[0]):"AD_COMPLETED"===e&&n.publish("removeWhyThisAdIcon")),r.dispatchEvent(e,s?s.ad_id:c,s?s.ad_title:c,"Anvato Ad Stitcher",s?{tracking:f,trackingUrls:m,adIndex:a,totalAds:"number"==typeof l?l:null,duration:d}:{}),k(e,t,a,i)}function I(e,t,n){V("@dispatchAdBreakEvent",e,t,n),r.dispatchEvent(e,t,n),S(e,t,n)}function S(e,t,n){x&&x.notifyAdSlotEvent(e,t)}function D(e,t){x&&x.notifyNonAdEvent(e,t)}function k(e,t,n,a){x&&void 0!==n&&x.notifyAdEvent(e,t,n,a)}function C(e){"ad"==K.contentType&&k(e,K.adBreakIndex,K.adIndex,K.currentAdSequenceIndex)}function R(){var e=null;W.isLive||(e=K.totalTime?K.totalTime:null),y("AD_COMPLETED",K.adBreakIndex,K.adIndex,K.currentAdSequenceIndex),I("AD_BREAK_COMPLETED",K.adBreakIndex,e)}function b(e){if(!L||!L.zones)return null;for(var t=0;t<L.zones.length;t++)if(L.zones[t].adBreakIndex==e)return L.zones[t];return null}function O(e){var t,n=-1,a=-1;if(!L||!L.zones)return null;for(var r=0;r<L.zones.length;r++){var i=L.zones[r];t=Math.abs(e-i.start),"ad"==i.type&&(n<0||t<n)&&(n=t,a=r)}return L.zones[a]}function M(e){var t;if(!L)return null;if(Q&&Q.start<=e&&e<Q.end)return Q;for(var n=0;n<L.zones.length;n++)if(t=L.zones[n],t.start<=e&&e<t.end){Q=t;break}return Q}function N(e,t,n){var a=L&&L.zones,r=M(e);if(!a||a.length<2||!r)return!1;if(n&&"content"==r.type&&r.start==a[a.length-1].start)return!1;if(!n&&"content"==r.type&&r.start==a[0].start)return!1;var i=n?r.start:r.end,o=n?r.end:r.start;return"ad"==r.type?Math.abs(e-i)<t:Math.abs(e-o)<t}function w(){V("@setCurrentZoneStatus"),L.zones[L.currentZoneIndex].watched=!0}var P,L,x,U,B,V=a?a.getLogFn("StitchedAdManager"):function(){for(var e,t=arguments.length,n=new Array(t),a=0;a<t;a++)n[a]=arguments[a];(e=console).log.apply(e,["[!StitchedAdManager!]\t"].concat(n))},F=[],H={},K={},G="adBreakDetail"in o&&o.adBreakDetail||!("adBreakDetail"in o)?"fp":"plan",z=!("clientSideAdTracking"in o)||!!o.clientSideAdTracking,q=[0,5,10,15,30,60,120,180,300],j=0,Y=q[0],J=null,W={isLive:void 0},Q=null;return"fp"==G&&z&&(V("instantiating StitchedAdTracker since adBreakMode:",G,"trackAds:",z),x=new t(n,a,r,i)),{notifyPostrollEnd:R,setAdBreakUrl:s,getAdBreaks:d,resetAdBreaks:c,translateToAbsoluteTime:m,translateToPresentation:g,setService:v,setVideoInfo:E,getZones:h,populateZones:p,setAdTrackerInfo:A,updateState:T,onUserInteraction:C,getAdBreakByIndex:b,getAdBreakByTime:O,isNearAdBreakBoundary:N,setCurrentZoneStatus:w}}return n}),n("Receiver",["util","Logger","mediator","PluginLoader","StitchedAdManager"],function(e,t,n,a,r){function i(n,i){function o(t,n){if("string"==typeof n){try{n=e.aesStdDecrypt("ecb",n,pn[t].token,"base64")}catch(e){return an("@decryptWithSenderToken error while decrypting the payload"),void pe(t,"RCVR010")}try{n=JSON.parse(n)}catch(e){return an("@decryptWithSenderToken error while parsing the payload"),void pe(t,"RCVR011")}}return n}function s(e,t){an("@loadNext",JSON.stringify(arguments,null,3)),t=o(e,t),Wn.push(t),fe(null,"LOAD_NEXT_REQUESTED",t),fe(null,"CHROMECAST_QUEUE_UPDATED",Wn)}function d(e,t){an("@loadLast",JSON.stringify(arguments,null,3)),t=o(e,t),Wn.push(t),fe(null,"LOAD_LAST_REQUESTED",t),fe(null,"CHROMECAST_QUEUE_UPDATED",Wn)}function c(e){var t,n,a,r=!1,i=l();if(jt=[],Nt&&Nt.common&&Nt.common.language&&(t=Nt.common.language,!0===e&&(e=t)),"string"==typeof e&&e.length>0&&(t=e),t=t||"TextTrack1",i&&i.textTracks)for(var o=0,s=i.textTracks.length;o<s;o++)a=i.textTracks[o],an("@updateCaption setting caption mode to ",e,"available captions#",i.textTracks.length),n=o?a.language:a.language||t,n&&jt.push(n),a.mode=r||n!=e?"hidden":"showing",r=r||n==e,an("@updateCaption",o,"defaultLanguage:",t,"trackLanuguage:",n,"selectedCaption:",e,"isAnyTrackDisplayed:",r);return r}function l(){var e=document.getElementsByTagName("video");return e.length?e[0]:(e=document.getElementsByTagName("cast-media-player"),e.length?e[0].shadowRoot.querySelector("video"):null)}function u(e,t,n){if(An){an("@toggleCaption",e,t,n),qt=t;var a;try{a=c(qt)}catch(e){an("@toggleCaption error")}var r=[!!a&&qt,jt];Cn.CAPTION_STATUS=r,fe.apply(null,[null,"CAPTION_STATUS"].concat(r)),delete gn.toggleCaption,delete vn.toggleCaption}else an("@toggleCaption load is not completed yet, deferring the call"),gn.toggleCaption=u,vn.toggleCaption=arguments}function p(){an("@updateApplicationState",Jt,"->",Qt),Jt=Qt;var e;if(Rt){var t=Jt===bn.IDLE,n=t?null:Rt.getMediaInformation(),a=J(n);an("@updateApplicationState",a,n,Rt.getMediaInformation(),Jt,Xt!=a),Xt=a,Mt.setApplicationState(a)}y(Bn[Jt.toUpperCase()]),Wt=!1,xn.length&&(e=xn.shift(),f(e))}function f(e){an("@setState",e);Wt?xn.push(e):(Wt=!0,Qt=e,anvr.onStateChanged&&anvr.onStateChanged(e)&&p())}function m(e){var t=document.createElement("a");return t.href=e,t.pathname||""}function g(e){var t=e.split(".");return 1===t.length||""===t[0]&&2===t.length?"":t.pop().toLowerCase()}function v(e){var t=e.contentId||"",n=e.contentType||"",a=m(t);return 0===n.indexOf("audio/")?Un.AUDIO:0===n.indexOf("video/")?Un.VIDEO:0===n.indexOf("application/x-mpegurl")?Un.VIDEO:0===n.indexOf("application/vnd.apple.mpegurl")?Un.VIDEO:0===n.indexOf("application/dash+xml")?Un.VIDEO:0===n.indexOf("application/vnd.ms-sstr+xml")?Un.VIDEO:"mp3"===g(a)?Un.AUDIO:"oga"===g(a)?Un.AUDIO:"wav"===g(a)?Un.AUDIO:"mp4"===g(a)?Un.VIDEO:"ogv"===g(a)?Un.VIDEO:"webm"===g(a)?Un.VIDEO:"m3u8"===g(a)?Un.VIDEO:"mpd"===g(a)?Un.VIDEO:0!=n.indexOf(".ism")?Un.VIDEO:Un.UNKNOWN}function h(e,t){return!(e.format.indexOf("m3u8")>-1&&!t&&e.license_url)&&(e.format.indexOf("dash"),!0)}function E(e,t){an("@extractPlayUrl");var n,a,r,i,o=0,s="2"==e.video_type;if(!(n=e.published_urls))return null;for(r=n.length,a=0;a<r;a++)if(i=n[a],"dash"===i.format&&h(i,s)){o=a;break}return t?{url:n[o].embed_url,adBreakInfo:n[o].adBreakInfo,drmLicenseUrl:n[o].license_url,format:n[o].format}:n[o].embed_url}function A(e){var t;an("@onAdBreaks",JSON.stringify(e,null,3)),t=[e],Cn.AD_BREAKS=t,gn.getAdBreakInfo&&gn.getAdBreakInfo.apply(null,Array.prototype.slice.call(vn.getAdBreakInfo)),fe.apply(null,[null,"AD_BREAKS"].concat(t))}function T(e){an("@onAdBreaksError",e),gn.getAdBreakInfo&&gn.getAdBreakInfo.apply(null,Array.prototype.slice.call(vn.getAdBreakInfo))}function _(e){var t=Qn[e.requestId];t&&t.resolve?(t.resolve(e),delete Qn[e.requestId]):Qn[e.requestId]={requestData:e}}function y(e){an("setIdleTimeout: "+e),clearTimeout(Vn.idleTimerId),e&&(Vn.idleTimerId=setTimeout(function(){Mt.stop()},e))}function I(e,t){var n,a={};an("@onSchedule",JSON.stringify(t,null,3));var r,o,s,d,c={current_event:"PROGRAM_CHANGED",next_event:"NEXT_PROGRAM"},l=(new Date).getTime(),u=6e5;zn=0;var p,f={},m={},g=!("useRatingAsGenericMetadataSubtitle"in anvr.config)||anvr.config.useRatingAsGenericMetadataSubtitle;anvr.config&&anvr.config.fallbackImages&&(p="2"==Nt.video_type?"live":"vod",p in anvr.config.fallbackImages&&(m=anvr.config.fallbackImages[p],an("setting userFallbackImages for",p,JSON.stringify(m,null,3))),anvr.config.fallbackImages.byVideoId&&Nt.upload_id in anvr.config.fallbackImages.byVideoId&&("string"==typeof anvr.config.fallbackImages.byVideoId[Nt.upload_id]?(f.poster=anvr.config.fallbackImages.byVideoId[Nt.upload_id],f.thumbnail=anvr.config.fallbackImages.byVideoId[Nt.upload_id],an("setting fallbackImagesByVideoId from one URL")):f=anvr.config.fallbackImages.byVideoId[Nt.upload_id])),t.server_time&&(zn=1e3*parseInt(t.server_time)-l,an("timeDelta:",zn));for(var v in c)c.hasOwnProperty(v)&&(n=t&&t[v]?t[v]:null,a=t&&t[v]?{title:t[v].def_title||t[v].title}:{},a.video=Nt.upload_id,r=t&&t[v]?t[v].event_id:null,o=t&&t[v]?t[v].upid:null,t&&t[v]&&t[v].custom_metadata_map&&(a.description=t[v].custom_metadata_map.rovi_long_description,a.rating=t[v].custom_metadata_map.rovi_tv_rating,a.mvpdAuthenticationNeeded="yes"==t[v].custom_metadata_map.authenticated,a.tveCheckNeeded="yes"==t[v].custom_metadata_map.tveauthorized),"PROGRAM_CHANGED"==c[v]&&(wt!=r||Pt!=o?(an("@onSchedule",c[v]),wt=r,Pt=o,u=1e3*parseInt(n.ts_end)-l-zn,an("nextUpdateTime",parseInt(n.ts_end),1e3,l,zn),an("nextUpdateTime",u),s=[r,o,a,n],Cn.PROGRAM_CHANGED=s,Ut=a,Bt=n,Nt.totalEventNumber=Nt.totalEventNumber||{},Nt.totalEventNumber.PROGRAM_CHANGED=(Nt.totalEventNumber.PROGRAM_CHANGED||0)+1,yn.chapterIndex=Nt.totalEventNumber.PROGRAM_CHANGED-1,fe.apply(null,[null,"PROGRAM_CHANGED"].concat(s)),B(t[v]),F(t[v]),me(0,parseInt(n.ts_end)-parseInt(n.ts_start),"content"),d=Rt.getMediaInformation(),d.customData=d.customData||{},d.customData.metadata=s,d.customData.partnerData=kn,d.metadata&&(d.metadata.title=a.title,d.metadata.images=[{url:s[2].thumbnail||f.thumbnail||m.thumbnail||Nt.src_image_url},{url:s[2].poster||f.poster||m.poster}],0==d.metadata.metadataType?(an("@loadMetadata detected GenericMediaMetadata, populating that"),d.metadata.releaseDate=n.ts_start,d.metadata.subtitle=g?s[2].rating:""):2==d.metadata.metadataType&&(an("@loadMetadata detected TvShowMediaMetadata, populating that"),d.metadata.episode=n.custom_metadata_map.rovi_episode_number,d.metadata.originalAirDate=n.ts_start,d.metadata.season=n.custom_metadata_map.rovi_season_number,d.metadata.seriesTitle=Ye(aa.CHROMECAST,"program_name",n.custom_metadata_map.rovi_long_title))),Rt.setMediaInformation(d),Rt.broadcastStatus(!0,null,{metadata:s})):u=6e4),"NEXT_PROGRAM"==c[v]&&(r==Lt&&o==xt||(Lt=r,xt=o,fe(null,c[v],r,o,a,n))));an("scheduling next event lookup after",u/6e4,"minutes"),u>0?Vn.getSchedule=setTimeout(function(){i.getSchedule(pn[e].accessKey,pn[e].secret,Vt,{},I.bind(null,e),S.bind(null,e))},u):(pe(null,"RCVR900"),Vn.getSchedule=setTimeout(function(){i.getSchedule(pn[e].accessKey,pn[e].secret,Vt,{},I.bind(null,e),S.bind(null,e))},12e4),an("scheduled next after 2 minutes"))}function S(e){an("@onScheduleError",e)}function D(e){var t={};if(e&&"0"in e){for(var n in e)e.hasOwnProperty(n)&&"name"in e[n]&&"value"in e[n]&&(t[e[n].name]=e[n].value);return t}return e}function k(e){an("@getAdBreakInfo");var t=e.media.customData||{},n=null;t&&(n=E(t,!0)),t.atvm&&n&&n.url?i.getAdBreakInfo(n.url,t,C.bind(null,e),R):C(e,t)}function C(t,n){an("@onGetAdBreakInfoSuccess");var a,i,o,n=t.media.customData||{},s=null;n&&(s=E(n,!0)),a=s&&"adBreakInfo"in s?s.adBreakInfo:null,n.custom_metadata=D(n.custom_metadata),Nt=e.deepCopy(n),n.atvm&&a&&a.interstitials?(i=a.interstitials,o=a.breaks,t.media.customData={},gn.getAdBreakInfo=b,vn.getAdBreakInfo=arguments,en=en||new r($n,nn,{dispatchEvent:fe,dispatchError:pe},null,anvr.config),"string"==typeof i?en.getAdBreaks(i,n.duration,A,T):"object"==typeof i&&"cues"in i&&setTimeout(function(){an("@onGetAdBreakInfoSuccess populating zones"),en.populateZones(i.cues,n.duration),o&&en.setAdTrackerInfo(o),A(i.cues,n.duration)},100)):b(t)}function R(e){an("@onGetAdBreakInfoError",e),delete gn.onConfig,delete vn.onConfig,pe(null,"RCVR405"),f(bn.IDLE)}function b(e){an("@notifyLoadComplete",e),e.currentTime&&en&&!Vt.castWithAbsoluteOffset&&!anvr.config.useCafAdBreaks&&(e.currentTime=en.translateToAbsoluteTime(e.currentTime)),w(e),U(e),f(bn.LOADING),An=!0,gn.toggleCaption&&vn.toggleCaption&&gn.toggleCaption.apply(null,Array.prototype.slice.call(vn.toggleCaption))}function O(e){var t,n,a,r={breakClips:[],breaks:[]},i=0,o=0;if(!e||!e.length)return r;for(var s=0;s<e.length;s++)if("number"==typeof e[s].start){t={id:"break"+s,breakClipIds:[],position:e[s].start-o,isEmbedded:!0};for(var d=0;d<e[s].ads.length;d++)n=e[s].ads[d].duration,a="breakClip"+i,r.breakClips.push({id:a,duration:n}),o+=n,t.breakClipIds.push(a),i++;r.breaks.push(t)}return r}function M(e){var t,n,a;Zn={},Xn={};for(var r=0;r<e.breakClips.length;r++)t=e.breakClips[r],Xn[t.id]=t;for(var r=0;r<e.breaks.length;r++){n=e.breaks[r],Zn[n.id]=n,a=0;for(var i=0;i<n.breakClipIds.length;i++)t=Xn[n.breakClipIds[i]],t.breakId=n.id,a+=t.duration;Zn[n.id].duration=a}}function N(e){var t=Xn[e];return t&&t.breakId?Zn[t.breakId]||null:null}function w(e){an("@loadVideo",e);var t,n,a;delete gn.getAdBreakInfo,Hn=!1,Nt&&Nt.published_urls?(n=E(Nt,!0),t=n.url):t=null,an("urlInfo",n);var r,i;r=Vt&&Vt.proxyUrl?Vt.proxyUrl+"?url="+encodeURIComponent(t||e.media.contentId):t||e.media.contentId;var o=e.media.contentType||"",s=m(r);"string"==typeof o&&(o=o.toLowerCase()),n&&n.format.indexOf("m3u8")>-1?o="application/x-mpegurl":n&&n.format.indexOf("dash")>-1&&(o="application/dash+xml"),e.media.contentType=o,n&&n.drmLicenseUrl&&o.indexOf("application/x-mpegurl")>-1&&(e.media.hlsSegmentFormat=cast.framework.messages.HlsSegmentFormat.FMP4,e.media.hlsVideoSegmentFormat=cast.framework.messages.HlsVideoSegmentFormat.FMP4),anvr.config.useCafAdBreaks&&Cn.AD_BREAKS&&Cn.AD_BREAKS.length&&(adBreakInfo=Cn.AD_BREAKS[0],a=O(adBreakInfo),M(a),e.media.breakClips=a.breakClips,e.media.breaks=a.breaks),an("@loadVideo extension",g(s),"type:",o),i=[!!c(qt)&&qt,jt],Cn.CAPTION_STATUS=i,fe.apply(null,[null,"CAPTION_STATUS"].concat(i)),e.media.contentId=r,_(e)}function P(e){var t=/(.*)\.lura\.live|(.*)\.lura\.app|s3.+amazonaws|dcs-jite\.cdn\.anvato\.net|storage\.googleapis\.com|(cmg.{3,4}vod-a|k.{3}vod-a|w.{3,4}vod-a)\.akamaihd\.net|(cmg.*|cxn.*)akamaized\.net|tkx2-stage\.anvato\.net|tvetlmd.+akamai|storage\.googleapis\.com|stsnewsystr01-i\.akamaihd\.net|anvhls-jite\.cdn\.anvato\.net|tkx2-prod\.anvato\.net|hwcdn\.net|data-services\.anvato\.net|snihlsvod\.scripps\.com|nbchls-prod\.nbcuni\.com|live-prod\.fs\.anvato\.net|vod\/p\//i,n=e.url in Fn||Vt.masterWhiteListed,a=Rt.getMediaInformation(),r=a.contentUrl||a.contentId;n||Vt&&(Vt.xUrl||Vt.url)||t.test(e.url)?(e.withCredentials=!1,r==e.url&&(Fn[r]=!0,Vt.masterWhiteListed=!0)):e.withCredentials=!0,an("@manifestRequestHandler",JSON.stringify(e,null,3))}function L(e){var t=/(.*)\.lura\.live|(.*)\.lura\.app|gcdn\.anvato\.net|tvesyfy.*akamaized|s3.+amazonaws|dcs-jite\.cdn\.anvato\.net|storage\.googleapis\.com|(cmg.{3,4}vod-a|k.{3}vod-a|w.{3,4}vod-a)\.akamaihd\.net|(cmg.*|cxn.*)akamaized|tkx2-stage\.anvato\.net|tvetlmd.+akamai|storage\.googleapis\.com|stsnewsystr01-i\.akamaihd\.net|wfoxvod-a\.akamaihd\.net|anvhls-jite\.cdn\.anvato\.net|tkx2-prod\.anvato\.net|hwcdn\.net|data-services\.anvato\.net|snihlsvod\.scripps\.com|nbchls-prod\.nbcuni\.com|live-prod\.fs\.anvato\.net|nbc-jite(-stage)*\.nbcuni\.com|cdn-download\.mcm\.univision\.com/i;e.withCredentials=!(Vt.masterWhiteListed||Vt&&(Vt.xUrl||Vt.url)||t.test(e.url)),an("@updateSegmentRequestInfo",JSON.stringify(e,null,3))}function x(){if(Mt){var e=Mt.getDeviceCapabilities();if(e)return!1===e.display_supported}return!1}function U(e){var t,n={};if(an("@loadMetadata"),!x()){var a,r,o={},s=!("useRatingAsGenericMetadataSubtitle"in anvr.config)||anvr.config.useRatingAsGenericMetadataSubtitle;anvr.config&&anvr.config.fallbackImages&&(r="2"==Nt.video_type?"live":"vod",r in anvr.config.fallbackImages&&(o=anvr.config.fallbackImages[r],an("setting userFallbackImages for",r,JSON.stringify(o,null,3))),anvr.config.fallbackImages.byVideoId&&Nt.upload_id in anvr.config.fallbackImages.byVideoId&&("string"==typeof anvr.config.fallbackImages.byVideoId[Nt.upload_id]?(n.poster=anvr.config.fallbackImages.byVideoId[Nt.upload_id],n.thumbnail=anvr.config.fallbackImages.byVideoId[Nt.upload_id],an("setting fallbackImagesByVideoId from one URL")):n=anvr.config.fallbackImages.byVideoId[Nt.upload_id])),Nt&&(an("videoJSON detected","2"==Nt.video_type),"2"==Nt.video_type&&(an("getting schedule",pn[e.senderId].accessKey,pn[e.senderId].secret,Vt),i.getSchedule(pn[e.senderId].accessKey,pn[e.senderId].secret,Vt,{},I.bind(null,e.senderId),S.bind(null,e.senderId))),me(0,Nt.duration,"content",0),B(Nt),F(Nt),t=[Nt.upload_id,Nt.upload_id,{video:Nt.upload_id,title:Nt.def_title,description:Nt.def_description,duration:Nt.duration,castDurationType:anvr.config.useCafAdBreaks?"content":"absolute",castAdBreakInfo:Zn,castAdInfo:Xn,poster:Nt.src_image_url||Nt.src_logo_url||n.poster||o.poster||Vt.poster,thumbnail:Nt.thumbnail||Nt.src_logo_url||n.thumbnail||o.thumbnail||Vt.thumbnail||Nt.src_image_url,rating:Nt.common?Nt.common.rating:null,live:"2"==Nt.video_type,previews:Nt.previews,pvw_matrices:Nt.pvw_matrices,episode:Nt.episode_no,originalAirDate:Nt.ts_airdate,season:Nt.season,seriesTitle:Ye(aa.CHROMECAST,"program_name",Nt.program_name)},Vt],"2"==Nt.video_type?t[2].rating=null:t[2].rating=H(Nt)||"TV-Y",Cn.METADATA_LOADED=t,"2"==Nt.video_type?Nt.initialTitle=Nt.def_title:delete Nt.initialTitle,fe.apply(null,[null,"METADATA_LOADED"].concat(t)),zt=!0,a=Rt.getMediaInformation(),a.customData=a.customData||{},a.customData.metadata=t,a.customData.partnerData=kn,a.metadata&&(a.metadata.title=t[2].title,a.metadata.images=[{url:t[2].thumbnail||n.thumbnail||o.thumbnail},{url:t[2].poster||n.poster||o.poster}],0==a.metadata.metadataType?(an("@loadMetadata detected GenericMediaMetadata, populating that"),a.metadata.releaseDate=Nt.ts_airdate,a.metadata.subtitle=s?t[2].rating:""):2==a.metadata.metadataType&&(an("@loadMetadata detected TvShowMediaMetadata, populating that"),a.metadata.episode=Nt.episode_no,a.metadata.originalAirDate=Nt.ts_airdate,a.metadata.season=Nt.season,a.metadata.seriesTitle=t[2].seriesTitle)),Rt.setMediaInformation(a),Rt.broadcastStatus(!0,null,{metadata:t}),G(e.senderId,Nt),Zt.poll(Nt))}}function B(e){var t=e.custom_metadata_map||e.custom_metadata;if(an("@updateCustomContentInfo",!!t,t&&JSON.stringify(!!t,null,3)),yn&&e&&t)for(var n in t)t.hasOwnProperty(n)&&(yn["custom$"+n]=t[n]);an("@updateCustomContentInfo",JSON.stringify(yn,null,3))}function V(t){var n={};if("object"==typeof t){t=e.deepCopy(t),"object"==typeof t.chromecast&&(n=t.chromecast);for(var a in t)t.hasOwnProperty(a)&&"object"==typeof t[a]&&delete t[a];return e.merge(t,n)}return{}}function F(t){var n,a={},r={},i={};if(an("@updateDerivedMetadata"),t&&(Ht&&mn[Ht]&&"object"==typeof mn[Ht].user&&(r=V(mn[Ht].user.derivedMetadata)),n=V(Vt.derivedMetadata||Vt.user&&Vt.user.derivedMetadata),i=e.merge(r,n),a=e.merge(t.derived_metadata||{},i),yn))for(var o in a)a.hasOwnProperty(o)&&(yn["derivedMetadata$"+o]=a[o])}function H(e){var t,n,a,r,i,o={1:"y",2:"y7",3:"g",4:"pg",5:"14",6:"ma"},s={1:{},2:{fv:1,v:1},3:{d:1,dl:1,dls:1,ds:1,l:1,ls:1,s:1},4:{d:1,dl:1,dls:1,dlsv:1,dlv:1,ds:1,dsv:1,dv:1,l:1,ls:1,lsv:1,lv:1,s:1,sv:1,v:1},5:{d:1,dl:1,dls:1,dlsv:1,dlv:1,ds:1,dsv:1,dv:1,l:1,ls:1,lsv:1,lv:1,s:1,sv:1,v:1},6:{d:1,dl:1,dls:1,dlsv:1,dlv:1,ds:1,dsv:1,dv:1,l:1,ls:1,lsv:1,lv:1,s:1,sv:1,v:1}},d="";if(e&&e.common)return t=e.common.rating,n=e.common.subratings,n=n||"",n=n.replace(/\s+/g,"").toLocaleLowerCase(),n=n.split(","),n=n.sort(),n=n.join(""),n=n.trim(),t in o?(a=o[t],t in o&&n&&s[t][n]&&(d=n),an("ratingString",a),an("subratingString",d),
r="TV-{{R}}-{{S}}",d&&d.length||(r=r.replace(/(^.+\}\}).*(\{\{.*)/,"$1$2")),i=r.replace(/\{\{R\}\}/,a.toUpperCase()),i=i.replace(/\{\{r\}\}/,a),i=i.replace(/\{\{S\}\}/,d.toUpperCase()),i=i.replace(/\{\{s\}\}/,d)):null}function K(t,n){an("@setPartnerData",t,n);var a,r={};return r[t]=n,kn=e.merge(kn||{},r),Cn.CUSTOM_LOAD_CONFIG_DETECTED=kn,!!(a=Rt.getMediaInformation())&&(a.customData=a.customData||{},a.customData.partnerData=kn,Rt.setMediaInformation(a),Rt.broadcastStatus(!0,null,{partnerData:kn}),Cn.PARTNER_DATA_UPDATED=kn,fe.apply(null,[null,"PARTNER_DATA_UPDATED"].concat(Cn.PARTNER_DATA_UPDATED)),!0)}function G(t,n){var a,r;n.recommendations&&(a={items:n.recommendations},anvr.config&&anvr.config.recommendations&&(a=e.merge(a,anvr.config.recommendations))),a&&(r=[a,t],Cn.RECOMMENDATIONS_AVAILABLE=r,fe.apply(null,[null,"RECOMMENDATIONS_AVAILABLE"].concat(r)))}function z(e){an("@deferPlay",e),Vn.deferredPlayCallbackId=setTimeout(function(){an("performing deferred play"),Vn.deferredPlayCallbackId=null,Rt.play()},e)}function q(e){an("loadAudio"),_(e)}function j(e){an("@load"),clearTimeout(Vn.idleTimerId),clearTimeout(Vn.getSchedule),Ut=null;var t=e.media||{},n=t.contentType,a=v(t),r=t.streamType===cast.framework.messages.StreamType.LIVE;if(t.contentId)if(a===Un.UNKNOWN)an("Load failed: unknown content type: "+n),tt(e);else switch(an("Loading: "+a),It(a,r),a){case Un.AUDIO:q(e);break;case Un.VIDEO:k(e)}else an("Load failed: no content"),tt(e)}function Y(e){Vn.deferredPlayCallbackId&&(an("Cancelled deferred playback: "+e),clearTimeout(Vn.deferredPlayCallbackId),Vn.deferredPlayCallbackId=null)}function J(e){return e&&e.metadata&&e.metadata.title?"Now Casting: "+e.metadata.title:e?"Now Casting":"Ready To Cast"}function W(e){an("@onCustomView"),document.body.innerHTML=e,X()}function Q(e){an("@onCustomViewError",e)}function $(){for(var t,n=document.getElementsByTagName("script"),a=0,r=n.length;a<r;a++)if(n[a].getAttribute("data-view-url")){t=n[a].getAttribute("data-view-url");break}an("@init",t),t?e.download(t,null,W,Q):X()}function X(){var e,t=new cast.framework.CastReceiverOptions,n=new cast.framework.PlaybackConfig;if(Mt=cast.framework.CastReceiverContext.getInstance(),Rt=Mt.getPlayerManager(),bt=Rt.getBreakManager(),Ot=Rt.getQueueManager(),an("@init"),It(Un.UNKNOWN,!1),f(bn.LAUNCHING),ee(),Z(),"undefined"==typeof anvr||anvr.config||(anvr.config={debug:!0,videoPlaceholderId:"video-placeholder"}),anvr.config.debug?(Mt.setLoggerLevel(cast.framework.LoggerLevel.DEBUG),nn.on(anvr.config.debug)):nn.off(),Zt=new a($n,anvr.config.plugins||{},{},nn,anvr.config,{dispatchError:pe,postWithWsse:null,getConfigValue:je,getDerivedMetadata:Ye}),cn[rn]=1,Mt.addCustomMessageListener(rn,de),anvr.config.customNamespaces&&"length"in anvr.config.customNamespaces)for(var r=0;r<anvr.config.customNamespaces.length;r++)e=anvr.config.customNamespaces[r],cn[e]=1,Mt.addCustomMessageListener(e,_e.bind(null,e));n.manifestRequestHandler=P,n.segmentRequestHandler=L,t.playbackConfig=n,t.disableIdleTimeout=!0,Mt.start(t),console.log(Rt.getPlaybackConfig())}function Z(){Mt&&Rt&&(Mt.addEventListener(cast.framework.system.EventType.READY,he),Mt.addEventListener(cast.framework.system.SENDER_DISCONNECTED,Ae),Mt.addEventListener(cast.framework.system.SHUTDOWN,Ee),Mt.addEventListener(cast.framework.system.SENDER_CONNECTED,Te),Mt.addEventListener(cast.framework.system.VISIBILITY_CHANGED,ye),Mt.setApplicationState(J()),Rt.addEventListener(cast.framework.events.EventType.ERROR,rt),Rt.addEventListener(cast.framework.events.EventType.PLAYING,lt),Rt.addEventListener(cast.framework.events.EventType.PAUSE,ut),Rt.addEventListener(cast.framework.events.EventType.ENDED,ht),Rt.addEventListener(cast.framework.events.EventType.TIME_UPDATE,Et),Rt.addEventListener(cast.framework.events.EventType.SEEKING,At),Rt.addEventListener(cast.framework.events.EventType.SEEKED,Tt),Rt.addEventListener(cast.framework.events.EventType.BUFFERING,ot),Rt.addEventListener(cast.framework.events.EventType.LOADED_METADATA,_t),Rt.addEventListener(cast.framework.events.EventType.REQUEST_LOAD,Ue),Rt.addEventListener(cast.framework.events.EventType.ID3,yt),Rt.addEventListener(cast.framework.events.EventType.MEDIA_STATUS,ie),Rt.addEventListener(cast.framework.events.EventType.PLAYER_PRELOADING,be),Rt.addEventListener(cast.framework.events.EventType.PLAYER_LOAD_COMPLETE,Qe),Rt.addEventListener(cast.framework.events.EventType.BITRATE_CHANGED,$e),Rt.addEventListener(cast.framework.events.EventType.REQUEST_STOP,et),Rt.addEventListener(cast.framework.events.EventType.REQUEST_QUEUE_LOAD,Le),Rt.addEventListener(cast.framework.events.EventType.REQUEST_QUEUE_UPDATE,Se),Rt.addEventListener(cast.framework.events.EventType.REQUEST_QUEUE_REMOVE,ke),Rt.addEventListener(cast.framework.events.EventType.REQUEST_QUEUE_REORDER,De),anvr.config.useCafAdBreaks&&(Rt.addEventListener(cast.framework.events.EventType.BREAK_STARTED,Me),Rt.addEventListener(cast.framework.events.EventType.BREAK_ENDED,Ne),Rt.addEventListener(cast.framework.events.EventType.BREAK_CLIP_STARTED,we),Rt.addEventListener(cast.framework.events.EventType.BREAK_CLIP_ENDED,Pe)),Rt.setMessageInterceptor(cast.framework.messages.MessageType.LOAD,te),Rt.setMessageInterceptor(cast.framework.messages.MessageType.LOAD_BY_ENTITY,ne),Rt.setMessageInterceptor(cast.framework.messages.MessageType.SET_CREDENTIALS,ae),Rt.setMessageInterceptor(cast.framework.messages.MessageType.USER_ACTION,re),Rt.setMessageInterceptor(cast.framework.messages.MessageType.PLAY,Ze),Rt.setMessageInterceptor(cast.framework.messages.MessageType.SEEK,Xe),Rt.setMessageInterceptor(cast.framework.messages.MessageType.EDIT_TRACKS_INFO,Je),Rt.setMessageInterceptor(cast.framework.messages.MessageType.MEDIA_STATUS,nt),Rt.setMessageInterceptor(cast.framework.messages.MessageType.QUEUE_INSERT,Re),Rt.setMediaPlaybackInfoHandler(at))}function ee(){var e=cast.framework.events.DetailedErrorCode;Mn[e.MEDIAKEYS_UNKNOWN]=1,Mn[e.MEDIA_DECODE]=1,Mn[e.MEDIA_SRC_NOT_SUPPORTED]=1,Mn[e.SOURCE_BUFFER_FAILURE]=1,Mn[e.HLS_SEGMENT_PARSING]=1,Mn[e.DASH_NO_INIT]=1,Mn[e.SMOOTH_NO_MEDIA_DATA]=1,Mn[e.SEGMENT_UNKNOWN]=1,Nn[e.MEDIAKEYS_UNKNOWN]=1,Nn[e.MEDIAKEYS_NETWORK]=1,Nn[e.MEDIAKEYS_UNSUPPORTED]=1,Nn[e.MEDIAKEYS_WEBCRYPTO]=1,Nn[e.HLS_NETWORK_NO_KEY_RESPONSE]=1,Nn[e.HLS_NETWORK_KEY_LOAD]=1,wn[e.MEDIA_NETWORK]=1,wn[e.NETWORK_UNKNOWN]=1,wn[e.SEGMENT_NETWORK]=1,wn[e.HLS_NETWORK_INVALID_SEGMENT]=1,wn[e.DASH_NETWORK]=1,wn[e.SMOOTH_NETWORK]=1,Pn[e.HLS_NETWORK_MASTER_PLAYLIST]=1,Pn[e.HLS_NETWORK_PLAYLIST]=1,Pn[e.MANIFEST_UNKNOWN]=1,Pn[e.HLS_MANIFEST_MASTER]=1,Pn[e.HLS_MANIFEST_PLAYLIST]=1,Pn[e.DASH_MANIFEST_UNKNOWN]=1,Pn[e.DASH_MANIFEST_NO_PERIODS]=1,Pn[e.DASH_MANIFEST_NO_MIMETYPE]=1,Pn[e.DASH_INVALID_SEGMENT_INFO]=1,Pn[e.SMOOTH_MANIFEST]=1}function te(e){return new Promise(function(t,n){var a=Qn[e.requestId];a&&a.requestData?(t(a.requestData),delete Qn[e.requestId]):Qn[e.requestId]={resolve:t}})}function ne(e){an("@loadByEntityMessageInterceptor");var t=new cast.framework.messages.LoadRequestData;t.autoplay=!0,t.currentTime=0;var n=new cast.framework.messages.MediaInformation;return n.streamType=cast.framework.messages.StreamType.BUFFERED,n.contentId=e.entity,n.metadata={metadataType:2,title:e.entity},t.media=n,an("@loadByEntityMessageInterceptor",e,t),Rt.load(t),null}function ae(e){an("@setCredentialsMessageInterceptor",e&&e.credentials);var t;if("string"==typeof e.credentials){try{t=JSON.parse(e.credentials)}catch(e){console.error("Encountered an error while parsing credentials:",e),t={}}In={mvpd:t.mso_id,requestor:"GoogleHome",resource:t.resource_id,mvpdToken:t.play_media_token,mvpdTokenTimeStamp:Date.now()}}else In={};return e}function re(e){an("@userActionMessageInterceptor");var t,n=Rt.getMediaInformation(),a=n.streamType===cast.framework.messages.StreamType.LIVE;switch(a&&Cn&&"PROGRAM_CHANGED"in Cn&&Cn.PROGRAM_CHANGED.length?t=Cn.PROGRAM_CHANGED[0]:Cn.METADATA_LOADED.length&&(t=Cn.METADATA_LOADED[0]),e.userAction){case cast.framework.messages.UserAction.LIKE:fe.apply(null,[null,"USER_LIKE"].concat(t));case cast.framework.messages.UserAction.DISLIKE:fe.apply(null,[null,"USER_DISLIKE"].concat(t))}return e}function ie(e){var t=e&&e.mediaStatus;t&&("mediaSessionId"in t&&!(t.mediaSessionId in En)&&(En[t.mediaSessionId]={played:0}),t.playerState==cast.framework.messages.PlayerState.PLAYING&&(En[t.mediaSessionId].played=1)),an("@onMediaStatus",t,En)}function oe(e){return console.warn("[deprecated] The getCustomMessageBus API method has been deprecated. Please use the sendCustomMessage API method instead."),an("@getCustomMessageBus",e),null}function se(e,t,n){if(an("@sendCustomMessage",e,t,n),!(e in cn))return void pe(null,"RCVR022");Mt.sendCustomMessage(e,t,n)}function de(e){if(!e||!e.data)return void console.error("Received an invalid message:",e);switch(an("@onMessage",e.data,e.senderId),e.data.type){case"rpc":ce(e.senderId,e.data.content);break;case"verification":Jt==bn.IDLE&&f(bn.VERIFYING),ve(e.senderId,e.data.content)}}function ce(e,t){an("received rpc from",e,JSON.stringify(t,null,3)),t.name&&t.name in un&&un[t.name].bind(null,e).apply(null,t.args)}function le(e,t){jn[e]=t,qn[e]=e}function ue(e,t,n){Yn[e]={code:e,info:t,isCritical:n}}function pe(e,t,n){an("@dispatchError",t),t in Yn&&fe(e,qn.CHROMECAST_RECEIVER_ERROR,Yn[t].code,n||Yn[t].info,Yn[t].isCritical)}function fe(e,t,n){var a,r,i=Array.prototype.slice.call(arguments,2),o={name:t,time:nn&&nn.getTime?nn.getTime():"",info:jn[t],args:i},s=nn.getTime();if(an("Dispatching event",t,JSON.stringify(i),typeof nn),Mt)if(e)o.recipient=e,Mt.sendCustomMessage(rn,e,o);else for(a=Mt.getSenders(),o.recipient=a,r=0,len=a.length;r<len;r++)a[r]&&a[r].id&&Mt.sendCustomMessage(rn,a[r].id,o);if(anvr.listener){for(r=0,eLen=Jn.length;r<eLen;r++)anvr.listener(Jn[r]);Jn=[],anvr.listener(o)}else Jn.push(o);me(),Zt.sendBeacon(o.name,yn,i,s)}function me(t,n,a,r,i){var o;a||(a=yn.type&&"video"in yn.type?yn.type.video?"content":"ad":"content"),yn.type={},tn&&"currentTime"in tn?yn.timeIndex=tn.currentTime:Rt&&(yn.timeIndex=Rt.getCurrentTimeSec()),tn&&"totalTime"in tn&&"content"==tn.contentType?yn.duration=tn.totalTime:Nt&&(yn.duration=Nt.duration),"content"==a?(Nt&&(yn.duration=Nt.duration||0,yn.contentId=Nt.upload_id,yn.contentTitle=Ut?Ut.title:Nt.def_title,yn.contentDefinition=Ut?Ut.description:Nt.def_description,yn.videoType=Nt.duration>600?"Long Form":"Clip",yn.videoId=Nt.upload_id,yn.categories=Nt.categories instanceof Array?Nt.categories.join(","):Nt.categories,yn.tsPublished=Nt.ts_published,yn.primaryCategory=Nt.primary_category,yn.mcp_id=Nt.mcp_id,yn.owner_id=Nt.owner_id,yn.live=2==Nt.video_type,yn.video_type=Nt.video_type,yn.season=Nt.season,yn.group=Nt.group,yn.eventId=Bt&&Bt.event_id?Bt.event_id:yn.contentId,yn.startTime=Bt?Bt.ts_start:Nt.ts_start,yn.endTime=Bt?Bt.ts_end:Nt.ts_end,yn.ts_airdate=Bt?Bt.ts_airdate||Bt.ts_broadcast_start||Bt.ts_start:Nt.ts_airdate,yn.program_name=Bt?Bt.program_name:Ye(aa.CHROMECAST,"program_name",Bt?Bt.program_name:Nt.program_name),yn.episodeTitle=Bt&&Bt.custom_metadata_map?Bt.custom_metadata_map.rovi_episode_title:null,yn.episodeNumber=Bt&&Bt.custom_metadata_map?Bt.custom_metadata_map.rovi_episode_number:Nt.episode_no,yn.initialTitle=Nt.initialTitle,yn.chapterTitle=Nt.episodeTitle||Nt.def_title,yn.chapterIndex=tn&&"chapterIndex"in tn?tn.chapterIndex:yn.chapterIndex,yn.chapterStartTime=tn&&"startTime"in tn?tn.startTime:0,yn.chapterEndTime=tn&&"endTime"in tn?tn.endTime:Nt.duration,yn.lastContentTimeIndex=tn&&"number"==typeof tn.currentTime?tn.currentTime:Rt.getCurrentTimeSec()),yn.type.video=!0):(yn.type.video=!1,yn.duration=n||yn.duration,yn.adDuration=n||yn.adDuration,yn.videoType="Ad",yn.timeIndex=t||yn.timeIndex,yn.videoURL="Ad server",yn.adIndex=tn&&"adIndex"in tn?tn.adIndex:0,yn.adBreakIndex=tn&&"relativeAdBreakIndex"in tn?tn.relativeAdBreakIndex:0,yn.adTitle=void 0,yn.lastContentTimeIndex=tn&&void 0!==tn.startTime?tn.startTime:lastContentTimeIndex),Ut&&(yn.callsign=Bt.custom_metadata_map?Bt.custom_metadata_map.rovi_callsign:Nt.upload_id,yn.episode=Bt.custom_metadata_map.rovi_episode_number,yn.roviId=Bt.custom_metadata_map.rovi_id,yn.season=Bt.custom_metadata_map.rovi_season_number),yn.status=Ut&&Ut.mvpdAuthenticationNeeded?"Restricted":"Unrestricted",yn.playerId="ACRF",yn.playerType="ACRF",yn.playerName="ACRF",yn.screen="Fullscreen",yn.autoManual="Manual",yn.platform="Chromecast",o=e.prettifyDate((new Date).getTime()),yn.dayOfWeek=o.dayOfWeek,yn.day=o.day,yn.hours=o.hours,yn.minutes=o.minutes,yn.date=[o.month,o.day,o.year].join("/"),yn.version="1.5",yn.siteTitle=document.title,yn.mvpd=Vt&&Vt.mvpd||In&&In.mvpd||null,yn.bitrate=Rn}function ge(t){try{return JSON.parse(t)}catch(e){}var n;try{n=e.aesStdDecrypt("ecb",t,"98a5ad0983ef8977","base64")}catch(e){return void pe(senderId,"RCVR001")}try{return JSON.parse(n)}catch(e){return void pe(senderId,"RCVR002")}}function ve(t,n){an("@verifySender",n);var a=ge(n),r=!1;an("verifySender verification object:",JSON.stringify(a,null,3)),pn[t]={},a&&a.user&&a.api&&(pn[t].accessKey=a.user.anvkey,pn[t].token=null,pn[t].verified=!1,a.api.anvstk2?r=!0:(r=i.verify(a.user.anvkey,a.user.secret,a.api),pn[t].secret=a.user.secret)),r&&(pn[t].token=e.md5(e.createUUID()).slice(0,16),pn[t].verified=!0),fe(t,"VERIFICATION_STATUS",!!pn[t].verified,pn[t].token),pn[t].verified&&!hn.getConfig&&(hn.getConfig=!0,i.getConfig(pn[t].accessKey,pn[t].accessKey,Ke.bind(this,pn[t].accessKey),Ge)),pn[t].verified&&(fn[pn[t].accessKey]=pn[t].secret,Cn.CHROMECAST_QUEUE_UPDATED&&fe.apply(null,[t,"CHROMECAST_QUEUE_UPDATED"].concat(Cn.CHROMECAST_QUEUE_UPDATED)),Cn.CUSTOM_LOAD_CONFIG_DETECTED&&fe.apply(null,[t,"CUSTOM_LOAD_CONFIG_DETECTED"].concat(Cn.CUSTOM_LOAD_CONFIG_DETECTED)),Cn.METADATA_LOADED&&fe.apply(null,[t,"METADATA_LOADED"].concat(Cn.METADATA_LOADED)),Cn.PARTNER_DATA_UPDATED&&fe.apply(null,[t,"PARTNER_DATA_UPDATED"].concat(Cn.PARTNER_DATA_UPDATED)),Cn.PROGRAM_CHANGED&&fe.apply(null,[t,"PROGRAM_CHANGED"].concat(Cn.PROGRAM_CHANGED)),Cn.AD_BREAKS&&fe.apply(null,[t,"AD_BREAKS"].concat(Cn.AD_BREAKS)),Cn.RECOMMENDATIONS_AVAILABLE&&fe.apply(null,[t,"RECOMMENDATIONS_AVAILABLE"].concat(Cn.RECOMMENDATIONS_AVAILABLE)),Cn.CAPTION_STATUS&&fe.apply(null,[t,"CAPTION_STATUS"].concat(Cn.CAPTION_STATUS)),Cn.CAPTION_STYLE_SET&&fe.apply(null,[t,"CAPTION_STYLE_SET"].concat(Cn.CAPTION_STYLE_SET))),an("@verifySender current state",Jt),Jt!=bn.VERIFYING&&Jt!=bn.IDLE||f(pn[t].verified?bn.VERIFIED:bn.IDLE),an("@verifySender verified:",pn[t].verified),an("@verifySender senders:",JSON.stringify(pn,null,3))}function he(){an("@onReady"),anvr.onReady&&anvr.onReady(),f(bn.IDLE)}function Ee(e){an("@onShutdown",e)}function Ae(e){an("@onSenderDisconnected",Mt.getSenders().length,e.reason),0===Mt.getSenders().length&&e.reason===cast.framework.system.DisconnectReason.REQUESTED_BY_SENDER&&Mt.stop()}function Te(e){an("@onSenderConnected",e.senderId,e.userAgent,"total connected:",Mt.getSenders().length),ln=e.senderId}function _e(e,t){anvr.onCustomMessage&&anvr.onCustomMessage(e,t.senderId,t.data)}function ye(e){an("@onVisibilityChanged"),e.isVisible||(Rt.pause(),Rt.broadcastStatus(!1))}function Ie(e,t){for(var n,a,r={},i=[],o=0,s=t.length;o<s;o++)r[t[o].video||t[o].upload_id||t[o].id]=1;an("@removeDuplicateQueueItems videoLookUp",JSON.stringify(r,null,3));for(var d=0,c=e.length;d<c;d++)n=e[d],a=e[d].media.customData,an("@removeDuplicateQueueItems item",JSON.stringify(a,null,3)),an("@removeDuplicateQueueItems video:",a.video||a.upload_id||a.id,(a.video||a.upload_id||a.id)in r),(a.video||a.upload_id||a.id)in r||i.push(n);return i}function Se(e){an("@onQueueUpdate",e),setTimeout(Ce,on)}function De(e){an("@onQueueReorder",e),setTimeout(Ce,on)}function ke(e){an("@onQueueRemove",e),setTimeout(Ce,on)}function Ce(){var e=Ot.getItems();Yt=e.length>1?Ln.PLAYLIST:Ln.SINGLE;var t=Oe(e);an("@informQueueUpdate media queue",e);var n=[t];Cn.CHROMECAST_QUEUE_UPDATED=n,fe.apply(null,[null,"CHROMECAST_QUEUE_UPDATED"].concat(n))}function Re(e){var t=Oe(Ot.getItems()),n=Ie(e.items,t);return e.items=n,an("@queueInsertMessageInterceptor",e),n&&n.length?e:(an("@queueInsertMessageInterceptor items already exist in the queue"),null)}function be(e){if(an("@onPreload",e),"media"in e&&"customData"in e.media){var t=e.media.customData;an("NEXT_VIDEO",JSON.stringify(e.media.customData,null,3));fe(null,"NEXT_VIDEO",{id:t.video||t.upload_id,title:t.title||t.def_title,description:t.description||t.def_description,src_image_url:t.thumbnail||t.src_image_url||t.src_logo_url},10)}}function Oe(e){for(var t,n,a,r=[],i=0,o=e.length;i<o;i++)n=e[i].media.customData,a=e[i].media.contentId,ra[a]&&(n.encrypted||!n.title&&!n.def_title)&&(an("encrypted/missing metadata detected, using cached videoJSON instead for",a),n=ra[a]),t={queueIndex:e[i].itemId,id:n.video||n.id||n.upload_id,def_title:n.title||n.def_title,def_description:n.description||n.def_description,src_image_url:n.src_image_url||n.src_logo_url||n.thumbnail,accessKey:Vt.accessKey,token:Vt.token},r.push(t);return r}function Me(e){an("@onBreakStarted"),ta=0}function Ne(e){an("@onBreakEnded"),ta=0}function we(e){an("@onBreakClipStarted"),ea=e.breakClipId}function Pe(e){an("@onBreakClipEnded"),ea=null}function Le(e){}function xe(t){an("evaluateLoadByEntity");var n,a,r,i,o;if(t.requestData&&t.requestData.media){if(t.requestData.media.customData)return!1;if(n=e.getUrlParts(t.requestData.media.contentId),n.path&&n.path.indexOf("play")>-1)return r=ln,a=e.getParameterByName("anvack",t.requestData.media.contentId),o=n.file,i=e.getParameterByName("secKey",t.requestData.media.contentId),t.requestData.media.customData={accessKey:a,video:o,secretKey:i},pn[r]=pn[r]||{accessKey:a,secret:i,verified:!0,token:"GOOGLE_HOME_TOKEN"},pn.local=pn[r],f(bn.VERIFIED),!0}return!1}function Ue(t){an("@onLoad",t);var n,a=t.requestData,r=a.senderId||t.senderId;if(a.senderId=r,Ft=r,Gn=!1,An=!1,Tn=!1,yn={},Bt=null,Ut=null,wt=null,Pt=null,Gt=null,Rn=null,zt=!1,tn={},delete Cn.PROGRAM_CHANGED,delete Cn.METADATA_LOADED,delete Cn.AD_BREAKS,xe(t),"media"in a&&"customData"in a.media)if(a.media.textTrackStyle&&(Kt=a.media.textTrackStyle,Cn.CAPTION_STYLE_SET=[Kt],fe.apply(null,[null,"CAPTION_STYLE_SET",Kt])),"object"==typeof a.media.customData&&"encrypted"in a.media.customData&&(kn=e.merge(kn,a.media.customData),a.media.customData=a.media.customData.encrypted,delete kn.encrypted,Cn.CUSTOM_LOAD_CONFIG_DETECTED=kn,fe.apply(null,[null,"CUSTOM_LOAD_CONFIG_DETECTED",kn]),fe(null,"USER_PLAY")),"string"==typeof a.media.customData)gn.onVideoJson=Ue,vn.onVideoJson=arguments,a.media.customData=o(r,a.media.customData),Vt=e.deepCopy(a.media.customData),an("decrypted load payload",JSON.stringify(a.media.customData,null,3)),(a.media.customData.video||a.media.customData.xUrl)&&a.media.customData.accessKey?(an("processing encrypted config for tkx-flow"),Ve(a.media.customData,r)):a.media.customData.url?(an("processing encrypted config for direct url"),a.media.contentId=a.media.customData.url,a.media.streamType=a.media.customData.live?cast.framework.messages.StreamType.LIVE:cast.framework.messages.StreamType.BUFFERED,a.media.customData={upload_id:"external",def_title:a.media.customData.title,def_description:a.media.customData.description,src_image_url:a.media.customData.thumbnail||a.media.customData.poster,video_type:a.media.customData.live?"2":"1"}):!a.media.customData.accessKey&&a.media.customData.video&&a.media.customData.mcp&&(an("processing encrypted config for non-tkx flow"),a.media.customData=a.media.customData.videoJson);else if("object"==typeof a.media.customData){if((a.media.customData.video||a.media.customData.xUrl)&&a.media.customData.accessKey)return gn.onVideoJson=Ue,vn.onVideoJson=arguments,Vt=e.deepCopy(a.media.customData),an("processing encrypted config for tkx-flow"),void Ve(a.media.customData,r);if(a.media.customData.url)an("loading external url"),Vt=e.deepCopy(a.media.customData),a.media.contentId=a.media.customData.url,a.media.streamType=a.media.customData.live?cast.framework.messages.StreamType.LIVE:cast.framework.messages.StreamType.BUFFERED,a.media.customData={upload_id:"external",def_title:a.media.customData.title,def_description:a.media.customData.description,src_image_url:a.media.customData.thumbnail||a.media.customData.poster,video_type:a.media.customData.live?"2":"1"};else if(!a.media.customData.accessKey&&a.media.customData.video&&a.media.customData.mcp){if(an("loading for non-tkx flow"),!a.media.customData.videoJson)return gn.onVideoJson=Ue,vn.onVideoJson=arguments,void Be(a.media.customData.mcp,a.media.customData.video);a.media.customData=a.media.customData.videoJson}Y("new media is loaded"),j(a),n=Ot.getItems(),Yt=n.length>1?Ln.PLAYLIST:Ln.SINGLE;var i=[Oe(n)];Cn.CHROMECAST_QUEUE_UPDATED=i,fe.apply(null,[null,"CHROMECAST_QUEUE_UPDATED"].concat(i))}}function Be(t,n){var a={sgun:"//sgun-mcp-download.s3.amazonaws.com/videos_mcp_dev_3247/",test:"//s3.amazonaws.com/qa.up.anv.bz/videos/",qa:"//mcp-download.s3.amazonaws.com/videos-qaanv-mcp/"};e.getJsonp(a[t]+n+".js")}function Ve(t,n){var a,r={};an("@fetchVideoJson config.accessKey in remoteConfigs?",t.accessKey,t.accessKey in mn),an("@fetchVideoJson",JSON.stringify(t,null,3),JSON.stringify(mn,null,3)),t.accessKey&&(t.accessKey in mn?(an("@fetchVideoJson getting videoJson for sender",n,"among",JSON.stringify(pn,null,3)),a=n&&n.length?pn[n].secret:fn[t.accessKey],t.accessKey in{fs2go_att_att_web_prod_1042dddd089a05438b6a08f972941176f699ffd8:1,fs2go_fs2go_go_web_prod_ead4b0eec7460c1a07783808db21b49cf1f2f9a7:1}&&-1==t.video.indexOf("e")&&(t.video="e"+t.video),"accessControl"in t&&(r.accessControl=e.deepCopy(t.accessControl)),In&&In.mvpdTokenTimeStamp&&Date.now()-In.mvpdTokenTimeStamp<Sn&&(r.provider=In.mvpd,r.requestor=In.requestor,r.resource=In.resource,r.maxRating=In.maxRating,r.token=In.mvpdToken),i.getVideoJSON(t.accessKey,a,t,r,Fe,He)):(an("@fetchVideoJson getting config first","!inProgressItems.getConfig",hn.getConfig,"senderId",n),gn.onConfig=Ve,vn.onConfig=arguments,hn.getConfig||(hn.getConfig=!0,i.getConfig(t.accessKey,pn[n].accessKey,Ke.bind(this,t.accessKey),Ge))))}function Fe(t){an("@onVideoJson");var n=e.deepCopy(vn.onVideoJson[0].requestData.media.customData);delete gn.onConfig,delete vn.onConfig,ra[t.upload_id]=t,gn.onVideoJson&&(an("@onVideoJson",vn.onVideoJson[0],vn.onVideoJson[0].requestData.media.customData.src_image_url,t.src_image_url),vn.onVideoJson[0].requestData.media.customData=t,vn.onVideoJson[0].requestData.media.customData.src_image_url=n.src_image_url||n.poster||n.thumbnail||t.src_image_url,vn.onVideoJson[0].requestData.media.streamType="2"==t.video_type?cast.framework.messages.StreamType.LIVE:cast.framework.messages.StreamType.BUFFERED,an("@onVideoJson",vn.onVideoJson[0],vn.onVideoJson[0].requestData.media.customData.src_image_url,t.src_image_url),gn.onVideoJson.apply(null,vn.onVideoJson))}function He(e){an("@onVideoJsonError",e),delete gn.onConfig,delete vn.onConfig,pe(null,"RCVR405",e.user_msg),Fe(e)}function Ke(e,t){an("@onConfig",JSON.stringify(t,null,3),JSON.stringify(arguments,null,3)),Ht=e,hn.getConfig=!1,mn[e]=t,anvr.config.useSenderPluginConfig&&ze(e,t),an("@onConfig accessKey in remoteConfigs?",e,e in mn),gn.onConfig&&gn.onConfig.apply(null,vn.onConfig)}function Ge(e){}function ze(t,n){var a=n.plugins,r=qe(a);mn[t].plugins=e.merge(a,r);for(var i in r)r.hasOwnProperty(i)&&Zt.updatePlugin(i,mn[t].plugins[i],{},!1)}function qe(e){an("@mobilePluginConfigAdaptor",JSON.stringify(e,null,3));var t,n,a={heartbeat:{tracking_server:{label:"customTrackingServer",filter:function(e){return e.replace(/(http)(s)*:\/\//,"")}},publisher:"publisherId",job_id:"jobId",video_playername:"playerName"}},r={};for(var i in e)if(e.hasOwnProperty(i))for(var o in e[i])e[i].hasOwnProperty(o)&&(t=o,n=e[i][o],i in a&&o in a[i]&&("object"==typeof a[i][o]?(t=a[i][o].label,n="function"==typeof a[i][o].filter?a[i][o].filter(e[i][o]):e[i][o]):"string"==typeof a[i][o]&&(t=a[i][o])),r[i]=r[i]||{},r[i][t]=n);return an("@mobilePluginConfigAdaptor",JSON.stringify(r,null,3)),r}function je(e,t,n){var a,r,i=e+t;if(e&&t){a=i.split(":");for(var o=0,s=a.length;o<s;o++){if(!(r=r||mn[Ht]))return n;if(!r)return n;r=r[a[o]]}return r}return n}function Ye(e,t,n){var a,r,i,o="derivedMetadata$",s={},d=e+(t||"");if(e&&yn){a=d.split(":");for(var c=t?a.length:a.length-1,l=0,u=c;l<u;l++){if(!(r=r||mn[Ht]))return n;if(!r)return n;r=r[a[l]]}if(!t){for(var p in r)r.hasOwnProperty(p)&&(i=r[p],void 0!=yn[o+i]?s[p]=yn[o+i]:void 0!=yn[i]?s[p]=yn[i]:s[p]=i);return s}return void 0!=yn[o+r]?yn[o+r]:void 0!=yn[r]?yn[r]:r}return n}function Je(t){return an("@editTracksInfoMessageInterceptor"),t.textTrackStyle&&(Kt=e.deepCopy(t.textTrackStyle),Cn.CAPTION_STYLE_SET=[Kt],fe.apply(null,[null,"CAPTION_STYLE_SET",Kt])),t.language?u(null,t.language):t.activeTrackIds&&!t.activeTrackIds.length&&u(null,!1),t}function We(){an("onLoadSuccess")}function Qe(e){an("@onPlayerLoadComplete",e),We()}function $e(e){Rn=Math.floor(e.totalBitrate/1e3)}function Xe(e){var t=e.currentTime;if(an("@seekMessageInterceptor",arguments),en){anvr.config.useCafAdBreaks||(e.currentTime=en.translateToAbsoluteTime(e.currentTime));for(var n,a,r,i=e.currentTime,o={zones:en.getZones()},s=0,d=(new Date).getTime(),c=Rt.getCurrentTimeSec(),l=anvr.config&&"number"==typeof anvr.config.gracePeriod?1e3*anvr.config.gracePeriod:Dn,u=0;u<o.zones.length;u++)o.zones[u].start<=c&&c<o.zones[u].end&&(s=u);if(pt()&&!Kn)return null;if(na.lastAdTimeStamp=na.lastAdTimeStamp||0,!anvr.config.useCafAdBreaks&&e.currentTime>c)if(an("@adPolicy","evaluating",d,na.lastAdTimeStamp,d-na.lastAdTimeStamp,d-na.lastAdTimeStamp>l),d-na.lastAdTimeStamp>l){an("@adPolicy","detected a seek beyond grace period",JSON.stringify(o,null,3));for(var u=s+1,p=o.zones.length;u<p;u++)if(u&&an("@adPolicy",u,o.zones[u].type,i,o.zones[u].start,o.zones[u].end),i>o.zones[u].start&&i<o.zones[u].end&&u){for(r=u;-1!=--r;)if(an("@adPolicy evaluating...",r),"ad"==o.zones[r].type&&!o.zones[r].watched){an("@adPolicy selected",r),n=o.zones[r].start,a=o.zones[r].end,an("@adPolicy","previousAdStartIndex",n),an("@adPolicy","previousAdEndIndex",a);break}break}n&&(na.deferredSeekPositionAfterAd=t,na.trackedAdEnd=a,an("@adPolicy",JSON.stringify(na,null,3)),e.currentTime=n)}else an("@adPolicy skipping ad policy, recently shown already")}return anvr.onSeekRequested&&(e.currentTime=anvr.onSeekRequested(e.currentTime)),an("@seekMessageInterceptor compare",e),Kn=!1,e}function Ze(e){return an("@playMessageInterceptor"),Gn?null:e}function et(e){an("@onStop"),zt=!1,Y("media is stopped"),f(bn.IDLE)}function tt(e){an("@onLoadMetadataError"),f(bn.IDLE)}function nt(e){var t,n,a;if(an("@mediaStatusMessageInterceptor",e),an("@mediaStatusMessageInterceptor: playerState="+e.playerState+", state="+Jt),an("@mediaStatusMessageInterceptor: idleReason="+e.idleReason),an("@mediaStatusMessageInterceptor: mode="+Yt),e.playerState===cast.framework.messages.PlayerState.PAUSED&&bn.BUFFERING,e.playerState===cast.framework.messages.PlayerState.IDLE&&"INTERRUPTED"==e.idleReason&&(e.playerState=Jt.toUpperCase()),e.playerState===cast.framework.messages.PlayerState.IDLE&&"FINISHED"==e.idleReason&&anvr.config.recommendations&&Nt.recommendations&&Yt==Ln.SINGLE?e.playerState=bn.RECOMMENDATIONS.toUpperCase():e.playerState===cast.framework.messages.PlayerState.IDLE&&"FINISHED"==e.idleReason&&(anvr.config.recommendations&&Nt.recommendations||Yt==Ln.PLAYLIST)&&(an("evaluate onQueueEnded sequence"),e.playerState=cast.framework.messages.PlayerState.BUFFERING),(e.playerState===cast.framework.messages.PlayerState.IDLE&&"FINISHED"==e.idleReason&&!En[e.mediaSessionId]||En[e.mediaSessionId]&&!En[e.mediaSessionId].played)&&(an("@mediaStatusMessageInterceptor detected IDLE state with FINISHED reason prior to playback, cancelling idle reason"),e.idleReason=null),e.breakStatus&&e.breakStatus.breakId&&e.breakStatus.breakClipId&&e.breakStatus.breakClipId in Xn){n=Xn[e.breakStatus.breakClipId],t=Zn[n.breakId],e.breakStatus.breakId=t.id,e.breakStatus.breakDuration=t.duration,a=0;for(var r=0;r<t.breakClipIds.length;r++)if(t.breakClipIds[r]==n.id){a=r;break}e.breakStatus.adIndex=a,e.breakStatus.totalAds=t.breakClipIds.length}return e}function at(e,t){var n,a;return Nt&&Nt.published_urls&&(a=E(Nt,!0)),Vt&&Vt.drm&&Vt.drm.servers&&Vt.drm.servers["com.widevine.alpha"]?n=Vt.drm.servers["com.widevine.alpha"]:a&&a.drmLicenseUrl&&(n=a.drmLicenseUrl),t.licenseUrl=n,t.protectionSystem=n?cast.framework.ContentProtection.WIDEVINE:cast.framework.ContentProtection.NONE,t}function rt(e){an("@onError"),console.error("Encountered an error with error code:",e);var t,n=!1;switch(ct(e.detailedErrorCode)){case On.PLAYBACK:pe(null,"RCVR300","Error related to media playback: "+e.detailedErrorCode),f(bn.IDLE);break;case On.KEY:pe(null,"RCVR403","Error fetching the keys or decrypting the content: "+e.detailedErrorCode),f(bn.IDLE);break;case On.NETWORK:n=!0,pe(null,"RCVR400","Network error: "+e.detailedErrorCode);break;case On.MANIFEST:pe(null,"RCVR401","Error loading or parsing the manifest: "+e.detailedErrorCode),f(bn.IDLE)}if(n&&(t=Rt.getMediaInformation(),contentUrl=t&&(t.contentUrl||t.contentId),contentUrl&&0==Rt.getCurrentTimeSec)){if(!Fn[contentUrl])return Fn[contentUrl]=!0,Hn=!0,Rt.load(dt()),void(Vn.deferredPlayCallbackId||z(100));delete Fn[contentUrl],delete Vt.masterWhiteListed,Hn=!0}}function it(){var e,t=l();if(!t||!t.buffered||!t.buffered.length)return-1;e=t.currentTime;for(var n=0;n<t.buffered.length;n++)if(t.buffered.start(n)<=e&&e<=t.buffered.end(n))return n;return-1}function ot(){an("@onBuffering");var e,t=l();t&&((e=it())<0||(e<t.buffered.length-1&&t.buffered.end(e)-t.currentTime<sn&&(t.currentTime=t.buffered.start(e+1)),clearTimeout(Vn.stalledPlayback),Vn.stalledPlayback=setTimeout(st.bind(null,t.currentTime),dn)))}function st(e){var t=l(),n=it();Vn.stalledPlayback=null,!t||n<-1||e!=t.currentTime||Rt.getPlayerState()==cast.framework.messages.PlayerState.PAUSED||Math.abs(t.buffered.start(n)-t.currentTime)<sn&&t.currentTime+.5<t.buffered.end(n)&&(an("@checkForStalledPlayback nudging playhead forward"),t.currentTime+=.5)}function dt(){var e=new cast.framework.messages.LoadRequestData;return e.media.contentId="Stream from Anvato Player SDK",e.media.customData=Vt,e.senderId=Ft,e}function ct(e){return e in Mn?On.MEDIA_PLAYBACK:e in Nn?On.KEY:e in wn?On.NETWORK:e in Pn?On.MANIFEST:On.OTHER}function lt(){an("onPlaying"),Hn=!1,Y("media is already playing"),f(bn.PLAYING),_n&&(fe(null,"USER_RESUME"),_n=!1)}function ut(){an("onPause"),Y("media is paused");var e=Jt===bn.IDLE,t=Rt.getCurrentTimeSec()===Rt.getDurationSec();e||t||(f(bn.PAUSED),_n||(fe(null,"USER_PAUSE"),_n=!0)),vt()}function pt(){var e,t,n=Rt.getCurrentTimeSec();if(anvr.config.useCafAdBreaks)return!(null==Rt.getBreakClipCurrentTimeSec());if(en){e={zones:en.getZones()};for(var a=0;a<e.zones.length;a++)if(e.zones[a].start<=n&&n<e.zones[a].end){t=e.zones[a];break}return!!t&&"ad"==t.type}return!1}function ft(){if(anvr.config.useCafAdBreaks&&pt()&&ea){var e=N(ea);if(e){for(var t=0,n=0;n<e.breakClipIds.length;n++){if(e.breakClipIds[n]==ea){t+=Rt.getBreakClipCurrentTimeSec();break}t+=Xn[e.breakClipIds[n]].duration}ta=Math.max(ta,t)}}}function mt(){if(!en||!anvr.config.useCafAdBreaks)return Rt.getDurationSec();var e=Rt.getDurationSec();for(var t in Zn)e+=Zn[t].duration;return e}function gt(){var e=0,t=N(ea);return en&&anvr.config.useCafAdBreaks?ea&&null!=Rt.getBreakClipCurrentTimeSec()&&t?(t.position>0&&(e=en.translateToAbsoluteTime(t.position-.01)),ft(),e+=ta):en.translateToAbsoluteTime(Rt.getCurrentTimeSec()):Rt.getCurrentTimeSec()}function vt(){if(!x()){var e=Rt.getCurrentTimeSec(),t=Rt.getDurationSec();if(isNaN(t)&&!e)return;en&&Nt&&"2"!=Nt.video_type?(isNaN(t)&&an("curTime",e),e=gt(),t=mt(),tn=en.translateToPresentation(e,t)):tn={currentTime:e,totalTime:t,contentType:"content"},anvr.onTimeUpdated&&tn.currentTime&&anvr.onTimeUpdated(tn.currentTime,tn.totalTime,tn.contentType||"content",tn.relativeAdBreakIndex,tn.adIndex,tn.totalAds),tn.contentType=tn.contentType||"content",
me(tn.currentTime,tn.totalTime,tn.contentType||"content",tn.relativeAdBreakIndex,tn.chapterIndex),en&&zt&&en.updateState(tn),Gt&&tn.contentType==Gt||(Gt=tn.contentType||"content",Tn||(fe(null,"PLAYING_START",yn.contentId),Tn=!0),"ad"!=tn.contentType&&fe(null,"VIDEO_STARTED",yn.contentId),yn.completed=!1),tn.currentTime>0&&tn.totalTime>0&&Math.abs(tn.totalTime-tn.currentTime)<1&&!yn.completed&&("ad"!=tn.contentType?fe(null,"VIDEO_COMPLETED",yn.contentId):(en&&(en.setCurrentZoneStatus(),an("@updateProgress",JSON.stringify(en.getZones(),null,3))),na.lastAdTimeStamp=(new Date).getTime(),an("@adPolicy evaluating deferredSeekPositionAfterAd",na.deferredSeekPositionAfterAd,Math.abs(na.trackedAdEnd-e)<1),na.deferredSeekPositionAfterAd&&Math.abs(na.trackedAdEnd-e)<1&&(Dt(na.deferredSeekPositionAfterAd),an("@adPolicy","applied deferred seek to",na.deferredSeekPositionAfterAd),delete na.deferredSeekPositionAfterAd)),yn.completed=!0),anvr.config.useCafAdBreaks&&pt()&&Rt.broadcastStatus(!1)}}function ht(){an("onEnded");var e;anvr.config.recommendations&&Nt.recommendations&&Yt==Ln.SINGLE?(e=bn.RECOMMENDATIONS,fe(null,"RECOMMENDATIONS_VIEW_REQUESTED")):e=(Ln.PLAYLIST,bn.DONE),f(e)}function Et(){Jt!==bn.BUFFERING&&Jt!==bn.LOADING||Hn||f(bn.PLAYING),vt()}function At(){an("onSeekStart"),fe(null,"SEEK_STARTED")}function Tt(){an("onSeekEnd"),fe(null,"SEEK_ENDED")}function _t(){Rt.broadcastStatus(!0)}function yt(e){for(var t,n="",a=0,r=e.segmentData.length;a<r;a++)n+=String.fromCharCode(e.segmentData[a]);t={segmentData:n,timestamp:e.timestamp},an("@onId3",JSON.stringify(t))}function It(e,t){an("@setType: "+e,t),$t=e,e!=Un.UNKNOWN&&fe(null,"RECEIVER_TYPE_SET",t?"live":"vod")}function St(e,t){var n,a;an("@loadRecommendation",JSON.stringify(t,null,3)),fe(null,"RECOMMENDATION_SELECTED",t),a=new cast.framework.messages.MediaInformation,a.contentId="Stream from Anvato Player SDK",a.contentType="application/x-mpegurl",a.customData={video:t.mcpid,accessKey:pn[e].accessKey,mcp:pn[e].accessKey?void 0:"qa"},Rt.setMediaInformation(a,!1),n=new cast.framework.messages.LoadRequestData,n.senderId=e,n.media=a,n.autoplay=!0,Rt.load(n)}function Dt(e){an("@seekTo (receiver initiated)",e),Kn=!0,Rt.seek(e)}function kt(){var e,t=document.getElementsByTagName("video");t&&t.length&&(e=t[0],e.pause(),Gn=!0,Rt.broadcastStatus(!0,null))}function Ct(){var e,t=document.getElementsByTagName("video");t&&t.length&&(e=t[0],e.play(),Gn=!1,Rt.broadcastStatus(!0,null))}var Rt,bt,Ot,Mt,Nt,wt,Pt,Lt,xt,Ut,Bt,Vt,Ft,Ht,Kt,Gt,zt,qt,jt,Yt,Jt,Wt,Qt,$t,Xt,Zt,en,tn,nn=n||new t(!0,!0,100),an=nn.getLogFn("Receiver"),rn="urn:x-cast:com.anvato.chromecast",on=1e3,sn=1,dn=2e3,cn={},ln=null,un={},pn={},fn={},mn={},gn={},vn={},hn={},En={},An=!1,Tn=!1,_n=!1,yn={},In={},Sn=3e4,Dn=3e4,kn={},Cn={},Rn=null,bn={LAUNCHING:"launching",VERIFYING:"verifying",VERIFIED:"verified",LOADING:"loading",BUFFERING:"buffering",PLAYING:"playing",PAUSED:"paused",RECOMMENDATIONS:"recommendations",DONE:"done",IDLE:"idle"},On={PLAYBACK:"playback",KEY:"key",NETWORK:"network",MANIFEST:"manifest",OTHER:"other"},Mn={},Nn={},wn={},Pn={},Ln={PLAYLIST:"playlist",SINGLE:"single"},xn=[],Un={AUDIO:"audio",VIDEO:"video",UNKNOWN:"unknown"},Bn={LAUNCHING:3e5,LOADING:3e5,PAUSED:12e5,DONE:3e5,IDLE:3e5},Vn={},Fn={},Hn=!1,Kn=!1,Gn=!1,zn=0,qn={},jn={},Yn={},Jn=[],Wn=[],Qn={},$n=new Mediator,Xn={},Zn={},ea=null,ta=0,na={},aa={CHROMECAST:"plugins:chromecast:mapping:"},ra={};return un.loadNext=s,un.loadLast=d,un.toggleCaption=u,un.loadRecommendation=St,function(){an("registering events"),le("RECEIVER_TYPE_SET","Chromecast player type has been set based on the content"),le("CHROMECAST_RECEIVER_ERROR","Chromecast receiver has thrown an error"),le("CHROMECAST_STATUS","Chromecast status has changed"),le("VERIFICATION_STATUS","Verification status has changed"),le("METADATA_LOADED","Program metadata is available"),le("PROGRAM_CHANGED","Program has changed"),le("SEEK_STARTED","A sender initiated a seek"),le("SEEK_ENDED","Sender initiated seek has been completed"),le("AD_BREAKS","Ad breaks have been detected in the stream"),le("RECOMMENDATIONS_AVAILABLE","Detected recommended videos based on the current video"),le("RECOMMENDATIONS_VIEW_REQUESTED","Recommendations view requested from connected players"),le("RECOMMENDATION_SELECTED ","A video from recommendations has been selected"),le("CAPTION_STATUS","Caption status has been updated"),le("CHROMECAST_QUEUE_UPDATED","Chromecast queue has been updated"),le("NEXT_VIDEO","Next video metadata is available"),le("CUSTOM_LOAD_CONFIG_DETECTED","Custom config accompanying the main (encrypted) load config detected"),le("PARTNER_DATA_UPDATED","The merged custom load config and partner data set via setPartnerData has been updated"),le("VIDEO_STARTED","The video started"),le("PLAYING_START","The playback has started"),le("VIDEO_COMPLETED","The video completed"),le("USER_PAUSE","The video has been paused by a sender"),le("USER_RESUME","The video has been resumed by a sender"),le("AD_STARTED","The ad started"),le("AD_COMPLETED","The ad completed"),le("AD_BREAK_STARTED","The ad break started"),le("AD_BREAK_COMPLETED","The ad break completed"),le("CAPTION_STYLE_SET","Caption style has been set by a sender (either while loading or after)"),le("USER_PLAY","Sender has sent an initial play request"),le("USER_LIKE","Sender has notified that the user liked the video"),le("USER_DISLIKE","Sender has notified that the user disliked the video")}(),function(){an("registering errors"),ue("RCVR001","Failed to decrypt the sender verification payload",!0),ue("RCVR002","Failed to parse the sender verification payload",!0),ue("RCVR010","Failed to decrypt the sender payload",!0),ue("RCVR011","Failed to parse the sender payload",!0),ue("RCVR020","Custom message bus associated with the provided namespace does not exist while attempting to call sendCustomMessage",!1),ue("RCVR021","Custom cast channel associated with the provided senderId does not exist while attempting to call sendCustomMessage",!1),ue("RCVR022","Custom namespace provided to sendCustomMessage was not registered in anvr.customNamespaces",!1),ue("RCVR030","The invoked remote method could not be located in the registered RPC methods",!1),ue("RCVR300","Error related to media playback",!0),ue("RCVR400","The requested media source could not be downloaded",!0),ue("RCVR401","Error loading or parsing the manifest",!0),ue("RCVR403","Error fetching the keys or decrypting the content",!0),ue("RCVR405","Generic video service error",!0),ue("RCVR500","video or xUrl is not specified to make videoJSON request",!0),ue("RCVR900","Schedule service returned an expired event",!1),ue("PLGNL001","PluginLoader encountered an error while loading the plugin",!1),ue("ADTR001","Failed to enable click through due to the missing tracking information",!1),ue("ADTR002","Failed to track ad event due to the missing tracking information",!1)}(),window.util=e,window.anvatoVideoJSONLoaded=function(e){Fe(e)},an("instantiated"),{init:$,getCustomMessageBus:oe,deferredSeekTo:Dt,sendCustomMessage:se,onStateTransitionCompleted:p,loadRecommendation:St,setPartnerData:K,block:kt,unblock:Ct}}return i}),t.config({baseUrl:"scripts",wrap:{startFile:"../parts/start.frag",endFile:"../parts/end.frag"}}),n("Main",["util","Logger","tveapi","Receiver","mediator"],function(e,t,n,a,r){var i=new t(e.getParameterByName("debug"),!0,100,!0),o=i.getLogFn("Main");window.anvr=window.anvr||{};var s=new n(i);anvr.instance=new a(i,s),anvr.init=anvr.instance.init,anvr.getCustomMessageBus=anvr.instance.getCustomMessageBus,anvr.sendCustomMessage=anvr.instance.sendCustomMessage,anvr.onStateTransitionCompleted=anvr.instance.onStateTransitionCompleted,anvr.loadRecommendation=anvr.instance.loadRecommendation,anvr.deferredSeekTo=anvr.instance.deferredSeekTo,anvr.setPartnerData=anvr.instance.setPartnerData,anvr.block=anvr.instance.block,anvr.unblock=anvr.instance.unblock,anvr.version="3",anvr.built="3",anvr.revision="3",o("initialized")}),t("Main")}();