/*
 ============== DO NOT ALTER ANYTHING BELOW THIS LINE ! ============

 Adobe Visitor API for JavaScript version: 1.3.5
 Copyright 1996-2013 Adobe, Inc. All Rights Reserved
 More info available at http://www.omniture.com
*/
function Visitor(k,s){if(!k)throw"Visitor requires Adobe Marketing Cloud Org ID";var a=this;a.version="1.3.5";var h=window,m=h.Visitor;h.s_c_in||(h.s_c_il=[],h.s_c_in=0);a._c="Visitor";a._il=h.s_c_il;a._in=h.s_c_in;a._il[a._in]=a;h.s_c_in++;var t=h.document,j=h.O;j||(j=null);var i=h.P;i||(i=!0);var p=h.N;p||(p=!1);a.C=function(a){var c=0,b,e;if(a)for(b=0;b<a.length;b++)e=a.charCodeAt(b),c=(c<<5)-c+e,c&=c;return c};a.m=function(a){var c="0123456789",b="",e="",f,g=8,h=10,i=10;if(1==a){c+="ABCDEF";for(a=
0;16>a;a++)f=Math.floor(Math.random()*g),b+=c.substring(f,f+1),f=Math.floor(Math.random()*g),e+=c.substring(f,f+1),g=16;return b+"-"+e}for(a=0;19>a;a++)f=Math.floor(Math.random()*h),b+=c.substring(f,f+1),0==a&&9==f?h=3:(1==a||2==a)&&10!=h&&2>f?h=10:2<a&&(h=10),f=Math.floor(Math.random()*i),e+=c.substring(f,f+1),0==a&&9==f?i=3:(1==a||2==a)&&10!=i&&2>f?i=10:2<a&&(i=10);return b+e};a.I=function(){var a;!a&&h.location&&(a=h.location.hostname);if(a)if(/^[0-9.]+$/.test(a))a="";else{var c=a.split("."),b=
c.length-1,e=b-1;1<b&&2>=c[b].length&&(2==c[b-1].length||0>",ac,ad,ae,af,ag,ai,al,am,an,ao,aq,ar,as,at,au,aw,ax,az,ba,bb,be,bf,bg,bh,bi,bj,bm,bo,br,bs,bt,bv,bw,by,bz,ca,cc,cd,cf,cg,ch,ci,cl,cm,cn,co,cr,cu,cv,cw,cx,cz,de,dj,dk,dm,do,dz,ec,ee,eg,es,eu,fi,fm,fo,fr,ga,gb,gd,ge,gf,gg,gh,gi,gl,gm,gn,gp,gq,gr,gs,gt,gw,gy,hk,hm,hn,hr,ht,hu,id,ie,im,in,io,iq,ir,is,it,je,jo,jp,kg,ki,km,kn,kp,kr,ky,kz,la,lb,lc,li,lk,lr,ls,lt,lu,lv,ly,ma,mc,md,me,mg,mh,mk,ml,mn,mo,mp,mq,mr,ms,mt,mu,mv,mw,mx,my,na,nc,ne,nf,ng,nl,no,nr,nu,nz,om,pa,pe,pf,ph,pk,pl,pm,pn,pr,ps,pt,pw,py,qa,re,ro,rs,ru,rw,sa,sb,sc,sd,se,sg,sh,si,sj,sk,sl,sm,sn,so,sr,st,su,sv,sx,sy,sz,tc,td,tf,tg,th,tj,tk,tl,tm,tn,to,tp,tt,tv,tw,tz,ua,ug,uk,us,uy,uz,va,vc,ve,vg,vi,vn,vu,wf,ws,yt,nd,".indexOf(","+
c[b]+","))&&e--;if(0<e)for(a="";b>=e;)a=c[b]+(a?".":"")+a,b--}return a};a.cookieRead=function(a){var a=encodeURIComponent(a),c=(";"+t.cookie).split(" ").join(";"),b=c.indexOf(";"+a+"="),e=0>b?b:c.indexOf(";",b+1);return 0>b?"":decodeURIComponent(c.substring(b+2+a.length,0>e?c.length:e))};a.cookieWrite=function(d,c,b){var e=a.cookieLifetime,f,c=""+c,e=e?(""+e).toUpperCase():"";b&&"SESSION"!=e&&"NONE"!=e?(f=""!=c?parseInt(e?e:0):-60)?(b=new Date,b.setTime(b.getTime()+1E3*f)):1==b&&(b=new Date,f=b.getYear(),
b.setYear(f+2+(1900>f?1900:0))):b=0;return d&&"NONE"!=e?(t.cookie=encodeURIComponent(d)+"="+encodeURIComponent(c)+"; path=/;"+(b?" expires="+b.toGMTString()+";":"")+(a.cookieDomain?" domain="+a.cookieDomain+";":""),a.cookieRead(d)==c):0};a.e=j;a.w=function(a,c){try{"function"==typeof a?a.apply(h,c):a[1].apply(a[0],c)}catch(b){}};a.L=function(d,c){c&&(a.e==j&&(a.e={}),void 0==a.e[d]&&(a.e[d]=[]),a.e[d].push(c))};a.l=function(d,c){if(a.e!=j){var b=a.e[d];if(b)for(;0<b.length;)a.w(b.shift(),c)}};a.j=
j;a.J=function(d,c,b){var e=0,f=0,g;if(c&&t){for(g=0;!e&&2>g;){try{e=(e=t.getElementsByTagName(0<g?"HEAD":"head"))&&0<e.length?e[0]:0}catch(h){e=0}g++}if(!e)try{t.body&&(e=t.body)}catch(i){e=0}if(e)for(g=0;!f&&2>g;){try{f=t.createElement(0<g?"SCRIPT":"script")}catch(l){f=0}g++}}!c||!e||!f?b&&b():(f.type="text/javascript",f.setAttribute("async","async"),f.src=c,e.firstChild?e.insertBefore(f,e.firstChild):e.appendChild(f),b&&(a.j==j&&(a.j={}),a.j[d]=setTimeout(b,a.loadTimeout)))};a.H=function(d){a.j!=
j&&a.j[d]&&(clearTimeout(a.j[d]),a.j[d]=0)};a.D=p;a.F=p;a.isAllowed=function(){if(!a.D&&(a.D=i,a.cookieRead(a.cookieName)||a.cookieWrite(a.cookieName,"T",1)))a.F=i;return a.F};a.a=j;a.c=j;var w=a.V;w||(w="MC");var n=a.Y;n||(n="MCMID");var x=a.X;x||(x="MCCIDH");var y=a.W;y||(y="MCAS");var v=a.T;v||(v="A");var l=a.Q;l||(l="MCAID");var u=a.U;u||(u="AAM");var r=a.S;r||(r="MCAAMLH");var o=a.R;o||(o="MCAAMB");var q=a.Z;q||(q="NONE");a.t=0;a.B=function(){if(!a.t){var d=a.version;a.audienceManagerServer&&
(d+="|"+a.audienceManagerServer);a.audienceManagerServerSecure&&(d+="|"+a.audienceManagerServerSecure);if(a.audienceManagerCustomerIDDPIDs)for(var c in a.audienceManagerCustomerIDDPIDs)!Object.prototype[c]&&a.audienceManagerCustomerIDDPIDs[c]&&(d+=c+"="+a.audienceManagerCustomerIDDPIDs[c]);a.t=a.C(d)}return a.t};a.G=p;a.h=function(){if(!a.G){a.G=i;var d=a.B(),c=p,b=a.cookieRead(a.cookieName),e,f,g,h=new Date;a.a==j&&(a.a={});if(b&&"T"!=b){b=b.split("|");b[0].match(/^[\-0-9]+$/)&&(parseInt(b[0])!=
d&&(c=i),b.shift());1==b.length%2&&b.pop();for(d=0;d<b.length;d+=2)e=b[d].split("-"),f=e[0],g=b[d+1],e=1<e.length?parseInt(e[1]):0,c&&(f==x&&(g=""),0<e&&(e=h.getTime()/1E3-60)),f&&g&&(a.d(f,g,1),0<e&&(a.a["expire"+f]=e,h.getTime()>=1E3*e&&(a.c||(a.c={}),a.c[f]=i)))}if(!a.b(l)&&(b=a.cookieRead("s_vi")))b=b.split("|"),1<b.length&&0<=b[0].indexOf("v1")&&(g=b[1],d=g.indexOf("["),0<=d&&(g=g.substring(0,d)),g&&g.match(/^[0-9a-fA-F\-]+$/)&&a.d(l,g))}};a.M=function(){var d=a.B(),c,b;for(c in a.a)!Object.prototype[c]&&
a.a[c]&&"expire"!=c.substring(0,6)&&(b=a.a[c],d+=(d?"|":"")+c+(a.a["expire"+c]?"-"+a.a["expire"+c]:"")+"|"+b);a.cookieWrite(a.cookieName,d,1)};a.b=function(d,c){return a.a!=j&&(c||!a.c||!a.c[d])?a.a[d]:j};a.d=function(d,c,b){a.a==j&&(a.a={});a.a[d]=c;b||a.M()};a.p=function(d,c){var b=new Date;b.setTime(b.getTime()+1E3*c);a.a==j&&(a.a={});a.a["expire"+d]=Math.floor(b.getTime()/1E3);0>c?(a.c||(a.c={}),a.c[d]=i):a.c&&(a.c[d]=p)};a.A=function(a){if(a&&("object"==typeof a&&(a=a.d_mid?a.d_mid:a.visitorID?
a.visitorID:a.id?a.id:a.uuid?a.uuid:""+a),a&&(a=a.toUpperCase(),"NOTARGET"==a&&(a=q)),!a||a!=q&&!a.match(/^[0-9a-fA-F\-]+$/)))a="";return a};a.i=function(d,c){a.H(d);a.g!=j&&(a.g[d]=p);if(d==w){var b=a.b(n);if(!b){b="object"==typeof c&&c.mid?c.mid:a.A(c);if(!b){if(a.r){a.getAnalyticsVisitorID(null,!1,!0);return}b=a.m()}a.d(n,b)}if(!b||b==q)b="";"object"==typeof c&&((c.d_region||c.dcs_region||c.d_blob||c.blob)&&a.i(u,c),a.r&&c.mid&&a.i(v,{id:c.id}));a.l(n,[b])}if(d==u&&"object"==typeof c){b=604800;
void 0!=c.id_sync_ttl&&c.id_sync_ttl&&(b=parseInt(c.id_sync_ttl));var e=a.b(r);e||((e=c.d_region)||(e=c.dcs_region),e&&(a.p(r,b),a.d(r,e)));e||(e="");a.l(r,[e]);e=a.b(o);if(c.d_blob||c.blob)(e=c.d_blob)||(e=c.blob),a.p(o,b),a.d(o,e);e||(e="");a.l(o,[e]);!c.error_msg&&a.o&&a.d(x,a.o)}if(d==v){b=a.b(l);b||((b=a.A(c))?a.p(o,-1):b=q,a.d(l,b));if(!b||b==q)b="";a.l(l,[b])}};a.g=j;a.n=function(d,c,b,e){var f="",g;if(a.isAllowed()&&(a.h(),f=a.b(d),!f&&(d==n?g=w:d==r||d==o?g=u:d==l&&(g=v),g))){if(c&&(a.g==
j||!a.g[g]))a.g==j&&(a.g={}),a.g[g]=i,a.J(g,c,function(){if(!a.b(d)){var b="";d==n?b=a.m():g==u&&(b={error_msg:"timeout"});a.i(g,b)}});a.L(d,b);c||a.i(g,{id:q});return""}if((d==n||d==l)&&f==q)f="",e=i;b&&e&&a.w(b,[f]);return f};a._setMarketingCloudFields=function(d){a.h();a.i(w,d)};a.setMarketingCloudVisitorID=function(d){a._setMarketingCloudFields(d)};a.r=p;a.getMarketingCloudVisitorID=function(d,c){return a.isAllowed()?(a.marketingCloudServer&&0>a.marketingCloudServer.indexOf(".demdex.net")&&(a.r=
i),a.n(n,a.s("_setMarketingCloudFields"),d,c)):""};a.K=function(){a.getAudienceManagerBlob()};a.f={};a.z=p;a.o="";a.setCustomerIDs=function(d){a.f=d;if(a.isAllowed()){a.h();var d=a.b(x),c="",b,e;d||(d=0);for(b in a.f)e=a.f[b],!Object.prototype[b]&&e&&(c+=(c?"|":"")+b+"|"+e);a.o=a.C(c);a.o!=d&&(a.z=i,a.K())}};a.getCustomerIDs=function(){return a.f};a._setAnalyticsFields=function(d){a.h();a.i(v,d)};a.setAnalyticsVisitorID=function(d){a._setAnalyticsFields(d)};a.getAnalyticsVisitorID=function(d,c,b){if(a.isAllowed()){var e=
"";b||(e=a.getMarketingCloudVisitorID(function(){a.getAnalyticsVisitorID(d,i)}));if(e||b){var f=b?a.marketingCloudServer:a.trackingServer,g="";a.loadSSL&&(b?a.marketingCloudServerSecure&&(f=a.marketingCloudServerSecure):a.trackingServerSecure&&(f=a.trackingServerSecure));f&&(g="http"+(a.loadSSL?"s":"")+"://"+f+"/id?callback=s_c_il%5B"+a._in+"%5D._set"+(b?"MarketingCloud":"Analytics")+"Fields&mcorgid="+encodeURIComponent(a.marketingCloudOrgID)+(e?"&mid="+e:""));return a.n(b?n:l,g,d,c)}}return""};a._setAudienceManagerFields=
function(d){a.h();a.i(u,d)};a.s=function(d){var c=a.audienceManagerServer,b="",e=a.b(n),f=a.b(o,i),g=a.b(l),g=g&&g!=q?"&d_cid_ic=AVID%01"+encodeURIComponent(g):"",h="",j,k;a.loadSSL&&a.audienceManagerServerSecure&&(c=a.audienceManagerServerSecure);if(c){if(a.f)for(j in a.f)if(!Object.prototype[j]&&(b=a.f[j]))g+="&d_cid_ic="+encodeURIComponent(j)+"%01"+encodeURIComponent(b),a.audienceManagerCustomerIDDPIDs&&(k=a.audienceManagerCustomerIDDPIDs[j])&&(h+="&d_cid="+k+"%01"+encodeURIComponent(b));d||(d=
"_setAudienceManagerFields");b="http"+(a.loadSSL?"s":"")+"://"+c+"/id?d_rtbd=json&d_ver=2"+(!e&&a.r?"&d_verify=1":"")+"&d_orgid="+encodeURIComponent(a.marketingCloudOrgID)+(e?"&d_mid="+e:"")+(f?"&d_blob="+encodeURIComponent(f):"")+g+h+"&d_cb=s_c_il%5B"+a._in+"%5D."+d}return b};a.getAudienceManagerLocationHint=function(d,c){if(a.isAllowed()&&a.getMarketingCloudVisitorID(function(){a.getAudienceManagerLocationHint(d,i)})){var b=a.b(l);b||(b=a.getAnalyticsVisitorID(function(){a.getAudienceManagerLocationHint(d,
i)}));if(b)return a.n(r,a.s(),d,c)}return""};a.getAudienceManagerBlob=function(d,c){if(a.isAllowed()&&a.getMarketingCloudVisitorID(function(){a.getAudienceManagerBlob(d,i)})){var b=a.b(l);b||(b=a.getAnalyticsVisitorID(function(){a.getAudienceManagerBlob(d,i)}));if(b)return b=a.s(),a.z&&a.p(o,-1),a.n(o,b,d,c)}return""};m.AUTH_STATE_UNAUTHENTICATED=0;m.AUTH_STATE_AUTHENTICATED=1;m.AUTH_STATE_ASSUMED_AUTHENTICATED=2;m.AUTH_STATE_LOGGEDOUT=3;a.setAuthState=function(d){a.isAllowed()&&(a.h(),a.d(y,d))};
a.getAuthState=function(){return a.isAllowed()?(a.h(),a.b(y)):0};a.k="";a.q={};a.u="";a.v={};a.getSupplementalDataID=function(d,c){!a.k&&!c&&(a.k=a.m(1));var b=a.k;a.u&&!a.v[d]?(b=a.u,a.v[d]=i):b&&(a.q[d]&&(a.u=a.k,a.v=a.q,a.k=b=!c?a.m(1):"",a.q={}),b&&(a.q[d]=i));return b};0>k.indexOf("@")&&(k+="@AdobeOrg");a.marketingCloudOrgID=k;a.namespace=s;a.cookieName="AMCV_"+k;a.cookieDomain=a.I();a.cookieDomain==h.location.hostname&&(a.cookieDomain="");if(s){var m="AMCV_"+s,A=a.cookieRead(a.cookieName),z=
a.cookieRead(m);!A&&z&&(a.cookieWrite(a.cookieName,z,1),a.cookieWrite(m,"",-60))}a.loadSSL=0<=h.location.protocol.toLowerCase().indexOf("https");a.loadTimeout=500;a.marketingCloudServer=a.audienceManagerServer="dpm.demdex.net"}Visitor.getInstance=function(k,s){var a,h=window.s_c_il,m;0>k.indexOf("@")&&(k+="@AdobeOrg");if(h)for(m=0;m<h.length;m++)if((a=h[m])&&"Visitor"==a._c&&(a.marketingCloudOrgID==k||s&&a.namespace==s))return a;return new Visitor(k,s)};


/*
 ============== DO NOT ALTER ANYTHING BELOW THIS LINE ! ===============

AppMeasurement for JavaScript version: 1.4.3
Copyright 1996-2013 Adobe, Inc. All Rights Reserved
More info available at http://www.omniture.com
*/
function AppMeasurement(){var a=this;a.version="1.4.3";var k=window;k.s_c_in||(k.s_c_il=[],k.s_c_in=0);a._il=k.s_c_il;a._in=k.s_c_in;a._il[a._in]=a;k.s_c_in++;a._c="s_c";var q=k.yb;q||(q=null);var r=k,n,t;try{for(n=r.parent,t=r.location;n&&n.location&&t&&""+n.location!=""+t&&r.location&&""+n.location!=""+r.location&&n.location.host==t.host;)r=n,n=r.parent}catch(u){}a.nb=function(a){try{console.log(a)}catch(b){}};a.za=function(a){return""+parseInt(a)==""+a};a.replace=function(a,b,d){return!a||0>a.indexOf(b)?
a:a.split(b).join(d)};a.escape=function(c){var b,d;if(!c)return c;c=encodeURIComponent(c);for(b=0;7>b;b++)d="+~!*()'".substring(b,b+1),0<=c.indexOf(d)&&(c=a.replace(c,d,"%"+d.charCodeAt(0).toString(16).toUpperCase()));return c};a.unescape=function(c){if(!c)return c;c=0<=c.indexOf("+")?a.replace(c,"+"," "):c;try{return decodeURIComponent(c)}catch(b){}return unescape(c)};a.eb=function(){var c=k.location.hostname,b=a.fpCookieDomainPeriods,d;b||(b=a.cookieDomainPeriods);if(c&&!a.cookieDomain&&!/^[0-9.]+$/.test(c)&&
(b=b?parseInt(b):2,b=2<b?b:2,d=c.lastIndexOf("."),0<=d)){for(;0<=d&&1<b;)d=c.lastIndexOf(".",d-1),b--;a.cookieDomain=0<d?c.substring(d):c}return a.cookieDomain};a.c_r=a.cookieRead=function(c){c=a.escape(c);var b=" "+a.d.cookie,d=b.indexOf(" "+c+"="),f=0>d?d:b.indexOf(";",d);c=0>d?"":a.unescape(b.substring(d+2+c.length,0>f?b.length:f));return"[[B]]"!=c?c:""};a.c_w=a.cookieWrite=function(c,b,d){var f=a.eb(),e=a.cookieLifetime,g;b=""+b;e=e?(""+e).toUpperCase():"";d&&"SESSION"!=e&&"NONE"!=e&&((g=""!=
b?parseInt(e?e:0):-60)?(d=new Date,d.setTime(d.getTime()+1E3*g)):1==d&&(d=new Date,g=d.getYear(),d.setYear(g+5+(1900>g?1900:0))));return c&&"NONE"!=e?(a.d.cookie=c+"="+a.escape(""!=b?b:"[[B]]")+"; path=/;"+(d&&"SESSION"!=e?" expires="+d.toGMTString()+";":"")+(f?" domain="+f+";":""),a.cookieRead(c)==b):0};a.F=[];a.ba=function(c,b,d){if(a.ta)return 0;a.maxDelay||(a.maxDelay=250);var f=0,e=(new Date).getTime()+a.maxDelay,g=a.d.visibilityState,m=["webkitvisibilitychange","visibilitychange"];g||(g=a.d.webkitVisibilityState);
if(g&&"prerender"==g){if(!a.ca)for(a.ca=1,d=0;d<m.length;d++)a.d.addEventListener(m[d],function(){var b=a.d.visibilityState;b||(b=a.d.webkitVisibilityState);"visible"==b&&(a.ca=0,a.delayReady())});f=1;e=0}else d||a.l("_d")&&(f=1);f&&(a.F.push({m:c,a:b,t:e}),a.ca||setTimeout(a.delayReady,a.maxDelay));return f};a.delayReady=function(){var c=(new Date).getTime(),b=0,d;for(a.l("_d")?b=1:a.na();0<a.F.length;){d=a.F.shift();if(b&&!d.t&&d.t>c){a.F.unshift(d);setTimeout(a.delayReady,parseInt(a.maxDelay/2));
break}a.ta=1;a[d.m].apply(a,d.a);a.ta=0}};a.setAccount=a.sa=function(c){var b,d;if(!a.ba("setAccount",arguments))if(a.account=c,a.allAccounts)for(b=a.allAccounts.concat(c.split(",")),a.allAccounts=[],b.sort(),d=0;d<b.length;d++)0!=d&&b[d-1]==b[d]||a.allAccounts.push(b[d]);else a.allAccounts=c.split(",")};a.foreachVar=function(c,b){var d,f,e,g,m="";e=f="";if(a.lightProfileID)d=a.J,(m=a.lightTrackVars)&&(m=","+m+","+a.ga.join(",")+",");else{d=a.c;if(a.pe||a.linkType)m=a.linkTrackVars,f=a.linkTrackEvents,
a.pe&&(e=a.pe.substring(0,1).toUpperCase()+a.pe.substring(1),a[e]&&(m=a[e].xb,f=a[e].wb));m&&(m=","+m+","+a.A.join(",")+",");f&&m&&(m+=",events,")}b&&(b=","+b+",");for(f=0;f<d.length;f++)e=d[f],(g=a[e])&&(!m||0<=m.indexOf(","+e+","))&&(!b||0<=b.indexOf(","+e+","))&&c(e,g)};a.L=function(c,b,d,f,e){var g="",m,p,k,w,n=0;"contextData"==c&&(c="c");if(b){for(m in b)if(!(Object.prototype[m]||e&&m.substring(0,e.length)!=e)&&b[m]&&(!d||0<=d.indexOf(","+(f?f+".":"")+m+","))){k=!1;if(n)for(p=0;p<n.length;p++)m.substring(0,
n[p].length)==n[p]&&(k=!0);if(!k&&(""==g&&(g+="&"+c+"."),p=b[m],e&&(m=m.substring(e.length)),0<m.length))if(k=m.indexOf("."),0<k)p=m.substring(0,k),k=(e?e:"")+p+".",n||(n=[]),n.push(k),g+=a.L(p,b,d,f,k);else if("boolean"==typeof p&&(p=p?"true":"false"),p){if("retrieveLightData"==f&&0>e.indexOf(".contextData."))switch(k=m.substring(0,4),w=m.substring(4),m){case "transactionID":m="xact";break;case "channel":m="ch";break;case "campaign":m="v0";break;default:a.za(w)&&("prop"==k?m="c"+w:"eVar"==k?m="v"+
w:"list"==k?m="l"+w:"hier"==k&&(m="h"+w,p=p.substring(0,255)))}g+="&"+a.escape(m)+"="+a.escape(p)}}""!=g&&(g+="&."+c)}return g};a.gb=function(){var c="",b,d,f,e,g,m,p,k,n="",q="",r=d="";if(a.lightProfileID)b=a.J,(n=a.lightTrackVars)&&(n=","+n+","+a.ga.join(",")+",");else{b=a.c;if(a.pe||a.linkType)n=a.linkTrackVars,q=a.linkTrackEvents,a.pe&&(d=a.pe.substring(0,1).toUpperCase()+a.pe.substring(1),a[d]&&(n=a[d].xb,q=a[d].wb));n&&(n=","+n+","+a.A.join(",")+",");q&&(q=","+q+",",n&&(n+=",events,"));a.events2&&
(r+=(""!=r?",":"")+a.events2)}a.AudienceManagement&&a.AudienceManagement.isReady()&&(c+=a.L("d",a.AudienceManagement.getEventCallConfigParams()));for(d=0;d<b.length;d++){e=b[d];g=a[e];f=e.substring(0,4);m=e.substring(4);!g&&"events"==e&&r&&(g=r,r="");if(g&&(!n||0<=n.indexOf(","+e+","))){switch(e){case "supplementalDataID":e="sdid";break;case "timestamp":e="ts";break;case "dynamicVariablePrefix":e="D";break;case "visitorID":e="vid";break;case "marketingCloudVisitorID":e="mid";break;case "analyticsVisitorID":e=
"aid";break;case "audienceManagerLocationHint":e="aamlh";break;case "audienceManagerBlob":e="aamb";break;case "authState":e="as";break;case "pageURL":e="g";255<g.length&&(a.pageURLRest=g.substring(255),g=g.substring(0,255));break;case "pageURLRest":e="-g";break;case "referrer":e="r";break;case "vmk":case "visitorMigrationKey":e="vmt";break;case "visitorMigrationServer":e="vmf";a.ssl&&a.visitorMigrationServerSecure&&(g="");break;case "visitorMigrationServerSecure":e="vmf";!a.ssl&&a.visitorMigrationServer&&
(g="");break;case "charSet":e="ce";break;case "visitorNamespace":e="ns";break;case "cookieDomainPeriods":e="cdp";break;case "cookieLifetime":e="cl";break;case "variableProvider":e="vvp";break;case "currencyCode":e="cc";break;case "channel":e="ch";break;case "transactionID":e="xact";break;case "campaign":e="v0";break;case "latitude":e="lat";break;case "longitude":e="lon";break;case "resolution":e="s";break;case "colorDepth":e="c";break;case "javascriptVersion":e="j";break;case "javaEnabled":e="v";
break;case "cookiesEnabled":e="k";break;case "browserWidth":e="bw";break;case "browserHeight":e="bh";break;case "connectionType":e="ct";break;case "homepage":e="hp";break;case "events":r&&(g+=(""!=g?",":"")+r);if(q)for(m=g.split(","),g="",f=0;f<m.length;f++)p=m[f],k=p.indexOf("="),0<=k&&(p=p.substring(0,k)),k=p.indexOf(":"),0<=k&&(p=p.substring(0,k)),0<=q.indexOf(","+p+",")&&(g+=(g?",":"")+m[f]);break;case "events2":g="";break;case "contextData":c+=a.L("c",a[e],n,e);g="";break;case "lightProfileID":e=
"mtp";break;case "lightStoreForSeconds":e="mtss";a.lightProfileID||(g="");break;case "lightIncrementBy":e="mti";a.lightProfileID||(g="");break;case "retrieveLightProfiles":e="mtsr";break;case "deleteLightProfiles":e="mtsd";break;case "retrieveLightData":a.retrieveLightProfiles&&(c+=a.L("mts",a[e],n,e));g="";break;default:a.za(m)&&("prop"==f?e="c"+m:"eVar"==f?e="v"+m:"list"==f?e="l"+m:"hier"==f&&(e="h"+m,g=g.substring(0,255)))}g&&(c+="&"+e+"="+("pev"!=e.substring(0,3)?a.escape(g):g))}"pev3"==e&&a.e&&
(c+=a.e)}return c};a.u=function(a){var b=a.tagName;if("undefined"!=""+a.Bb||"undefined"!=""+a.rb&&"HTML"!=(""+a.rb).toUpperCase())return"";b=b&&b.toUpperCase?b.toUpperCase():"";"SHAPE"==b&&(b="");b&&(("INPUT"==b||"BUTTON"==b)&&a.type&&a.type.toUpperCase?b=a.type.toUpperCase():!b&&a.href&&(b="A"));return b};a.va=function(a){var b=a.href?a.href:"",d,f,e;d=b.indexOf(":");f=b.indexOf("?");e=b.indexOf("/");b&&(0>d||0<=f&&d>f||0<=e&&d>e)&&(f=a.protocol&&1<a.protocol.length?a.protocol:l.protocol?l.protocol:
"",d=l.pathname.lastIndexOf("/"),b=(f?f+"//":"")+(a.host?a.host:l.host?l.host:"")+("/"!=h.substring(0,1)?l.pathname.substring(0,0>d?0:d)+"/":"")+b);return b};a.G=function(c){var b=a.u(c),d,f,e="",g=0;return b&&(d=c.protocol,f=c.onclick,!c.href||"A"!=b&&"AREA"!=b||f&&d&&!(0>d.toLowerCase().indexOf("javascript"))?f?(e=a.replace(a.replace(a.replace(a.replace(""+f,"\r",""),"\n",""),"\t","")," ",""),g=2):"INPUT"==b||"SUBMIT"==b?(c.value?e=c.value:c.innerText?e=c.innerText:c.textContent&&(e=c.textContent),
g=3):c.src&&"IMAGE"==b&&(e=c.src):e=a.va(c),e)?{id:e.substring(0,100),type:g}:0};a.zb=function(c){for(var b=a.u(c),d=a.G(c);c&&!d&&"BODY"!=b;)if(c=c.parentElement?c.parentElement:c.parentNode)b=a.u(c),d=a.G(c);d&&"BODY"!=b||(c=0);c&&(b=c.onclick?""+c.onclick:"",0<=b.indexOf(".tl(")||0<=b.indexOf(".trackLink("))&&(c=0);return c};a.qb=function(){var c,b,d=a.linkObject,f=a.linkType,e=a.linkURL,g,m;a.ha=1;d||(a.ha=0,d=a.clickObject);if(d){c=a.u(d);for(b=a.G(d);d&&!b&&"BODY"!=c;)if(d=d.parentElement?d.parentElement:
d.parentNode)c=a.u(d),b=a.G(d);b&&"BODY"!=c||(d=0);if(d){var p=d.onclick?""+d.onclick:"";if(0<=p.indexOf(".tl(")||0<=p.indexOf(".trackLink("))d=0}}else a.ha=1;!e&&d&&(e=a.va(d));e&&!a.linkLeaveQueryString&&(g=e.indexOf("?"),0<=g&&(e=e.substring(0,g)));if(!f&&e){var n=0,q=0,r;if(a.trackDownloadLinks&&a.linkDownloadFileTypes)for(p=e.toLowerCase(),g=p.indexOf("?"),m=p.indexOf("#"),0<=g?0<=m&&m<g&&(g=m):g=m,0<=g&&(p=p.substring(0,g)),g=a.linkDownloadFileTypes.toLowerCase().split(","),m=0;m<g.length;m++)(r=
g[m])&&p.substring(p.length-(r.length+1))=="."+r&&(f="d");if(a.trackExternalLinks&&!f&&(p=e.toLowerCase(),a.ya(p)&&(a.linkInternalFilters||(a.linkInternalFilters=k.location.hostname),g=0,a.linkExternalFilters?(g=a.linkExternalFilters.toLowerCase().split(","),n=1):a.linkInternalFilters&&(g=a.linkInternalFilters.toLowerCase().split(",")),g))){for(m=0;m<g.length;m++)r=g[m],0<=p.indexOf(r)&&(q=1);q?n&&(f="e"):n||(f="e")}}a.linkObject=d;a.linkURL=e;a.linkType=f;if(a.trackClickMap||a.trackInlineStats)a.e=
"",d&&(f=a.pageName,e=1,d=d.sourceIndex,f||(f=a.pageURL,e=0),k.s_objectID&&(b.id=k.s_objectID,d=b.type=1),f&&b&&b.id&&c&&(a.e="&pid="+a.escape(f.substring(0,255))+(e?"&pidt="+e:"")+"&oid="+a.escape(b.id.substring(0,100))+(b.type?"&oidt="+b.type:"")+"&ot="+c+(d?"&oi="+d:"")))};a.hb=function(){var c=a.ha,b=a.linkType,d=a.linkURL,f=a.linkName;b&&(d||f)&&(b=b.toLowerCase(),"d"!=b&&"e"!=b&&(b="o"),a.pe="lnk_"+b,a.pev1=d?a.escape(d):"",a.pev2=f?a.escape(f):"",c=1);a.abort&&(c=0);if(a.trackClickMap||a.trackInlineStats){var b=
{},d=0,e=a.cookieRead("s_sq"),g=e?e.split("&"):0,m,p,k,e=0;if(g)for(m=0;m<g.length;m++)p=g[m].split("="),f=a.unescape(p[0]).split(","),p=a.unescape(p[1]),b[p]=f;f=a.account.split(",");if(c||a.e){c&&!a.e&&(e=1);for(p in b)if(!Object.prototype[p])for(m=0;m<f.length;m++)for(e&&(k=b[p].join(","),k==a.account&&(a.e+=("&"!=p.charAt(0)?"&":"")+p,b[p]=[],d=1)),g=0;g<b[p].length;g++)k=b[p][g],k==f[m]&&(e&&(a.e+="&u="+a.escape(k)+("&"!=p.charAt(0)?"&":"")+p+"&u=0"),b[p].splice(g,1),d=1);c||(d=1);if(d){e="";
m=2;!c&&a.e&&(e=a.escape(f.join(","))+"="+a.escape(a.e),m=1);for(p in b)!Object.prototype[p]&&0<m&&0<b[p].length&&(e+=(e?"&":"")+a.escape(b[p].join(","))+"="+a.escape(p),m--);a.cookieWrite("s_sq",e)}}}return c};a.ib=function(){if(!a.vb){var c=new Date,b=r.location,d,f,e=f=d="",g="",m="",k="1.2",n=a.cookieWrite("s_cc","true",0)?"Y":"N",q="",s="";if(c.setUTCDate&&(k="1.3",(0).toPrecision&&(k="1.5",c=[],c.forEach))){k="1.6";f=0;d={};try{f=new Iterator(d),f.next&&(k="1.7",c.reduce&&(k="1.8",k.trim&&(k=
"1.8.1",Date.parse&&(k="1.8.2",Object.create&&(k="1.8.5")))))}catch(t){}}d=screen.width+"x"+screen.height;e=navigator.javaEnabled()?"Y":"N";f=screen.pixelDepth?screen.pixelDepth:screen.colorDepth;g=a.w.innerWidth?a.w.innerWidth:a.d.documentElement.offsetWidth;m=a.w.innerHeight?a.w.innerHeight:a.d.documentElement.offsetHeight;try{a.b.addBehavior("#default#homePage"),q=a.b.Ab(b)?"Y":"N"}catch(u){}try{a.b.addBehavior("#default#clientCaps"),s=a.b.connectionType}catch(x){}a.resolution=d;a.colorDepth=f;
a.javascriptVersion=k;a.javaEnabled=e;a.cookiesEnabled=n;a.browserWidth=g;a.browserHeight=m;a.connectionType=s;a.homepage=q;a.vb=1}};a.K={};a.loadModule=function(c,b){var d=a.K[c];if(!d){d=k["AppMeasurement_Module_"+c]?new k["AppMeasurement_Module_"+c](a):{};a.K[c]=a[c]=d;d.Na=function(){return d.Ra};d.Sa=function(b){if(d.Ra=b)a[c+"_onLoad"]=b,a.ba(c+"_onLoad",[a,d],1)||b(a,d)};try{Object.defineProperty?Object.defineProperty(d,"onLoad",{get:d.Na,set:d.Sa}):d._olc=1}catch(f){d._olc=1}}b&&(a[c+"_onLoad"]=
b,a.ba(c+"_onLoad",[a,d],1)||b(a,d))};a.l=function(c){var b,d;for(b in a.K)if(!Object.prototype[b]&&(d=a.K[b])&&(d._olc&&d.onLoad&&(d._olc=0,d.onLoad(a,d)),d[c]&&d[c]()))return 1;return 0};a.lb=function(){var c=Math.floor(1E13*Math.random()),b=a.visitorSampling,d=a.visitorSamplingGroup,d="s_vsn_"+(a.visitorNamespace?a.visitorNamespace:a.account)+(d?"_"+d:""),f=a.cookieRead(d);if(b){f&&(f=parseInt(f));if(!f){if(!a.cookieWrite(d,c))return 0;f=c}if(f%1E4>v)return 0}return 1};a.M=function(c,b){var d,
f,e,g,m,k;for(d=0;2>d;d++)for(f=0<d?a.oa:a.c,e=0;e<f.length;e++)if(g=f[e],(m=c[g])||c["!"+g]){if(!b&&("contextData"==g||"retrieveLightData"==g)&&a[g])for(k in a[g])m[k]||(m[k]=a[g][k]);a[g]=m}};a.Ga=function(c,b){var d,f,e,g;for(d=0;2>d;d++)for(f=0<d?a.oa:a.c,e=0;e<f.length;e++)g=f[e],c[g]=a[g],b||c[g]||(c["!"+g]=1)};a.cb=function(a){var b,d,f,e,g,m=0,k,n="",q="";if(a&&255<a.length&&(b=""+a,d=b.indexOf("?"),0<d&&(k=b.substring(d+1),b=b.substring(0,d),e=b.toLowerCase(),f=0,"http://"==e.substring(0,
7)?f+=7:"https://"==e.substring(0,8)&&(f+=8),d=e.indexOf("/",f),0<d&&(e=e.substring(f,d),g=b.substring(d),b=b.substring(0,d),0<=e.indexOf("google")?m=",q,ie,start,search_key,word,kw,cd,":0<=e.indexOf("yahoo.co")&&(m=",p,ei,"),m&&k)))){if((a=k.split("&"))&&1<a.length){for(f=0;f<a.length;f++)e=a[f],d=e.indexOf("="),0<d&&0<=m.indexOf(","+e.substring(0,d)+",")?n+=(n?"&":"")+e:q+=(q?"&":"")+e;n&&q?k=n+"&"+q:q=""}d=253-(k.length-q.length)-b.length;a=b+(0<d?g.substring(0,d):"")+"?"+k}return a};a.Ma=function(c){var b=
a.d.visibilityState,d=["webkitvisibilitychange","visibilitychange"];b||(b=a.d.webkitVisibilityState);if(b&&"prerender"==b){if(c)for(b=0;b<d.length;b++)a.d.addEventListener(d[b],function(){var b=a.d.visibilityState;b||(b=a.d.webkitVisibilityState);"visible"==b&&c()});return!1}return!0};a.Y=!1;a.C=!1;a.Ta=function(){a.C=!0;a.i()};a.W=!1;a.Q=!1;a.Qa=function(c){a.marketingCloudVisitorID=c;a.Q=!0;a.i()};a.T=!1;a.N=!1;a.Ia=function(c){a.analyticsVisitorID=c;a.N=!0;a.i()};a.V=!1;a.P=!1;a.Ka=function(c){a.audienceManagerLocationHint=
c;a.P=!0;a.i()};a.U=!1;a.O=!1;a.Ja=function(c){a.audienceManagerBlob=c;a.O=!0;a.i()};a.La=function(c){a.maxDelay||(a.maxDelay=250);return a.l("_d")?(c&&setTimeout(function(){c()},a.maxDelay),!1):!0};a.X=!1;a.B=!1;a.na=function(){a.B=!0;a.i()};a.isReadyToTrack=function(){var c=!0,b=a.visitor;a.Y||a.C||(a.Ma(a.Ta)?a.C=!0:a.Y=!0);if(a.Y&&!a.C)return!1;b&&b.isAllowed()&&(a.W||a.marketingCloudVisitorID||!b.getMarketingCloudVisitorID||(a.W=!0,a.marketingCloudVisitorID=b.getMarketingCloudVisitorID([a,a.Qa]),
a.marketingCloudVisitorID&&(a.Q=!0)),a.T||a.analyticsVisitorID||!b.getAnalyticsVisitorID||(a.T=!0,a.analyticsVisitorID=b.getAnalyticsVisitorID([a,a.Ia]),a.analyticsVisitorID&&(a.N=!0)),a.V||a.audienceManagerLocationHint||!b.getAudienceManagerLocationHint||(a.V=!0,a.audienceManagerLocationHint=b.getAudienceManagerLocationHint([a,a.Ka]),a.audienceManagerLocationHint&&(a.P=!0)),a.U||a.audienceManagerBlob||!b.getAudienceManagerBlob||(a.U=!0,a.audienceManagerBlob=b.getAudienceManagerBlob([a,a.Ja]),a.audienceManagerBlob&&
(a.O=!0)),a.W&&!a.Q&&!a.marketingCloudVisitorID||a.T&&!a.N&&!a.analyticsVisitorID||a.V&&!a.P&&!a.audienceManagerLocationHint||a.U&&!a.O&&!a.audienceManagerBlob)&&(c=!1);a.X||a.B||(a.La(a.na)?a.B=!0:a.X=!0);a.X&&!a.B&&(c=!1);return c};a.k=q;a.o=0;a.callbackWhenReadyToTrack=function(c,b,d){var f;f={};f.Xa=c;f.Wa=b;f.Ua=d;a.k==q&&(a.k=[]);a.k.push(f);0==a.o&&(a.o=setInterval(a.i,100))};a.i=function(){var c;if(a.isReadyToTrack()&&(a.o&&(clearInterval(a.o),a.o=0),a.k!=q))for(;0<a.k.length;)c=a.k.shift(),
c.Wa.apply(c.Xa,c.Ua)};a.Oa=function(c){var b,d,f=q,e=q;if(!a.isReadyToTrack()){b=[];if(c!=q)for(d in f={},c)f[d]=c[d];e={};a.Ga(e,!0);b.push(f);b.push(e);a.callbackWhenReadyToTrack(a,a.track,b);return!0}return!1};a.fb=function(){var c=a.cookieRead("s_fid"),b="",d="",f;f=8;var e=4;if(!c||0>c.indexOf("-")){for(c=0;16>c;c++)f=Math.floor(Math.random()*f),b+="0123456789ABCDEF".substring(f,f+1),f=Math.floor(Math.random()*e),d+="0123456789ABCDEF".substring(f,f+1),f=e=16;c=b+"-"+d}a.cookieWrite("s_fid",
c,1)||(c=0);return c};a.t=a.track=function(c,b){var d,f=new Date,e="s"+Math.floor(f.getTime()/108E5)%10+Math.floor(1E13*Math.random()),g=f.getYear(),g="t="+a.escape(f.getDate()+"/"+f.getMonth()+"/"+(1900>g?g+1900:g)+" "+f.getHours()+":"+f.getMinutes()+":"+f.getSeconds()+" "+f.getDay()+" "+f.getTimezoneOffset());a.visitor&&(a.visitor.getAuthState&&(a.authState=a.visitor.getAuthState()),!a.supplementalDataID&&a.visitor.getSupplementalDataID&&(a.supplementalDataID=a.visitor.getSupplementalDataID("AppMeasurement:"+
a._in,a.expectSupplementalData?!1:!0)));a.l("_s");a.Oa(c)||(b&&a.M(b),c&&(d={},a.Ga(d,0),a.M(c)),a.lb()&&(a.analyticsVisitorID||a.marketingCloudVisitorID||(a.fid=a.fb()),a.qb(),a.usePlugins&&a.doPlugins&&a.doPlugins(a),a.account&&(a.abort||(a.trackOffline&&!a.timestamp&&(a.timestamp=Math.floor(f.getTime()/1E3)),f=k.location,a.pageURL||(a.pageURL=f.href?f.href:f),a.referrer||a.Ha||(a.referrer=r.document.referrer),a.Ha=1,a.referrer=a.cb(a.referrer),a.l("_g")),a.hb()&&!a.abort&&(a.ib(),g+=a.gb(),a.pb(e,
g),a.l("_t"),a.referrer=""))),c&&a.M(d,1));a.abort=a.supplementalDataID=a.timestamp=a.pageURLRest=a.linkObject=a.clickObject=a.linkURL=a.linkName=a.linkType=k.s_objectID=a.pe=a.pev1=a.pev2=a.pev3=a.e=0};a.tl=a.trackLink=function(c,b,d,f,e){a.linkObject=c;a.linkType=b;a.linkName=d;e&&(a.j=c,a.q=e);return a.track(f)};a.trackLight=function(c,b,d,f){a.lightProfileID=c;a.lightStoreForSeconds=b;a.lightIncrementBy=d;return a.track(f)};a.clearVars=function(){var c,b;for(c=0;c<a.c.length;c++)if(b=a.c[c],"prop"==
b.substring(0,4)||"eVar"==b.substring(0,4)||"hier"==b.substring(0,4)||"list"==b.substring(0,4)||"channel"==b||"events"==b||"eventList"==b||"products"==b||"productList"==b||"purchaseID"==b||"transactionID"==b||"state"==b||"zip"==b||"campaign"==b)a[b]=void 0};a.tagContainerMarker="";a.pb=function(c,b){var d,f=a.trackingServer;d="";var e=a.dc,g="sc.",k=a.visitorNamespace;f?a.trackingServerSecure&&a.ssl&&(f=a.trackingServerSecure):(k||(k=a.account,f=k.indexOf(","),0<=f&&(k=k.substring(0,f)),k=k.replace(/[^A-Za-z0-9]/g,
"")),d||(d="2o7.net"),e=e?(""+e).toLowerCase():"d1","2o7.net"==d&&("d1"==e?e="112":"d2"==e&&(e="122"),g=""),f=k+"."+e+"."+g+d);d=a.ssl?"https://":"http://";e=a.AudienceManagement&&a.AudienceManagement.isReady();d+=f+"/b/ss/"+a.account+"/"+(a.mobile?"5.":"")+(e?"10":"1")+"/JS-"+a.version+(a.ub?"T":"")+(a.tagContainerMarker?"-"+a.tagContainerMarker:"")+"/"+c+"?AQB=1&ndh=1&pf=1&"+(e?"callback=s_c_il["+a._in+"].AudienceManagement.passData&":"")+b+"&AQE=1";a.ab(d);a.da()};a.ab=function(c){a.g||a.jb();
a.g.push(c);a.fa=a.r();a.Fa()};a.jb=function(){a.g=a.mb();a.g||(a.g=[])};a.mb=function(){var c,b;if(a.ka()){try{(b=k.localStorage.getItem(a.ia()))&&(c=k.JSON.parse(b))}catch(d){}return c}};a.ka=function(){var c=!0;a.trackOffline&&a.offlineFilename&&k.localStorage&&k.JSON||(c=!1);return c};a.wa=function(){var c=0;a.g&&(c=a.g.length);a.v&&c++;return c};a.da=function(){if(!a.v)if(a.xa=q,a.ja)a.fa>a.I&&a.Da(a.g),a.ma(500);else{var c=a.Va();if(0<c)a.ma(c);else if(c=a.ua())a.v=1,a.ob(c),a.sb(c)}};a.ma=
function(c){a.xa||(c||(c=0),a.xa=setTimeout(a.da,c))};a.Va=function(){var c;if(!a.trackOffline||0>=a.offlineThrottleDelay)return 0;c=a.r()-a.Ca;return a.offlineThrottleDelay<c?0:a.offlineThrottleDelay-c};a.ua=function(){if(0<a.g.length)return a.g.shift()};a.ob=function(c){if(a.debugTracking){var b="AppMeasurement Debug: "+c;c=c.split("&");var d;for(d=0;d<c.length;d++)b+="\n\t"+a.unescape(c[d]);a.nb(b)}};a.Pa=function(){return a.marketingCloudVisitorID||a.analyticsVisitorID};a.S=!1;var s;try{s=JSON.parse('{"x":"y"}')}catch(x){s=
null}s&&"y"==s.x?(a.S=!0,a.R=function(a){return JSON.parse(a)}):k.$&&k.$.parseJSON?(a.R=function(a){return k.$.parseJSON(a)},a.S=!0):a.R=function(){return null};a.sb=function(c){var b,d,f;a.Pa()&&2047<c.length&&("undefined"!=typeof XMLHttpRequest&&(b=new XMLHttpRequest,"withCredentials"in b?d=1:b=0),b||"undefined"==typeof XDomainRequest||(b=new XDomainRequest,d=2),b&&a.AudienceManagement&&a.AudienceManagement.isReady()&&(a.S?b.pa=!0:b=0));!b&&a.kb&&(c=c.substring(0,2047));!b&&a.d.createElement&&a.AudienceManagement&&
a.AudienceManagement.isReady()&&(b=a.d.createElement("SCRIPT"))&&"async"in b&&((f=(f=a.d.getElementsByTagName("HEAD"))&&f[0]?f[0]:a.d.body)?(b.type="text/javascript",b.setAttribute("async","async"),d=3):b=0);b||(b=new Image,b.alt="");b.ra=function(){try{a.la&&(clearTimeout(a.la),a.la=0),b.timeout&&(clearTimeout(b.timeout),b.timeout=0)}catch(c){}};b.onload=b.tb=function(){b.ra();a.$a();a.Z();a.v=0;a.da();if(b.pa){b.pa=!1;try{var c=a.R(b.responseText);AudienceManagement.passData(c)}catch(d){}}};b.onabort=
b.onerror=b.bb=function(){b.ra();(a.trackOffline||a.ja)&&a.v&&a.g.unshift(a.Za);a.v=0;a.fa>a.I&&a.Da(a.g);a.Z();a.ma(500)};b.onreadystatechange=function(){4==b.readyState&&(200==b.status?b.tb():b.bb())};a.Ca=a.r();if(1==d||2==d){var e=c.indexOf("?");f=c.substring(0,e);e=c.substring(e+1);e=e.replace(/&callback=[a-zA-Z0-9_.\[\]]+/,"");1==d?(b.open("POST",f,!0),b.send(e)):2==d&&(b.open("POST",f),b.send(e))}else if(b.src=c,3==d){if(a.Aa)try{f.removeChild(a.Aa)}catch(g){}f.firstChild?f.insertBefore(b,
f.firstChild):f.appendChild(b);a.Aa=a.Ya}b.abort&&(a.la=setTimeout(b.abort,5E3));a.Za=c;a.Ya=k["s_i_"+a.replace(a.account,",","_")]=b;if(a.useForcedLinkTracking&&a.D||a.q)a.forcedLinkTrackingTimeout||(a.forcedLinkTrackingTimeout=250),a.aa=setTimeout(a.Z,a.forcedLinkTrackingTimeout)};a.$a=function(){if(a.ka()&&!(a.Ba>a.I))try{k.localStorage.removeItem(a.ia()),a.Ba=a.r()}catch(c){}};a.Da=function(c){if(a.ka()){a.Fa();try{k.localStorage.setItem(a.ia(),k.JSON.stringify(c)),a.I=a.r()}catch(b){}}};a.Fa=
function(){if(a.trackOffline){if(!a.offlineLimit||0>=a.offlineLimit)a.offlineLimit=10;for(;a.g.length>a.offlineLimit;)a.ua()}};a.forceOffline=function(){a.ja=!0};a.forceOnline=function(){a.ja=!1};a.ia=function(){return a.offlineFilename+"-"+a.visitorNamespace+a.account};a.r=function(){return(new Date).getTime()};a.ya=function(a){a=a.toLowerCase();return 0!=a.indexOf("#")&&0!=a.indexOf("about:")&&0!=a.indexOf("opera:")&&0!=a.indexOf("javascript:")?!0:!1};a.setTagContainer=function(c){var b,d,f;a.ub=
c;for(b=0;b<a._il.length;b++)if((d=a._il[b])&&"s_l"==d._c&&d.tagContainerName==c){a.M(d);if(d.lmq)for(b=0;b<d.lmq.length;b++)f=d.lmq[b],a.loadModule(f.n);if(d.ml)for(f in d.ml)if(a[f])for(b in c=a[f],f=d.ml[f],f)!Object.prototype[b]&&("function"!=typeof f[b]||0>(""+f[b]).indexOf("s_c_il"))&&(c[b]=f[b]);if(d.mmq)for(b=0;b<d.mmq.length;b++)f=d.mmq[b],a[f.m]&&(c=a[f.m],c[f.f]&&"function"==typeof c[f.f]&&(f.a?c[f.f].apply(c,f.a):c[f.f].apply(c)));if(d.tq)for(b=0;b<d.tq.length;b++)a.track(d.tq[b]);d.s=
a;break}};a.Util={urlEncode:a.escape,urlDecode:a.unescape,cookieRead:a.cookieRead,cookieWrite:a.cookieWrite,getQueryParam:function(c,b,d){var f;b||(b=a.pageURL?a.pageURL:k.location);d||(d="&");return c&&b&&(b=""+b,f=b.indexOf("?"),0<=f&&(b=d+b.substring(f+1)+d,f=b.indexOf(d+c+"="),0<=f&&(b=b.substring(f+d.length+c.length+1),f=b.indexOf(d),0<=f&&(b=b.substring(0,f)),0<b.length)))?a.unescape(b):""}};a.A="supplementalDataID timestamp dynamicVariablePrefix visitorID marketingCloudVisitorID analyticsVisitorID audienceManagerLocationHint authState fid vmk visitorMigrationKey visitorMigrationServer visitorMigrationServerSecure charSet visitorNamespace cookieDomainPeriods fpCookieDomainPeriods cookieLifetime pageName pageURL referrer contextData currencyCode lightProfileID lightStoreForSeconds lightIncrementBy retrieveLightProfiles deleteLightProfiles retrieveLightData pe pev1 pev2 pev3 pageURLRest".split(" ");
a.c=a.A.concat("purchaseID variableProvider channel server pageType transactionID campaign state zip events events2 products audienceManagerBlob tnt".split(" "));a.ga="timestamp charSet visitorNamespace cookieDomainPeriods cookieLifetime contextData lightProfileID lightStoreForSeconds lightIncrementBy".split(" ");a.J=a.ga.slice(0);a.oa="account allAccounts debugTracking visitor trackOffline offlineLimit offlineThrottleDelay offlineFilename usePlugins doPlugins configURL visitorSampling visitorSamplingGroup linkObject clickObject linkURL linkName linkType trackDownloadLinks trackExternalLinks trackClickMap trackInlineStats linkLeaveQueryString linkTrackVars linkTrackEvents linkDownloadFileTypes linkExternalFilters linkInternalFilters useForcedLinkTracking forcedLinkTrackingTimeout trackingServer trackingServerSecure ssl abort mobile dc lightTrackVars maxDelay expectSupplementalData AudienceManagement".split(" ");
for(n=0;250>=n;n++)76>n&&(a.c.push("prop"+n),a.J.push("prop"+n)),a.c.push("eVar"+n),a.J.push("eVar"+n),6>n&&a.c.push("hier"+n),4>n&&a.c.push("list"+n);n="latitude longitude resolution colorDepth javascriptVersion javaEnabled cookiesEnabled browserWidth browserHeight connectionType homepage".split(" ");a.c=a.c.concat(n);a.A=a.A.concat(n);a.ssl=0<=k.location.protocol.toLowerCase().indexOf("https");a.charSet="UTF-8";a.contextData={};a.offlineThrottleDelay=0;a.offlineFilename="AppMeasurement.offline";
a.Ca=0;a.fa=0;a.I=0;a.Ba=0;a.linkDownloadFileTypes="exe,zip,wav,mp3,mov,mpg,avi,wmv,pdf,doc,docx,xls,xlsx,ppt,pptx";a.w=k;a.d=k.document;try{a.kb="Microsoft Internet Explorer"==navigator.appName}catch(y){}a.Z=function(){a.aa&&(k.clearTimeout(a.aa),a.aa=q);a.j&&a.D&&a.j.dispatchEvent(a.D);a.q&&("function"==typeof a.q?a.q():a.j&&a.j.href&&(a.d.location=a.j.href));a.j=a.D=a.q=0};a.Ea=function(){a.b=a.d.body;a.b?(a.p=function(c){var b,d,f,e,g;if(!(a.d&&a.d.getElementById("cppXYctnr")||c&&c["s_fe_"+a._in])){if(a.qa)if(a.useForcedLinkTracking)a.b.removeEventListener("click",
a.p,!1);else{a.b.removeEventListener("click",a.p,!0);a.qa=a.useForcedLinkTracking=0;return}else a.useForcedLinkTracking=0;a.clickObject=c.srcElement?c.srcElement:c.target;try{if(!a.clickObject||a.H&&a.H==a.clickObject||!(a.clickObject.tagName||a.clickObject.parentElement||a.clickObject.parentNode))a.clickObject=0;else{var m=a.H=a.clickObject;a.ea&&(clearTimeout(a.ea),a.ea=0);a.ea=setTimeout(function(){a.H==m&&(a.H=0)},1E4);f=a.wa();a.track();if(f<a.wa()&&a.useForcedLinkTracking&&c.target){for(e=c.target;e&&
e!=a.b&&"A"!=e.tagName.toUpperCase()&&"AREA"!=e.tagName.toUpperCase();)e=e.parentNode;if(e&&(g=e.href,a.ya(g)||(g=0),d=e.target,c.target.dispatchEvent&&g&&(!d||"_self"==d||"_top"==d||"_parent"==d||k.name&&d==k.name))){try{b=a.d.createEvent("MouseEvents")}catch(n){b=new k.MouseEvent}if(b){try{b.initMouseEvent("click",c.bubbles,c.cancelable,c.view,c.detail,c.screenX,c.screenY,c.clientX,c.clientY,c.ctrlKey,c.altKey,c.shiftKey,c.metaKey,c.button,c.relatedTarget)}catch(q){b=0}b&&(b["s_fe_"+a._in]=b.s_fe=
1,c.stopPropagation(),c.stopImmediatePropagation&&c.stopImmediatePropagation(),c.preventDefault(),a.j=c.target,a.D=b)}}}}}catch(r){a.clickObject=0}}},a.b&&a.b.attachEvent?a.b.attachEvent("onclick",a.p):a.b&&a.b.addEventListener&&(navigator&&(0<=navigator.userAgent.indexOf("WebKit")&&a.d.createEvent||0<=navigator.userAgent.indexOf("Firefox/2")&&k.MouseEvent)&&(a.qa=1,a.useForcedLinkTracking=1,a.b.addEventListener("click",a.p,!0)),a.b.addEventListener("click",a.p,!1))):setTimeout(a.Ea,30)};a.Ea()}
function s_gi(a){var k,q=window.s_c_il,r,n,t=a.split(","),u,s,x=0;if(q)for(r=0;!x&&r<q.length;){k=q[r];if("s_c"==k._c&&(k.account||k.oun))if(k.account&&k.account==a)x=1;else for(n=k.account?k.account:k.oun,n=k.allAccounts?k.allAccounts:n.split(","),u=0;u<t.length;u++)for(s=0;s<n.length;s++)t[u]==n[s]&&(x=1);r++}x||(k=new AppMeasurement);k.setAccount?k.setAccount(a):k.sa&&k.sa(a);return k}AppMeasurement.getInstance=s_gi;window.s_objectID||(window.s_objectID=0);
function s_pgicq(){var a=window,k=a.s_giq,q,r,n;if(k)for(q=0;q<k.length;q++)r=k[q],n=s_gi(r.oun),n.setAccount(r.un),n.setTagContainer(r.tagContainerName);a.s_giq=0}s_pgicq();


/*
 * video heartbeats - js-v1.5.1.1 - 2015-04-07
 * Copyright (c) 2015 Adobe Systems, Inc. All Rights Reserved.
 */
(function(e){if(typeof t==="undefined"){var t={}}if(typeof i==="undefined"){var i={}}if(typeof r==="undefined"){var r={}}r.radio||(r.radio={});r.plugin||(r.plugin={});if(typeof a==="undefined"){var a={}}a.clock||(a.clock={});(function(e){"use strict";function t(e,t){var i=(e&65535)+(t&65535),r=(e>>16)+(t>>16)+(i>>16);return r<<16|i&65535}function i(e,t){return e<<t|e>>>32-t}function r(e,r,a,n,s,o){return t(i(t(t(r,e),t(n,o)),s),a)}function a(e,t,i,a,n,s,o){return r(t&i|~t&a,e,t,n,s,o)}function n(e,t,i,a,n,s,o){return r(t&a|i&~a,e,t,n,s,o)}function s(e,t,i,a,n,s,o){return r(t^i^a,e,t,n,s,o)}function o(e,t,i,a,n,s,o){return r(i^(t|~a),e,t,n,s,o)}function h(e,i){e[i>>5]|=128<<i%32;e[(i+64>>>9<<4)+14]=i;var r,h,l,u,p,c=1732584193,d=-271733879,_=-1732584194,f=271733878;for(r=0;r<e.length;r+=16){h=c;l=d;u=_;p=f;c=a(c,d,_,f,e[r],7,-680876936);f=a(f,c,d,_,e[r+1],12,-389564586);_=a(_,f,c,d,e[r+2],17,606105819);d=a(d,_,f,c,e[r+3],22,-1044525330);c=a(c,d,_,f,e[r+4],7,-176418897);f=a(f,c,d,_,e[r+5],12,1200080426);_=a(_,f,c,d,e[r+6],17,-1473231341);d=a(d,_,f,c,e[r+7],22,-45705983);c=a(c,d,_,f,e[r+8],7,1770035416);f=a(f,c,d,_,e[r+9],12,-1958414417);_=a(_,f,c,d,e[r+10],17,-42063);d=a(d,_,f,c,e[r+11],22,-1990404162);c=a(c,d,_,f,e[r+12],7,1804603682);f=a(f,c,d,_,e[r+13],12,-40341101);_=a(_,f,c,d,e[r+14],17,-1502002290);d=a(d,_,f,c,e[r+15],22,1236535329);c=n(c,d,_,f,e[r+1],5,-165796510);f=n(f,c,d,_,e[r+6],9,-1069501632);_=n(_,f,c,d,e[r+11],14,643717713);d=n(d,_,f,c,e[r],20,-373897302);c=n(c,d,_,f,e[r+5],5,-701558691);f=n(f,c,d,_,e[r+10],9,38016083);_=n(_,f,c,d,e[r+15],14,-660478335);d=n(d,_,f,c,e[r+4],20,-405537848);c=n(c,d,_,f,e[r+9],5,568446438);f=n(f,c,d,_,e[r+14],9,-1019803690);_=n(_,f,c,d,e[r+3],14,-187363961);d=n(d,_,f,c,e[r+8],20,1163531501);c=n(c,d,_,f,e[r+13],5,-1444681467);f=n(f,c,d,_,e[r+2],9,-51403784);_=n(_,f,c,d,e[r+7],14,1735328473);d=n(d,_,f,c,e[r+12],20,-1926607734);c=s(c,d,_,f,e[r+5],4,-378558);f=s(f,c,d,_,e[r+8],11,-2022574463);_=s(_,f,c,d,e[r+11],16,1839030562);d=s(d,_,f,c,e[r+14],23,-35309556);c=s(c,d,_,f,e[r+1],4,-1530992060);f=s(f,c,d,_,e[r+4],11,1272893353);_=s(_,f,c,d,e[r+7],16,-155497632);d=s(d,_,f,c,e[r+10],23,-1094730640);c=s(c,d,_,f,e[r+13],4,681279174);f=s(f,c,d,_,e[r],11,-358537222);_=s(_,f,c,d,e[r+3],16,-722521979);d=s(d,_,f,c,e[r+6],23,76029189);c=s(c,d,_,f,e[r+9],4,-640364487);f=s(f,c,d,_,e[r+12],11,-421815835);_=s(_,f,c,d,e[r+15],16,530742520);d=s(d,_,f,c,e[r+2],23,-995338651);c=o(c,d,_,f,e[r],6,-198630844);f=o(f,c,d,_,e[r+7],10,1126891415);_=o(_,f,c,d,e[r+14],15,-1416354905);d=o(d,_,f,c,e[r+5],21,-57434055);c=o(c,d,_,f,e[r+12],6,1700485571);f=o(f,c,d,_,e[r+3],10,-1894986606);_=o(_,f,c,d,e[r+10],15,-1051523);d=o(d,_,f,c,e[r+1],21,-2054922799);c=o(c,d,_,f,e[r+8],6,1873313359);f=o(f,c,d,_,e[r+15],10,-30611744);_=o(_,f,c,d,e[r+6],15,-1560198380);d=o(d,_,f,c,e[r+13],21,1309151649);c=o(c,d,_,f,e[r+4],6,-145523070);f=o(f,c,d,_,e[r+11],10,-1120210379);_=o(_,f,c,d,e[r+2],15,718787259);d=o(d,_,f,c,e[r+9],21,-343485551);c=t(c,h);d=t(d,l);_=t(_,u);f=t(f,p)}return[c,d,_,f]}function l(e){var t,i="";for(t=0;t<e.length*32;t+=8){i+=String.fromCharCode(e[t>>5]>>>t%32&255)}return i}function u(e){var t,i=[];i[(e.length>>2)-1]=undefined;for(t=0;t<i.length;t+=1){i[t]=0}for(t=0;t<e.length*8;t+=8){i[t>>5]|=(e.charCodeAt(t/8)&255)<<t%32}return i}function p(e){return l(h(u(e),e.length*8))}function c(e,t){var i,r=u(e),a=[],n=[],s;a[15]=n[15]=undefined;if(r.length>16){r=h(r,e.length*8)}for(i=0;i<16;i+=1){a[i]=r[i]^909522486;n[i]=r[i]^1549556828}s=h(a.concat(u(t)),512+t.length*8);return l(h(n.concat(s),512+128))}function d(e){var t="0123456789abcdef",i="",r,a;for(a=0;a<e.length;a+=1){r=e.charCodeAt(a);i+=t.charAt(r>>>4&15)+t.charAt(r&15)}return i}function _(e){return unescape(encodeURIComponent(e))}function f(e){return p(_(e))}function g(e){return d(f(e))}function m(e,t){return c(_(e),_(t))}function v(e,t){return d(m(e,t))}function y(e,t,i){if(!t){if(!i){return g(e)}return f(e)}if(!i){return v(t,e)}return m(t,e)}e.md5=y})(t);(function(e){"use strict";var t={};t.startsWith=function(e,t){return e.indexOf(t)==0};e.StringUtils=t})(t);(function(e){"use strict";var t={};t.clone=function(e){var t={};for(var i in e){if(e.hasOwnProperty(i)){t[i]=e[i]}}return t};t.merge=function(e,i){var r=t.clone(e);for(var a in i){if(i.hasOwnProperty(a)){r[a]=i[a]}}return r};e.ObjectUtils=t})(t);(function(e){"use strict";function t(e,t,i){this.fn=e;this.ctx=t;this.params=i}t.prototype.run=function(){this.params?this.fn.apply(this.ctx,this.params):this.fn.apply(this.ctx)};e.radio.Command=t})(r);(function(e){"use strict";function t(e,t){this._queue=[];this._lastTs=0;this._isSuspended=typeof e!=="undefined"?e:false;this._delay=typeof t!=="undefined"?t:0}t.prototype.addCommand=function(e){this._queue.push(e);this._drain()};t.prototype.cancelAllCommands=function(){this._queue=[]};t.prototype.isEmpty=function(){return this._queue.length===0};t.prototype.suspend=function(){this._isSuspended=true};t.prototype.resume=function(){this._isSuspended=false;this._drain()};t.prototype.flush=function(){this._isSuspended=false;for(var e=0;e<this._queue.length;e++){var t=this._queue[e];t.run()}this._queue=[]};t.prototype._drain=function(){if(this._isSuspended||this._drainInProgress)return;this._drainInProgress=true;var e=this;(function t(){var i=e._queue.shift();if(i){e._runCommand(i,function(){if(e._isSuspended)return;t()})}else{e._drainInProgress=false}})()};t.prototype._runCommand=function(e,t){var i=this;function r(){e.run();if(t!=null){t.call(i)}}if(this._lastTs==0){r()}else{var a=(new Date).getTime();var n=a-this._lastTs;this._lastTs=a;if(n<this._delay){setTimeout(r,this._delay-n)}else{r()}}};e.radio.CommandQueue=t})(r);(function(e){"use strict";t.WILDCARD="*";t.SEPARATOR=":";function t(e,t){this._name=e;if(!t){throw new Error("Reference to the logger object cannot be NULL")}this._logger=t;this._listeners={};this._requests={};this._commands={};this._isShutDown=false}t.prototype.toString=function(){return"<channel: "+this._name+">"};t.prototype.shutdown=function(){if(this._isShutDown)return;this._logger.debug(r,"#shutdown > Shutting down");this.off();this._requests={};this._commands={};this._isShutDown=true};t.prototype.on=function(e,t,i){if(this._isShutDown)return;if(!this._listeners[e]){this._listeners[e]=[]}this._listeners[e].push({fn:t,ctx:i})};t.prototype.off=function(e,t,i){if(this._isShutDown)return;t=typeof t==="function"?t:null;if(!e&&t==null&&!i){this._listeners={};return}if(!e){for(e in this._listeners){if(this._listeners.hasOwnProperty(e)){this._removeListener(e,t,i)}}}else{this._removeListener(e,t,i)}};t.prototype.trigger=function(e){if(this._isShutDown)return;for(var t in this._listeners){if(this._listeners.hasOwnProperty(t)){if(i(t,e.name)){var r=this._listeners[t].slice(0);for(var a=0;a<r.length;a++){var n=r[a];n.fn.call(n.ctx,e)}}}}};t.prototype.comply=function(e,t,i){if(this._isShutDown)return;this._commands[e]={cmd:t,ctx:i}};t.prototype.command=function(e,t){if(this._isShutDown)return;var i=this._commands[e];if(!i){this._logger.warn(r,"#command > No command handler for: "+e);return}i.cmd.call(i.ctx,t)};t.prototype.reply=function(e,t,i){if(this._isShutDown)return;this._requests[e]={fn:t,ctx:i}};t.prototype.request=function(e){if(this._isShutDown)return;var t=this._requests[e];if(!t){this._logger.warn(r,"#request > No request handler for: "+e);return null}return t.fn.call(t.ctx)};t.prototype._removeListener=function(e,t,i){t=typeof t==="function"?t:null;var r=this._listeners[e];if(!r)return;if(!r.length||t==null&&!i){delete this._listeners[e];return}for(var a=0;a<r.length;a++){var n=r[a];if((t===null||t===n.fn)&&(!i||i===n.ctx)){this._listeners[e].splice(a,1)}}};function i(e,i){if(e===i)return true;var r=(e||"").split(t.SEPARATOR),a=(i||"").split(t.SEPARATOR),n=true;for(var s=0;s<r.length;s++){n=n&&(r[s]===t.WILDCARD||r[s]===a[s])}return n}var r="radio::Channel";e.radio.Channel=t})(r);(function(e){"use strict";var t=e.radio.Channel;function i(e){if(!e){throw new Error("Reference to the logger object cannot be NULL")}this._logger=e;this._channels={}}i.prototype.channel=function(e){if(!this._channels[e]){this._channels[e]=new t(e,this._logger)}return this._channels[e]};i.prototype.shutdown=function(){for(var e in this._channels){if(this._channels.hasOwnProperty(e)){this._channels[e].shutdown()}}};e.radio.Radio=i})(r);(function(e){"use strict";function t(e,t){for(var i in t){if(t.hasOwnProperty(i))e[i]=t[i]}function r(){this.constructor=e}r.prototype=t.prototype;e.prototype=new r;e.__super__=t.prototype;return e}e.extend=t})(r);(function(e){"use strict";function t(){}t.prototype.write=function(e){throw new Error("Implementation error: Method must be overridden.")};e.ILogWriter=t})(r);(function(e){"use strict";function t(){}t.prototype.write=function(e){if(window["console"]&&window["console"]["log"]){window["console"]["log"](e)}};e.LogWriter=t})(r,i);(function(e){"use strict";function t(){}t.prototype.setLogWriter=function(e){throw new Error("Implementation error: Method must be overridden.")};t.prototype.getLogWriter=function(){throw new Error("Implementation error: Method must be overridden.")};t.prototype.getEnabled=function(){throw new Error("Implementation error: Method must be overridden.")};t.prototype.enable=function(){throw new Error("Implementation error: Method must be overridden.")};t.prototype.disable=function(){throw new Error("Implementation error: Method must be overridden.")};t.prototype.debug=function(e,t){throw new Error("Implementation error: Method must be overridden.")};t.prototype.info=function(e,t){throw new Error("Implementation error: Method must be overridden.")};t.prototype.warn=function(e,t){throw new Error("Implementation error: Method must be overridden.")};t.prototype.error=function(e,t){throw new Error("Implementation error: Method must be overridden.")};e.ILogger=t})(r);(function(e){"use strict";var t=e.LogWriter;function i(){this._logWriter=new t}i.prototype.setLogWriter=function(e){if(!e){throw new Error("Reference to the ILogWriter object cannot be NULL")}this._logWriter=e;this._enabled=false};i.prototype.getLogWriter=function(){return this._logWriter};i.prototype.getEnabled=function(){return this._enabled};i.prototype.enable=function(){this._enabled=true};i.prototype.disable=function(){this._enabled=false};i.prototype.debug=function(e,t){this._log(e,n,t)};i.prototype.info=function(e,t){this._log(e,a,t)};i.prototype.warn=function(e,t){this._log(e,s,t)};i.prototype.error=function(e,t){this._log(e,o,t)};i.prototype._log=function(e,t,i){if(t!=o){if(!this._enabled)return}var a="";var n=new Date;a+="["+n.toTimeString()+"."+r(n.getMilliseconds())+"] ["+t+"] ";a+="["+e+"] "+i;this._logWriter.write(a)};function r(e){if(e<10)return"00"+e;if(e<100)return"0"+e;return""+e}var a="INFO";var n="DEBUG";var s="WARN";var o="ERROR";e.Logger=i})(r);(function(e){"use strict";var t=e.radio.Channel;function i(e,t){this._pluginName=e;this._eventName=t}i.prototype.getPluginName=function(){return this._pluginName};i.prototype.getEventName=function(){return this._eventName};i.prototype.getName=function(){return this._pluginName+t.SEPARATOR+this._eventName};e.Trigger=i})(r);(function(e){"use strict";t.SUCCESS="success";t.ERROR="error";t.createFromTrigger=function(e){return new t(e.getName())};function t(e,t){this.name=e;this.data=t}e.Event=t})(r);(function(e){"use strict";function t(){this._events={}}t.prototype.addEventListener=function(e,t,i){if(!e||!t)return;i=i||window;this._events[e]=this._events[e]||[];this._events[e].push({cb:t,ctx:i})};t.prototype.removeEventListener=function(e,t,i){if(!e||!t)return;i=i||window;var r,a,n=false;for(a in this._events){if(e===a){n=true;break}}if(!n)return;for(r=this._events[a].length-1;r>=0;r--){var s=this._events[a][r];if(t===s.cb&&i===s.ctx){this._events[a].splice(r,1)}}if(!this._events[a].length)delete this._events[a]};t.prototype.dispatchEvent=function(e){if(!e.name)return;var t,i;for(t in this._events){if(this._events.hasOwnProperty(t)&&e.name===t){var r=this._events[t],a=r.slice(0),n=a.length;for(i=0;i<n;i++){a[i].cb.call(a[i].ctx,e)}break}}};t.prototype.removeAllListeners=function(e){if(!e){this._events={}}else{var t,i;for(i in this._events){if(this._events.hasOwnProperty(i)){for(t=this._events[i].length-1;t>=0;t--){var r=this._events[i][t];if(r.ctx===e){this._events[i].splice(t,1)}}if(!this._events[i].length)delete this._events[i]}}}};e.EventDispatcher=t})(r);(function(e){"use strict";var t=e.Event;var i=e.EventDispatcher;r.GET="GET";function r(){}function a(e,t){this.url=e||null;this.method=t;this._xmlhttp=null}n.RESPONSE="response";n.INSTANCE="instance";e.extend(n,i);function n(){n.__super__.constructor.call(this);this._connection=null}n.prototype.close=function(){this.removeAllListeners(null)};n.prototype.load=function(e){if(!e||!e.method||!e.url){return}e._xmlhttp=this._createCORSRequest(e);if(e._xmlhttp){e._xmlhttp.send()}else{this._loadImage(e)}};n.prototype._createCORSRequest=function(e){var i=null;if(typeof window["XMLHttpRequest"]!=="undefined"){var r=new window["XMLHttpRequest"];if("withCredentials"in r){i=r;i.open(e.method,e.url,true)}}if(i==null){if(typeof window["XDomainRequest"]!=="undefined"){i=new window["XDomainRequest"];i.open(e.method,e.url)}}if(i){var a={};a[n.INSTANCE]=this;var s=this;i.onload=function(){if(i.status&&parseInt(i.status,10)>=400){return this.onerror()}a[n.RESPONSE]=i.responseText;s.dispatchEvent(new t(t.SUCCESS,a))};i.onerror=function(){s.dispatchEvent(new t(t.ERROR,a))}}return i};n.prototype._loadImage=function(e){if(!this._connection){this._connection=new Image;this._connection.alt=""}this._connection.src=e.url;var i={};i[n.RESPONSE]="";i[n.INSTANCE]=this;this.dispatchEvent(new t(t.SUCCESS,i))};e.URLRequestMethod=r;e.URLRequest=a;e.URLLoader=n})(r);(function(e){"use strict";var t="js";var i="1";var r="5";var a="1";var n="1";var s="bf08a7e";var o=3;var h={};h.getVersion=function(){return t+"-"+i+"."+r+"."+a+"."+n+"-"+s};h.getMajor=function(){return i};h.getMinor=function(){return r};h.getMicro=function(){return a};h.getPatch=function(){return n};h.getBuild=function(){return s};h.getApiLevel=function(){return o};e.Version=h})(i);(function(e){"use strict";function t(e,t){this._message=e;this._details=t}t.prototype.getMessage=function(){return this._message};t.prototype.getDetails=function(){return this._details};e.ErrorInfo=t})(i);(function(e){"use strict";function t(){this.debugLogging=false}e.HeartbeatConfig=t})(i);(function(e){"use strict";function t(){}t.prototype.onError=function(e){};e.HeartbeatDelegate=t})(i);(function(e){"use strict";function t(){}t.prototype.configure=function(e){throw new Error("Implementation error: Method must be overridden.")};t.prototype.bootstrap=function(e){throw new Error("Implementation error: Method must be overridden.")};t.prototype.setup=function(){throw new Error("Implementation error: Method must be overridden.")};t.prototype.destroy=function(){throw new Error("Implementation error: Method must be overridden.")};t.prototype.enable=function(){throw new Error("Implementation error: Method must be overridden.")};t.prototype.disable=function(){throw new Error("Implementation error: Method must be overridden.")};t.prototype.getName=function(){throw new Error("Implementation error: Method must be overridden.")};t.prototype.isInitialized=function(){throw new Error("Implementation error: Method must be overridden.")};t.prototype.resolveData=function(e){throw new Error("Implementation error: Method must be overridden.")};e.plugin.IPlugin=t})(r);(function(e){"use strict";var t=e.plugin.ParamMapping;function i(e,t,i,r){this.trigger=e;this.action=i;this.plugin=t;this._paramMappings={};this.mergeParams(r)}i.prototype.mergeParams=function(e){if(e){for(var t=0;t<e.length;t++){var i=e[t];this._paramMappings[i.getKeyName()]=i}}};i.prototype.getParams=function(){var e=[];for(var t in this._paramMappings){if(this._paramMappings.hasOwnProperty(t)){e.push(this._paramMappings[t])}}return e};i.prototype.addParam=function(e){this._paramMappings[e.getKeyName()]=e};i.prototype.removeParam=function(e,i){var r=new t(e,i);if(this._paramMappings.hasOwnProperty(r.getKeyName())){delete this._paramMappings[r.getKeyName()]}};e.plugin.Behaviour=i})(r);(function(e){"use strict";var t=e.radio.Channel;function i(e,i,r){this._pluginName=e;this._key=i;this._paramName=r||e+t.SEPARATOR+i}i.prototype.getPluginName=function(){return this._pluginName};i.prototype.getKey=function(){return this._key};i.prototype.getKeyName=function(){return this._pluginName+t.SEPARATOR+this._key};i.prototype.getParamName=function(){return this._paramName};e.plugin.ParamMapping=i})(r);(function(e){"use strict";var t=e.Event;var i=e.radio.Radio;var r=e.radio.Channel;var a=e.plugin.Behaviour;n.ERROR="error";function n(e){if(!e){throw new Error("Reference to the logger object cannot be NULL")}this._logger=e;this._plugins={};this._behaviours={};this._radio=new i(this._logger);this._dataChannel=this._radio.channel(s);this._ctrlChannel=this._radio.channel(o)}n.prototype.addPlugin=function(e){var t=e.getName();if(this._plugins[t]){this._logger.warn(h,"#addPlugin > Replacing plugin: "+t)}this._plugins[t]=e;e.bootstrap(this)};n.prototype.setupPlugins=function(){for(var e in this._plugins){if(this._plugins.hasOwnProperty(e)){this._plugins[e].setup()}}};n.prototype.pluginExists=function(e){return!!this._plugins[e]};n.prototype.isPluginInitialized=function(e){return this._plugins[e]&&this._plugins[e].isInitialized()};n.prototype.on=function(e,t,i,a){this._dataChannel.on(e+r.SEPARATOR+t,i,a)};n.prototype.off=function(e,t,i,a){var n=e&&t?e+r.SEPARATOR+t:null;this._dataChannel.off(n,i,a)};n.prototype.trigger=function(e){var t=e.name;var i=this._behaviours[t];if(i){var r,a,n,s,o,h={},l={};for(r=0;r<i.length;r++){n=i[r];s=n.getParams();if(s){for(a=0;a<s.length;a++){o=s[a];h[o.getPluginName()]=h[o.getPluginName()]||[];if(!(o.key in h[o.getPluginName()])){h[o.getPluginName()].push(o.getKey())}}}}for(var u in h){if(h.hasOwnProperty(u)){l[u]=this.request(u,h[u])}}for(r=0;r<i.length;r++){n=i[r];var p={_behaviour:n,_eventData:e.data||{}};s=n.getParams();if(s){for(a=0;a<s.length;a++){o=s[a];p[o.getParamName()]=l[o.getPluginName()]?l[o.getPluginName()][o.getKey()]:null}this.command(n.plugin.getName(),n.action,p)}}}this._dataChannel.trigger(e)};n.prototype.request=function(e,t){var i=this._plugins[e];if(!i||!t||t.length==0)return null;return i.resolveData(t)};n.prototype.raise=function(e){this._errorInfo=e;var i=new t(n.ERROR,e);this._ctrlChannel.trigger(i)};n.prototype.getErrorInfo=function(){return this._errorInfo};n.prototype.destroy=function(){this._radio.shutdown();for(var e in this._plugins){if(this._plugins.hasOwnProperty(e)){this._plugins[e].destroy()}}};n.prototype.comply=function(e,t,i){this._dataChannel.comply(e.getName()+r.SEPARATOR+t,i,e)};n.prototype.command=function(e,t,i){this._dataChannel.command(e+r.SEPARATOR+t,i)};n.prototype.registerBehaviour=function(e,t,i,r){var n=e.getName();var s=new a(e,t,i,r);this._behaviours[n]=this._behaviours[n]||[];this._behaviours[n].push(s)};var s="data_channel";var o="ctrl_channel";var h="plugin::PluginManager";e.plugin.PluginManager=n})(r);(function(e,t){"use strict";var i=e.Logger;var r=e.Trigger;var a=e.Event;var n=t.ErrorInfo;s.INITIALIZED="initialized";function s(e){this._name=e;this._isInitialized=false;this._isDestroyed=false;this._isEnabled=true;this._dataResolver={};this._logTag="plugin::"+this.getName();this._logger=new i}s.prototype.configure=function(e){};s.prototype.bootstrap=function(e){this._pluginManager=e;if(this._isDestroyed){this._pluginManager.raise(new n("Invalid state.","Plugin already destroyed."))}};s.prototype.setup=function(){this._trigger(s.INITIALIZED);this._isInitialized=true};s.prototype.destroy=function(){if(this._isDestroyed)return;this._isDestroyed=true;this._teardown()};s.prototype.enable=function(){this._isEnabled=true;this._enabled()};s.prototype.disable=function(){this._isEnabled=false;this._disabled()};s.prototype.getName=function(){return this._name};s.prototype.getLogger=function(){return this._logger};s.prototype.isInitialized=function(){return this._isInitialized};s.prototype.resolveData=function(e){if(!this._isEnabled||!this._isInitialized){this._logger.warn(this._logTag,"Unable to retrieve plugin data"+". Plugin: "+this._name+". Enabled: "+this._isEnabled+". Initialized: "+this._isInitialized+".");return null}if(typeof this._dataResolver==="function"){return this._dataResolver.call(this,e)}var t=null;if(e){for(var i=0;i<e.length;i++){var r=e[i];if(this._dataResolver.hasOwnProperty(r)){t=t||{};if(typeof this._dataResolver[r]==="function"){t[r]=this._dataResolver[r].call(this)}else{t[r]=this._dataResolver[r]}}}}return t};s.prototype.toString=function(){return"<plugin: "+this._name+">"};s.prototype._enabled=function(){};s.prototype._disabled=function(){};s.prototype._teardown=function(){};s.prototype._canProcess=function(){if(!this._isEnabled){this._logger.error(this._logTag,"Plugin disabled.");return false}if(this._isDestroyed){this._logger.error(this._logTag,"Plugin destroyed.");return false}return true};s.prototype._trigger=function(e,t){var i=a.createFromTrigger(new r(this.getName(),e));i.data=t;this._pluginManager.trigger(i)};e.plugin.BasePlugin=s})(r,i);(function(e){"use strict";function t(e,t,i){this.name=e;this.interval=t;this.isActive=false;this.repeatCount=typeof i!=="undefined"?i:a;this._nextTickTimestamp=0;this.reset()}t.prototype.reset=function(){this.tick=0;this._createdTimestamp=(new Date).getTime();this._updateNextTickTimestamp()};t.prototype.shouldTick=function(){var e=(new Date).getTime();if(e>this._nextTickTimestamp-n/2){this.tick++;this._updateNextTickTimestamp();return true}return false};t.prototype._updateNextTickTimestamp=function(){this._nextTickTimestamp=this._createdTimestamp+this.interval*1e3*(this.tick+1)};function i(e,t){if(!e){throw new Error("Reference to the ClockService object cannot be NULL")}this._service=e;if(!t){throw new Error("Reference to the logger object cannot be NULL")}this._logger=t;this._isDestroyed=false;this._timers={};var i=this;this._clock=window.setInterval(function(){i._onTick()},n*1e3)}i.prototype.createTimer=function(e,i,r){this._timers[e]=new t(e,i,r)};i.prototype.destroyTimer=function(e){delete this._timers[e]};i.prototype.resumeTimer=function(e,t){t=typeof t!=="undefined"?t:false;this._logger.debug(r,"#resumeTimer("+"name="+e+", reset="+t+")");var i=this._timers[e];if(i){i.isActive=true;if(t){i.reset()}}};i.prototype.pauseTimer=function(e,t){t=typeof t!=="undefined"?t:false;this._logger.debug(r,"#pauseTimer("+"name="+e+", reset="+t+")");var i=this._timers[e];if(i){i.isActive=false;if(t){i.reset()}}};i.prototype.isTimerPaused=function(e){var t=this._timers[e];return t?!t.isActive:false};i.prototype.destroy=function(){if(this._isDestroyed)return;this._isDestroyed=true;this._timers={};window.clearInterval(this._clock)};i.prototype._onTick=function(){for(var e in this._timers){if(this._timers.hasOwnProperty(e)){var t=this._timers[e];if(t.isActive){if(t.shouldTick()){if(t.interval>1){this._logger.debug(r,"#_onTick() > "+t.name+"("+t.tick+" | "+t.repeatCount+")")}if(t.repeatCount!=0){this._service.onTick(t.name,t.interval,t.tick);if(t.repeatCount!=a)t.repeatCount--}else{this.destroyTimer(t.name)}}}}}};var r="service.clock::TimerManager";var a=-1;var n=.25;e.clock.TimerDescriptor=t;e.clock.TimerManager=i})(a);(function(e,t,i){"use strict";var r=i.clock.TimerManager;var a=t.StringUtils;var n=e.plugin.BasePlugin;e.extend(s,n);function s(e){s.__super__.constructor.call(this,o);if(!e){throw new Error("Reference to the logger object cannot be NULL")}this._logger=e;this._timerManager=new r(this,this._logger);this._setupDataResolver()}s.prototype.bootstrap=function(e){s.__super__.bootstrap.call(this,e);this._pluginManager.comply(this,h,this._cmdCreate);this._pluginManager.comply(this,u,this._cmdResume);this._pluginManager.comply(this,l,this._cmdPause);this._pluginManager.comply(this,p,this._cmdDestroy)};s.prototype._teardown=function(){this._timerManager.destroy()};s.prototype._cmdCreate=function(e){var t=e[_]||v;this._timerManager.createTimer(e[c],e[d],t)};s.prototype._cmdPause=function(e){this._timerManager.pauseTimer(e[c],!!e[g])};s.prototype._cmdResume=function(e){this._timerManager.resumeTimer(e[c],!!e[g])};s.prototype._cmdDestroy=function(e){this._timerManager.destroyTimer(e[c])};s.prototype.onTick=function(e,t,i){e+=".tick";var r={};r[c]=e;r[d]=t;r[f]=i;this._trigger(e,r)};s.prototype._setupDataResolver=function(){var e={};var t=this._timerManager;e[m]=function(e){return t.isTimerPaused(e)};this._dataResolver=function(t){if(!t||t.length==0)return null;var i=null;for(var r=0;r<t.length;r++){var n=t[r];i=i||{};if(a.startsWith(n,m)){var s=n.split(m+".");if(s.length>0){i[n]=e[m].call(this,s[1])}}}return i}};var o="service.clock";var h="create";var l="pause";var u="resume";var p="destroy";var c="name";var d="interval";var _="repeat_count";var f="tick";var g="reset";var m="is_paused";var v=-1;i.clock.ClockService=s})(r,t,a);(function(e,t,i){"use strict";var r=e.Logger;var a=e.plugin.PluginManager;var n=t.clock.ClockService;function s(e,t){this._logger=new r;this._pluginManager=new a(this._logger);this._pluginManager.addPlugin(new n(this._logger));if(t){for(var i=0;i<t.length;i++){this._pluginManager.addPlugin(t[i])}}this._pluginManager.setupPlugins();this._isDestroyed=false}s.prototype.configure=function(e){if(!e){throw new Error("Configuration object cannot be NULL.")}if(e.debugLogging){this._logger.enable()}else{this._logger.disable()}if(this._isDestroyed){this._logger.error(o,"Instance is destroyed.")}};s.prototype.destroy=function(){if(this._isDestroyed)return;this._pluginManager.destroy();this._isDestroyed=true};var o="Heartbeat";i.Heartbeat=s})(r,a,i);e.ADB||(e.ADB={});e.ADB.core||(e.ADB.core=r);e.ADB.va||(e.ADB.va=i);e.ADB.va.utils||(e.ADB.va.utils=t);e.ADB.va.plugins||(e.ADB.va.plugins={})})(this);(function(e){if(typeof t==="undefined"){var t={}}(function(e){"use strict";var t={};t.ASSET_TYPE_VOD="vod";t.ASSET_TYPE_LIVE="live";t.ASSET_TYPE_LINEAR="linear";e.AssetType=t})(t);(function(e){"use strict";function t(){this.playerName=null;this.name=null;this.position=null;this.startTime=null}t.prototype.toString=function(){return"playerName="+this.playerName+", name="+this.name+", position="+this.position+", startTime="+this.startTime};e.AdBreakInfo=t})(t);(function(e){"use strict";function t(){this.id=null;this.name=null;this.length=null;this.position=null}t.prototype.toString=function(){return"id="+this.id+", name="+this.name+", length="+this.length+", position="+this.position};e.AdInfo=t})(t);(function(e){"use strict";function t(){this.name=null;this.length=null;this.position=null;this.startTime=null}t.prototype.toString=function(){return"name="+this.name+", length="+this.length+", position="+this.position+", startTime="+this.startTime};e.ChapterInfo=t})(t);(function(e){"use strict";function t(){this.bitrate=null;this.fps=null;this.droppedFrames=null;this.startupTime=null}t.prototype.toString=function(){return"bitrate="+this.bitrate+", fps="+this.fps+", droppedFrames="+this.droppedFrames+", startupTime="+this.startupTime};e.QoSInfo=t})(t);(function(e){"use strict";function t(){this.playerName=null;this.id=null;this.name=null;this.length=null;this.playhead=null;this.streamType=null}t.prototype.toString=function(){return"playerName="+this.playerName+", id="+this.id+", name="+this.name+", length="+this.length+", playhead="+this.playhead+", streamType="+this.streamType};e.VideoInfo=t})(t);(function(e){"use strict";function t(){this.debugLogging=false}e.VideoPlayerPluginConfig=t})(t);(function(e){"use strict";function t(){}t.prototype.getVideoInfo=function(){throw new Error("Implementation error: Method must be overridden.")};t.prototype.getAdBreakInfo=function(){return null};t.prototype.getAdInfo=function(){return null};t.prototype.getChapterInfo=function(){return null};t.prototype.getQoSInfo=function(){return null};e.VideoPlayerPluginDelegate=t})(t);(function(e,t){"use strict";var i=e.plugin.BasePlugin;var r=t.VideoPlayerPluginConfig;e.extend(a,i);function a(e){a.__super__.constructor.call(this,n);if(!e){throw new Error("PlayerPlugin delegate cannot be NULL.")}this._delegate=e;this._isTrackingSessionActive=false;this._isTrackingSessionStarted=false;this._setupDataResolver()}a.prototype.configure=function(e){if(!e){throw new Error("Reference to the configuration data cannot be NULL.")}if(!(e instanceof r)){throw new Error("Expected config data to be instance of VideoPlayerPluginConfig.")}if(e.debugLogging){this._logger.enable()}else{this._logger.disable()}this._logger.debug(this._logTag,"#configure(debugLogging="+e.debugLogging+")")};a.prototype.trackSessionStart=function(){this._logger.info(this._logTag,"#trackSessionStart()");if(!this._canProcess())return;if(!this._isTrackingSessionActive){this._logger.warn(this._logTag,"#trackSessionStart() > No active tracking session.");return}if(this._isTrackingSessionStarted){this._logger.info(this._logTag,"#trackSessionStart() > Tracking session already started.");return}this._trigger(u);this._isTrackingSessionStarted=true};a.prototype.trackVideoLoad=function(){this._logger.info(this._logTag,"#trackVideoLoad()");if(!this._canProcess())return;this._trigger(h);this._isTrackingSessionActive=true;this._isTrackingSessionStarted=false};a.prototype.trackVideoUnload=function(){this._logger.info(this._logTag,"#trackVideoUnload()");if(!this._canProcess())return;if(!this._isTrackingSessionActive){this._logger.warn(this._logTag,"#trackVideoUnload() > No active tracking session.");return}this._trigger(l);this._isTrackingSessionActive=false;this._isTrackingSessionStarted=false};a.prototype.trackPlay=function(){this._logger.info(this._logTag,"#trackPlay()");if(!this._canProcess())return;if(!this._startSessionIfNeeded("trackPlay"))return;this._trigger(c)};a.prototype.trackPause=function(){this._logger.info(this._logTag,"#trackPause()");if(!this._canProcess())return;if(!this._startSessionIfNeeded("trackPause"))return;this._trigger(d)};a.prototype.trackBufferStart=function(){this._logger.info(this._logTag,"#trackBufferStart()");if(!this._canProcess())return;if(!this._startSessionIfNeeded("trackBufferStart"))return;this._trigger(g)};a.prototype.trackBufferComplete=function(){this._logger.info(this._logTag,"#trackBufferComplete()");if(!this._canProcess())return;if(!this._startSessionIfNeeded("trackBufferComplete"))return;this._trigger(m)};a.prototype.trackSeekStart=function(){this._logger.info(this._logTag,"#trackSeekStart()");if(!this._canProcess())return;if(!this._startSessionIfNeeded("trackSeekStart"))return;this._trigger(v)};a.prototype.trackSeekComplete=function(){this._logger.info(this._logTag,"#trackSeekComplete()");if(!this._canProcess())return;if(!this._startSessionIfNeeded("trackSeekComplete"))return;this._trigger(y)};a.prototype.trackComplete=function(e){this._logger.info(this._logTag,"#trackComplete()");if(!this._canProcess())return;if(!this._startSessionIfNeeded("trackComplete"))return;var t={};t[A]=e;this._trigger(p,t)};a.prototype.trackChapterStart=function(){this._logger.info(this._logTag,"#trackChapterStart()");if(!this._canProcess())return;if(!this._startSessionIfNeeded("#trackChapterStart"))return;this._trigger(T)};a.prototype.trackChapterComplete=function(){this._logger.info(this._logTag,"trackChapterComplete()");if(!this._canProcess())return;if(!this._startSessionIfNeeded("trackChapterComplete"))return;this._trigger(w)};a.prototype.trackAdStart=function(){this._logger.info(this._logTag,"#trackAdStart()");if(!this._canProcess())return;if(!this._startSessionIfNeeded("trackAdStart"))return;this._trigger(_)};a.prototype.trackAdComplete=function(){this._logger.info(this._logTag,"#trackAdComplete()");if(!this._canProcess())return;if(!this._startSessionIfNeeded("trackAdComplete"))return;this._trigger(f)};a.prototype.trackBitrateChange=function(){this._logger.info(this._logTag,"#trackBitrateChange()");if(!this._canProcess())return;
if(!this._startSessionIfNeeded("trackBitrateChange"))return;this._trigger(D)};a.prototype.trackVideoPlayerError=function(e){this._logger.info(this._logTag,"#trackVideoPlayerError(errorId="+e+")");if(!this._startSessionIfNeeded("trackVideoPlayerError"))return;var t={};t[k]=o;t[I]=e;this._trigger(b,t)};a.prototype.trackApplicationError=function(e){this._logger.info(this._logTag,"#trackApplicationError(errorId="+e+")");if(!this._startSessionIfNeeded("trackApplicationError"))return;var t={};t[k]=s;t[I]=e;this._trigger(b,t)};a.prototype._setupDataResolver=function(){var e={};var t={};var i=this;function r(){if(t["video"])return t["video"];t["video"]=i._delegate.getVideoInfo();i._logger.info(i._logTag,"Data from delegate > VideoInfo: "+t["video"]);return t["video"]}function a(){if(t["ad"])return t["ad"];t["ad"]=i._delegate.getAdInfo();i._logger.info(i._logTag,"Data from delegate > AdInfo: "+t["ad"]);return t["ad"]}function n(){if(t["pod"])return t["pod"];t["pod"]=i._delegate.getAdBreakInfo();i._logger.info(i._logTag,"Data from delegate > AdBreakInfo: "+t["pod"]);return t["pod"]}function s(){if(t["chapter"])return t["chapter"];t["chapter"]=i._delegate.getChapterInfo();i._logger.info(i._logTag,"Data from delegate > ChapterInfo: "+t["chapter"]);return t["chapter"]}function o(){if(t["qos"])return t["qos"];t["qos"]=i._delegate.getQoSInfo();i._logger.info(i._logTag,"Data from delegate > QoSInfo: "+t["qos"]);return t["qos"]}e["video.id"]=function(){var e=r();var t=e?e.id:null;i._logger.debug(i._logTag,"Resolving video.id: "+t);return t};e["video.name"]=function(){var e=r();var t=e?e.name:null;i._logger.debug(i._logTag,"Resolving video.name: "+t);return t};e["video.length"]=function(){var e=r();var t=e?e.length:NaN;i._logger.debug(i._logTag,"Resolving video.length: "+t);return t};e["video.playerName"]=function(){var e=r();var t=e?e.playerName:null;i._logger.debug(i._logTag,"Resolving video.playerName: "+t);return t};e["video.streamType"]=function(){var e=r();var t=e?e.streamType:null;i._logger.debug(i._logTag,"Resolving video.streamType: "+t);return t};e["video.playhead"]=function(){var e=r();var t=e?e.playhead:NaN;i._logger.debug(i._logTag,"Resolving video.playhead: "+t);return t};e["pod.name"]=function(){var e=n();var t=e?e.name:null;i._logger.debug(i._logTag,"Resolving pod.name: "+t);return t};e["pod.playerName"]=function(){var e=n();var t=e?e.playerName:null;i._logger.debug(i._logTag,"Resolving pod.playerName: "+t);return t};e["pod.position"]=function(){var e=n();var t=e?e.position:NaN;i._logger.debug(i._logTag,"Resolving pod.position: "+t);return t};e["pod.startTime"]=function(){var e=n();var t=e?e.startTime:NaN;i._logger.debug(i._logTag,"Resolving pod.startTime: "+t);return t};e["ad.isInAd"]=function(){var e=a();var t=e!=null;i._logger.debug(i._logTag,"Resolving ad.isInAd: "+t);return t};e["ad.isInAdBreak"]=function(){var e=n();var t=e!=null;i._logger.debug(i._logTag,"Resolving ad.isInAdBreak: "+t);return t};e["ad.id"]=function(){var e=a();var t=e?e.id:null;i._logger.debug(i._logTag,"Resolving ad.id: "+t);return t};e["ad.name"]=function(){var e=a();var t=e?e.name:null;i._logger.debug(i._logTag,"Resolving ad.name: "+t);return t};e["ad.length"]=function(){var e=a();var t=e?e.length:NaN;i._logger.debug(i._logTag,"Resolving ad.length: "+t);return t};e["ad.position"]=function(){var e=a();var t=e?e.position:NaN;i._logger.debug(i._logTag,"Resolving ad.position: "+t);return t};e["chapter.isInChapter"]=function(){var e=s();var t=e!=null;i._logger.debug(i._logTag,"Resolving chapter.isInChapter: "+t);return t};e["chapter.name"]=function(){var e=s();var t=e?e.name:null;i._logger.debug(i._logTag,"Resolving chapter.name: "+t);return t};e["chapter.length"]=function(){var e=s();var t=e?e.length:NaN;i._logger.debug(i._logTag,"Resolving chapter.length: "+t);return t};e["chapter.position"]=function(){var e=s();var t=e?e.position:NaN;i._logger.debug(i._logTag,"Resolving chapter.position: "+t);return t};e["chapter.startTime"]=function(){var e=s();var t=e?e.startTime:NaN;i._logger.debug(i._logTag,"Resolving chapter.startTime: "+t);return t};e["qos.bitrate"]=function(){var e=o();var t=e?e.bitrate:NaN;i._logger.debug(i._logTag,"Resolving qos.bitrate: "+t);return t};e["qos.fps"]=function(){var e=o();var t=e?e.fps:NaN;i._logger.debug(i._logTag,"Resolving qos.fps: "+t);return t};e["qos.droppedFrames"]=function(){var e=o();var t=e?e.droppedFrames:NaN;i._logger.debug(i._logTag,"Resolving qos.droppedFrames: "+t);return t};e["qos.startupTime"]=function(){var e=o();var t=e?e.startupTime*1e3:NaN;i._logger.debug(i._logTag,"Resolving qos.startupTime: "+t);return t};this._dataResolver=function(i){if(!i||i.length==0)return null;t={};var r=null;for(var a=0;a<i.length;a++){var n=i[a];r=r||{};r[n]=e.hasOwnProperty(n)?e[n].call(this):null}return r}};a.prototype._startSessionIfNeeded=function(e){if(!this._isTrackingSessionActive){this._logger.warn(this._logTag,"#"+e+"() > No active tracking session.");return false}if(!this._isTrackingSessionStarted){this._logger.info(this._logTag,"#"+e+"() > Tracking session auto-start.");this.trackSessionStart()}return true};var n="player";var s="sourceErrorExternal";var o="sourceErrorSDK";var h="video_load";var l="video_unload";var u="video_start";var p="video_complete";var c="play";var d="pause";var _="ad_start";var f="ad_complete";var g="buffer_start";var m="buffer_complete";var v="seek_start";var y="seek_complete";var T="chapter_start";var w="chapter_complete";var D="bitrate_change";var b="track_error";var A="callback";var k="source";var I="error_id";t.VideoPlayerPlugin=a})(e.ADB.core,t);e.ADB.va.plugins.videoplayer||(e.ADB.va.plugins.videoplayer=t)})(this);(function(e){if(typeof t==="undefined"){var t={}}t.clock||(t.clock={});t.context||(t.context={});t.filter||(t.filter={});t.model||(t.model={});t.network||(t.network={});(function(e,t){"use strict";var i=e.Event;r.KEY_NAME="name";r.KEY_INTERVAL="interval";r.KEY_RESET="reset";function r(e,t,i,r,a){if(!t){throw new Error("Reference to the channel object cannot be NULL")}this._channel=t;if(!e){throw new Error("Reference to the pluginManager object cannot be NULL")}this._pluginManager=e;if(!a){throw new Error("Reference to the logger object cannot be NULL")}this._logTag="ah::Timer."+i;this._logger=a;this._isDestroyed=false;this._createTimer(i,r);this._installHandlers()}r.prototype.resume=function(e){this._logger.debug(this._logTag,"Starting timer: "+this._name);var t={};t[r.KEY_NAME]=a+"."+this._name;t[r.KEY_RESET]=e;this._pluginManager.command(n,h,t)};r.prototype.pause=function(e){this._logger.debug(this._logTag,"Stopping timer: "+this._name);var t={};t[r.KEY_NAME]=a+"."+this._name;t[r.KEY_RESET]=e;this._pluginManager.command(n,o,t)};r.prototype.destroy=function(){if(this._isDestroyed)return;this._isDestroyed=true;this._uninstallHandlers();var e={};e[r.KEY_NAME]=a+"."+this._name;this._pluginManager.command(n,l,e)};r.prototype.setInterval=function(e){var t=u+"."+a+"."+this._name;var i=this._pluginManager.request(n,[t])[t];this.pause(true);this._createTimer(this._name,e);if(!i){this.resume(true)}};r.prototype._cmdResume=function(e){var t=false;if(e!=null&&e.hasOwnProperty(r.KEY_RESET)){t=e[r.KEY_RESET]}this.resume(t)};r.prototype._cmdPause=function(e){var t=false;if(e!=null&&e.hasOwnProperty(r.KEY_RESET)){t=e[r.KEY_RESET]}this.pause(t)};r.prototype._onTick=function(e,t){this._channel.trigger(new i("clock:"+this._name+".tick",t))};r.prototype._installHandlers=function(){this._channel.comply("clock:"+this._name+".resume",this._cmdResume,this);this._channel.comply("clock:"+this._name+".pause",this._cmdPause,this);this._pluginManager.on(n,a+"."+this._name+".tick",this._onTick,this)};r.prototype._uninstallHandlers=function(){this._channel.off(null,null,this);this._pluginManager.off(null,null,null,this)};r.prototype._createTimer=function(e,t){this._name=e;this._interval=t;var i={};i[r.KEY_NAME]=a+"."+this._name;i[r.KEY_INTERVAL]=this._interval;this._pluginManager.command(n,s,i)};var a="heartbeat";var n="service.clock";var s="create";var o="pause";var h="resume";var l="destroy";var u="is_paused";t.clock.Timer=r})(e.ADB.core,t);(function(e,t){"use strict";var i=e.Event;var r=t.clock.Timer;e.extend(a,r);function a(e,t,i){a.__super__.constructor.call(this,e,t,n,o,i)}a.prototype._onCheckStatusComplete=function(e){var t=e.data[p];this._logger.debug(this._logTag,"#_onCheckStatusComplete(interval="+t+")");if(t){if(t==this._interval){this._logger.debug(this._logTag,"#_onCheckStatusComplete() > Interval value not changed.");return}if(t>s){this._logger.warn(this._logTag,"#_onCheckStatusComplete() > Interval value too large: "+t);this.setInterval(s)}else{this._logger.debug(this._logTag,"#_onCheckStatusComplete() > Interval changed to: "+t);this.setInterval(t)}}else{this._logger.warn(this._logTag,"#_onCheckStatusComplete() > Invalid interval value.");this.setInterval(o)}};a.prototype._getSettings=function(e){this._logger.debug(this._logTag,"#_getSettings()");this._channel.trigger(new i(h))};a.prototype._installHandlers=function(){a.__super__._installHandlers.call(this);this._channel.on(l,this._getSettings,this);this._channel.on(u,this._onCheckStatusComplete,this);this._channel.reply(p,function(){return this._interval},this)};var n="check_status";var s=10*60;var o=60;var h="clock:check_status.tick";var l="clock:check_status.get_settings";var u="net:check_status_complete";var p="check_status_interval";t.clock.CheckStatusTimer=a})(e.ADB.core,t);(function(e,t){"use strict";var i=t.clock.Timer;e.extend(r,i);function r(e,t,i){r.__super__.constructor.call(this,e,t,a,n,i)}r.prototype._onCheckStatusComplete=function(e){var t=e.data[s];this._logger.debug(this._logTag,"#_onCheckStatusComplete(interval="+t+")");if(t){if(t==this._interval){this._logger.debug(this._logTag,"#_onCheckStatusComplete() > Interval value not changed.");return}this._logger.debug(this._logTag,"#_onCheckStatusComplete() > Interval changed to: "+t);this.setInterval(t)}else{this._logger.warn(this._logTag,"#_onCheckStatusComplete() > Invalid interval value.");this.setInterval(n)}};r.prototype._installHandlers=function(){r.__super__._installHandlers.call(this);this._channel.on(o,this._onCheckStatusComplete,this);this._channel.reply(s,function(){return this._interval},this)};var a="reporting";var n=10;var s="reporting_interval";var o="net:check_status_complete";t.clock.ReportingTimer=r})(e.ADB.core,t);(function(e,t){"use strict";var i=t.clock.Timer;e.extend(r,i);function r(e,t,i){r.__super__.constructor.call(this,e,t,a,n,i)}var a="flush_filter";var n=.25;t.clock.FlushFilterTimer=r})(e.ADB.core,t);(function(e,t){"use strict";var i=t.clock.CheckStatusTimer;var r=t.clock.FlushFilterTimer;var a=t.clock.ReportingTimer;function n(e,t,n){if(!e){throw new Error("Reference to the pluginManager object cannot be NULL")}if(!t){throw new Error("Reference to the channel object cannot be NULL")}if(!n){throw new Error("Reference to the logger object cannot be NULL")}this._isDestroyed=false;this._reportingTimer=new a(e,t,n);this._checkStatusTimer=new i(e,t,n);this._flushFilterTimer=new r(e,t,n)}n.prototype.destroy=function(){if(this._isDestroyed)return;this._isDestroyed=true;this._reportingTimer.destroy();this._checkStatusTimer.destroy();this._flushFilterTimer.destroy()};t.clock.Clock=n})(e.ADB.core,t);(function(e,t){"use strict";function i(e,t){this.value=e;this.hint=t}i.HINT_SHORT="short";function r(e){this.realm=e;this.data={}}r.prototype.setField=function(e,t,r){this.data[e]=new i(t,r)};r.prototype._createAccessor=function(e,t,i){var r=this;return function(){if(arguments.length){r[e]=arguments[0];r.setField(t,arguments[0],i)}return r[e]}};t.model.Dao=r;t.model.DaoField=i})(e.ADB.core,t);(function(e,t){"use strict";var i=t.model.Dao;e.extend(r,i);function r(){r.__super__.constructor.call(this,"asset");this.adId=this._createAccessor("_adId","ad_id",null);this.sid=this._createAccessor("_sid","ad_sid",null);this.resolver=this._createAccessor("_resolver","resolver",null);this.podId=this._createAccessor("_podId","pod_id",null);this.podPosition=this._createAccessor("_podPosition","pod_position",null);if(arguments.length&&arguments[0]instanceof r){var e=arguments[0];this.adId(e.adId());this.sid(e.sid());this.resolver(e.resolver());this.podId(e.podId());this.podPosition(e.podPosition())}else{this.adId("");this.sid("");this.resolver("");this.podId("");this.podPosition("")}}t.model.AdDao=r})(e.ADB.core,t);(function(e,t){"use strict";var i=t.model.Dao;var r=t.model.DaoField;e.extend(a,i);function a(){a.__super__.constructor.call(this,"sc");this.reportSuiteId=this._createAccessor("_reportSuiteId","rsid",null);this.trackingServer=this._createAccessor("_trackingServer","tracking_server",null);this.ssl=this._createAccessor("_ssl","ssl",r.HINT_SHORT);if(arguments.length&&arguments[0]instanceof a){var e=arguments[0];this.reportSuiteId(e.reportSuiteId());this.trackingServer(e.trackingServer());this.ssl(e.ssl())}else{this.reportSuiteId("");this.trackingServer("");this.ssl(0)}}t.model.AdobeAnalyticsDao=a})(e.ADB.core,t);(function(e,t){"use strict";var i=t.model.Dao;e.extend(r,i);function r(){r.__super__.constructor.call(this,"stream");this.id=this._createAccessor("_id","chapter_id",null);this.sid=this._createAccessor("_sid","chapter_sid",null);this.name=this._createAccessor("_name","chapter_name",null);this.position=this._createAccessor("_position","chapter_pos",null);this.length=this._createAccessor("_length","chapter_length",null);this.offset=this._createAccessor("_offset","chapter_offset",null);if(arguments.length&&arguments[0]instanceof r){var e=arguments[0];this.id(e.id());this.sid(e.sid());this.name(e.name());this.position(e.position());this.length(e.length());this.offset(e.offset())}else{this.id("");this.sid("");this.name("");this.position(0);this.length(0);this.offset(0)}}t.model.ChapterDao=r})(e.ADB.core,t);(function(e,t){"use strict";var i=t.model.Dao;var r=t.model.AdDao;var a=t.model.ChapterDao;e.extend(n,i);function n(){n.__super__.constructor.call(this,"asset");this.type=this._createAccessor("_type","type",null);this.videoId=this._createAccessor("_videoId","video_id",null);this.publisher=this._createAccessor("_publisher","publisher",null);this.adData=this._createAccessor("_adData","ad_data",null);this.chapterData=this._createAccessor("_chapterData","chapter_data",null);this.duration=this._createAccessor("_duration","duration",null);if(arguments.length&&arguments[0]instanceof n){var e=arguments[0];this.type(e.type());this.videoId(e.videoId());this.publisher(e.publisher());this.duration(e.duration());var t=e.adData()?new r(e.adData()):null;this.adData(t);var i=e.chapterData()?new a(e.chapterData()):null;this.chapterData(i)}else{this.type("");this.videoId("");this.publisher("");this.duration(0);this.adData(null);this.chapterData(null)}}n.TYPE_AD="ad";n.TYPE_MAIN_CONTENT="main";t.model.AssetDao=n})(e.ADB.core,t);(function(e,t){"use strict";var i=t.model.Dao;e.extend(r,i);r.EVENT_TYPE_AA_START="aa_start";r.EVENT_TYPE_AA_AD_START="aa_ad_start";r.EVENT_TYPE_START="start";r.EVENT_TYPE_CHAPTER_START="chapter_start";r.EVENT_TYPE_CHAPTER_COMPLETE="chapter_complete";r.EVENT_TYPE_PLAY="play";r.EVENT_TYPE_PAUSE="pause";r.EVENT_TYPE_BUFFER="buffer";r.EVENT_TYPE_BITRATE_CHANGE="bitrate_change";r.EVENT_TYPE_ERROR="error";r.EVENT_TYPE_COMPLETE="complete";function r(){r.__super__.constructor.call(this,"event");this.type=this._createAccessor("_type","type",null);this.duration=this._createAccessor("_duration","duration",null);this.playhead=this._createAccessor("_playhead","playhead",null);this.id=this._createAccessor("_id","id",null);this.source=this._createAccessor("_source","source",null);this.ts=this._createAccessor("_ts","ts",null);this.prevTs=this._createAccessor("_prevTs","prev_ts",null);if(arguments.length&&arguments[0]instanceof r){var e=arguments[0];this.type(e.type());this.duration(e.duration());this.playhead(e.playhead());this.id(e.id());this.source(e.source());this.ts(e.ts());this.prevTs(e.prevTs())}else{this.type("");this.duration(0);this.playhead(0);this.id("");this.source("");this.ts(0);this.prevTs(-1)}}t.model.EventDao=r})(e.ADB.core,t);(function(e,t){"use strict";var i=t.model.Dao;e.extend(r,i);function r(){r.__super__.constructor.call(this,"stream");this.bitrate=this._createAccessor("_bitrate","bitrate",null);this.fps=this._createAccessor("_fps","fps",null);this.droppedFrames=this._createAccessor("_droppedFrames","dropped_frames",null);this.startupTime=this._createAccessor("_startup_time","startup_time",null);if(arguments.length&&arguments[0]instanceof r){var e=arguments[0];this.bitrate(e.bitrate());this.fps(e.fps());this.droppedFrames(e.droppedFrames());this.startupTime(e.startupTime());this.isStartupTimeOverridden=e.isStartupTimeOverridden}else{this.bitrate(0);this.fps(0);this.droppedFrames(0);this.startupTime(0);this.isStartupTimeOverridden=false}}t.model.QoSDao=r})(e.ADB.core,t);(function(e,t){"use strict";var i=t.model.Dao;e.extend(r,i);function r(){r.__super__.constructor.call(this,"sp");this.ovp=this._createAccessor("_ovp","ovp",null);this.sdk=this._createAccessor("_sdk","sdk",null);this.channel=this._createAccessor("_channel","channel",null);this.playerName=this._createAccessor("_playerName","player_name",null);this.libVersion=this._createAccessor("_libVersion","hb_version",null);this.apiLevel=this._createAccessor("_apiLevel","hb_api_lvl",null);if(arguments.length&&arguments[0]instanceof r){var e=arguments[0];this.ovp(e.ovp());this.sdk(e.sdk());this.channel(e.channel());this.playerName(e.playerName());this.libVersion(e.libVersion());this.apiLevel(e.apiLevel())}else{this.ovp(a);this.sdk(a);this.channel(a);this.playerName("");this.libVersion("");this.apiLevel(0)}}var a="unknown";t.model.ServiceProviderDao=r})(e.ADB.core,t);(function(e,t){"use strict";var i=t.model.Dao;e.extend(r,i);function r(){r.__super__.constructor.call(this,"event");this.sessionId=this._createAccessor("_sessionId","sid",null);if(arguments.length&&arguments[0]instanceof r){var e=arguments[0];this.sessionId(e.sessionId())}else{this.sessionId(null)}}t.model.SessionDao=r})(e.ADB.core,t);(function(e,t){"use strict";var i=t.model.Dao;e.extend(r,i);function r(){r.__super__.constructor.call(this,"stream");this.type=this._createAccessor("_type","type",null);if(arguments.length&&arguments[0]instanceof r){var e=arguments[0];this.type(e.type())}else{this.type(null)}}t.model.StreamDao=r})(e.ADB.core,t);(function(e,t){"use strict";var i=t.model.Dao;e.extend(r,i);function r(){r.__super__.constructor.call(this,"user");this.analyticsVisitorId=this._createAccessor("_analyticsVisitorId","aid",null);this.marketingCloudVisitorId=this._createAccessor("_marketingCloudVisitorId","mid",null);this.visitorId=this._createAccessor("_visitorId","id",null);if(arguments.length&&arguments[0]instanceof r){var e=arguments[0];this.analyticsVisitorId(e.analyticsVisitorId());this.marketingCloudVisitorId(e.marketingCloudVisitorId());this.visitorId(e.visitorId())}else{this.analyticsVisitorId(null);this.marketingCloudVisitorId(null);this.visitorId(null)}}t.model.UserDao=r})(e.ADB.core,t);(function(e){"use strict";var t=e.model.EventDao;var i=e.model.AssetDao;var r=e.model.StreamDao;var a=e.model.QoSDao;function n(e,n,s,o,h){this.eventData=new t;this.eventData.type(n);this.eventData.duration(0);this.eventData.ts((new Date).getTime());this.eventData.playhead(s);this.assetData=new i(e._assetData);this.streamData=new r(e._streamData);this.qosData=new a(e._qosData);this.meta=o;this.callback=h}e.model.TrackItem=n})(t);(function(e,t){"use strict";var i=e.ObjectUtils;var r=t.model.EventDao;var a=t.model.AssetDao;var n=t.model.StreamDao;var s=t.model.QoSDao;function o(e,t,o,h,l){this.adobeAnalyticsData=e;this.userData=t;this.serviceProviderData=o;this.sessionData=h;this.eventData=new r(l.eventData);this.assetData=new a(l.assetData);this.streamData=new n(l.streamData);this.qosData=new s(l.qosData);this.meta=i.clone(l.meta);this.callback=l.callback}t.model.Report=o})(e.ADB.va.utils,t);(function(e){"use strict";function t(){}t.prototype.serializeReport=function(e){};t.prototype.serializeDao=function(e){};t.prototype.serializeMap=function(e){};t.prototype.serializeNumber=function(e,t,i,r){};t.prototype.serializeString=function(e,t,i,r){};e.model.ISerializer=t})(t);(function(e,t){"use strict";var i=t.model.Dao;var r=t.model.DaoField;var a=t.model.ISerializer;e.extend(n,a);function n(e){if(!e){throw new Error("Reference to the logger object cannot be NULL")}this._logger=e}n.prototype.serializeReport=function(e){var t=[];t.push(this.serializeDao(e.adobeAnalyticsData));t.push(this.serializeDao(e.userData));t.push(this.serializeDao(e.serviceProviderData));t.push(this.serializeDao(e.sessionData));t.push(this.serializeDao(e.eventData));t.push(this.serializeDao(e.assetData));t.push(this.serializeDao(e.streamData));t.push(this.serializeDao(e.qosData));t.push(this.serializeMap(e.meta));return{serializedOutput:t.filter(function(e){return!!e}).join("&"),callback:e.callback}};n.prototype.serializeDao=function(e){var t=this._processDao(e);return t.filter(function(e){return!!e}).join("&")};n.prototype.serializeMap=function(e){var t=[];for(var i in e){if(e.hasOwnProperty(i)&&e[i]){t.push("s:meta:"+i+"="+window["encodeURIComponent"](e[i]))}}return t.join("&")};n.prototype.serializeNumber=function(e,t,i,a){var n=o;if(t!=null&&!isNaN(t)){if(a===r.HINT_SHORT){n=h}return n+":"+i+":"+e+"="+Math.floor(t)}return null};n.prototype.serializeString=function(e,t,i,r){if(t){return l+":"+i+":"+e+"="+window["encodeURIComponent"](t)}return null};n.prototype._processDao=function(e){var t=[];for(var r in e.data){if(e.data.hasOwnProperty(r)){var a=e.data[r];var n=a.value;var o=a.hint;var h=null;var l=e.realm;if(n==null){continue}if(typeof n==="number"){h=this.serializeNumber(r,n,l,o)}else if(typeof n==="string"){h=this.serializeString(r,n,l,o)}else if(n instanceof i){h=this.serializeDao(n)}else{this._logger.warn(s,"#_processDao() > Unable to serialize DAO. Field: "+r+". Value: "+n+".")}if(h){t.push(h)}}}return t};var s="ah::QuerystringSerializer";var o="l";var h="h";var l="s";t.model.QuerystringSerializer=n})(e.ADB.core,t);(function(e,t){"use strict";function i(e,t){if(!e){throw new Error("Reference to the data object cannot be NULL")}this._data=e;if(!t){throw new Error("Reference to the logger object cannot be NULL")}this._logger=t}i.prototype.parse=function(){var e,t,i;var o;if(window["DOMParser"]){var h=new window["DOMParser"];o=h.parseFromString(this._data,"text/xml")}else{o=new window["ActiveXObject"]("Microsoft.XMLDOM");o.async=false;o.loadXML(this.data)}var l;l=parseInt(o.getElementsByTagName("trackingInterval")[0].childNodes[0].nodeValue,10);l&&(e=l);l=parseInt(o.getElementsByTagName("setupCheckInterval")[0].childNodes[0].nodeValue,10);l&&(t=l);l=parseInt(o.getElementsByTagName("trackExternalErrors")[0].childNodes[0].nodeValue,10);l&&(i=l==1);var u={};u[a]=e;u[n]=t;u[s]=i;this._logger.debug(r,"#parse() > Obtained configuration settings.");return u};var r="ah::SettingsParser";var a="reporting_interval";var n="check_status_interval";var s="track_external_errors";t.network.SettingsParser=i})(e.ADB.core,t);(function(e,t){"use strict";var i=e.Event;var r=e.URLRequestMethod;var a=e.URLRequest;var n=e.URLLoader;var s=t.network.SettingsParser;var o=t.model.QuerystringSerializer;function h(e,t){this._trackingServer=null;this._checkStatusServer=null;this._publisher=null;this._quietMode=false;this._isConfigured=false;this._isDestroyed=false;if(!e){throw new Error("Reference to the channel object cannot be NULL")}this._channel=e;if(!t){throw new Error("Reference to the logger object cannot be NULL")}this._logger=t;this._serializer=new o(t);this._installEventListeners()}h.prototype.destroy=function(){if(this._isDestroyed)return;this._isDestroyed=true;this._logger.debug(l,"#destroy()");this._uninstallEventListeners()};h.prototype._onApiConfig=function(e){var t=e.data;this._logger.debug(l,"#_onApiConfig("+"sb_server="+t[u]+", check_status_server="+t[p]+", publisher="+t[c]+", quiet_mode="+t[d]+", ssl="+t[_]+")");this._trackingServer=this._updateRequestProtocol(t[u],t[_]);this._checkStatusServer=this._updateRequestProtocol(t[p],t[_]);this._publisher=t[c];this._quietMode=t[d];this._isConfigured=true};h.prototype._onFilterReportAvailable=function(e){var t=e.data;if(!this._isConfigured){this._logger.warn(l,"#_onFilterReportAvailable() > Unable to send request: not configured.");return}var s=t[f];var o=this._serializer.serializeReport(s);var h=this._trackingServer+"/?"+o.serializedOutput;var u=new a(h,r.GET);this._logger.debug(l,"_onFilterReportAvailable() > "+u.url);var p=this;var c=function(e){_.close();if(o.callback){o.callback.call(null)}};var d=function(e){_.close();p._logger.warn(l,"#_onFilterReportAvailable() > Failed to send heartbeat report.");if(o.callback){o.callback.call(null)}};if(!this._quietMode){var _=new n;_.addEventListener(i.SUCCESS,c,this);_.addEventListener(i.ERROR,d,this);_.load(u)}};h.prototype._onClockCheckStatusTick=function(e){if(!this._isConfigured){this._logger.warn(l,"#_onClockCheckStatusTick() > Unable to send request: not configured.");return}if(!this._publisher){this._logger.warn(l,"#_onClockCheckStatusTick() > Publisher is NULL.");return}var t=this;function o(e){if(e.data){var r=new s(e.data.response,t._logger);var a=r.parse();if(a){t._channel.trigger(new i(y,a))}else{t._logger.warn(l,"#_onClockCheckStatusTick() > Failed to parse the config. settings.")}}d.close()}function h(e){t._logger.warn(l,"#_onClockCheckStatusTick() > Failed to obtain the config. settings.");d.close()}var u=this._publisher.replace(/[^a-zA-Z0-9]+/,"-").toLocaleLowerCase();var p=this._checkStatusServer+u+".xml?r="+(new Date).getTime();var c=new a(p,r.GET);var d=new n;d.addEventListener(i.SUCCESS,o,this);d.addEventListener(i.ERROR,h,this);this._logger.debug(l,"#_onClockCheckStatusTick() > Get new settings from: "+p);d.load(c)};h.prototype._updateRequestProtocol=function(e,t){var i=e;if(i.indexOf("http://")===0){i=i.slice(7)}else if(i.indexOf("https://")===0){i=i.slice(8)}return t?"https://"+i:"http://"+i};h.prototype._installEventListeners=function(){this._channel.on(g,this._onApiConfig,this);this._channel.on(m,this._onFilterReportAvailable,this);this._channel.on(v,this._onClockCheckStatusTick,this)};h.prototype._uninstallEventListeners=function(){this._channel.off(null,null,this)};var l="ah::Network";var u="tracking_server";var p="check_status_server";var c="publisher";var d="quiet_mode";var _="ssl";var f="report";var g="api:config";var m="filter:data_available";var v="clock:check_status.tick";var y="net:check_status_complete";t.network.Network=h})(e.ADB.core,t);(function(e,t){"use strict";var i=e.radio.Command;var r=e.radio.CommandQueue;var a=e.Event;var n=t.model.EventDao;var s=t.model.AssetDao;function o(e,t){if(!e){throw new Error("Reference to the channel object cannot be NULL")}this._channel=e;if(!t){throw new Error("Reference to the logger object cannot be NULL")}this._logger=t;this._isDestroyed=false;this._isBufferingInProgress=false;this._reportBuffer={};this._tsHistory={};this._workQueue=new r;this._installEventListeners()}o.prototype.destroy=function(){if(this._isDestroyed)return;this._isDestroyed=true;this._logger.debug(w,"#destroy()");this._uninstallEventListeners();this._workQueue.cancelAllCommands();this._reportBuffer={};this._tsHistory={};this._isBufferingInProgress=false};o.prototype._bufferReport=function(e){if(this._isDestroyed)return;var t=e[g];if(t){var i=t.sessionData.sessionId();this._reportBuffer[i]=this._reportBuffer[i]||[];this._reportBuffer[i].push(t)}if(!this._isBufferingInProgress){this._isBufferingInProgress=true;var r={};r[f]=true;r[m]=1;this._channel.command(v,r)}};o.prototype._flushBufferReport=function(){if(this._isDestroyed)return;var e=this;function t(t){if(t){for(var i=0;i<t.length;i++){var r=t[i];var a=r.sessionData.sessionId();e._tsHistory[a]=e._tsHistory[a]||{};var n=r.eventData.type()+"."+(r.assetData.type()==s.TYPE_AD?r.assetData.adData().adId():r.assetData.videoId());if(e._tsHistory[a].hasOwnProperty(n)){r.eventData.prevTs(e._tsHistory[a][n])}e._tsHistory[a][n]=r.eventData.ts()}}}for(var i in this._reportBuffer){if(this._reportBuffer.hasOwnProperty(i)){var r=u(l(h(this._reportBuffer[i])));t(r);for(var n=0;n<r.length;n++){var o=r[n];var p={};p[g]=o;this._channel.trigger(new a(d,p))}}}this._reportBuffer={};var c=this._channel.request(T);var _=this._tsHistory[c]||{};this._tsHistory={};this._tsHistory[c]=_;this._isBufferingInProgress=false};o.prototype._onContextReportAvailable=function(e){var t=e.data;this._workQueue.addCommand(new i(this._bufferReport,this,[t]))};o.prototype._onClockFlushFilterTick=function(e){this._workQueue.addCommand(new i(this._flushBufferReport,this))};o.prototype._installEventListeners=function(){this._channel.on(c,this._onContextReportAvailable,this);this._channel.on(_,this._onClockFlushFilterTick,this)};o.prototype._uninstallEventListeners=function(){this._channel.off(null,null,this)};function h(e){var t=[];if(e){for(var i=0;i<e.length;i++){var r=e[i];if(r.eventData.type()!=n.EVENT_TYPE_PAUSE){t.push(r)}}}return t}function l(e){var t=-1;var i=-1;var r=[];e.forEach(function(e){if(e.eventData.type()==n.EVENT_TYPE_START){if(e.assetData.type()==s.TYPE_MAIN_CONTENT){if(t==-1){t=r.push(e)-1}else{e.eventData.prevTs(-1);r[t]=e}}else{if(i==-1){i=r.push(e)-1}else{e.eventData.prevTs(-1);r[i]=e}}}else{r.push(e)}});return r}function u(e){var t=[];e.forEach(function(i){if(i.eventData.type()==n.EVENT_TYPE_PLAY){if(i.eventData.duration()>y){t.push(i)}else if(i.eventData.duration()==0&&i.assetData.type()==s.TYPE_MAIN_CONTENT){var r=p(e);if(r.indexOf(i)==r.length-1){t.push(i)}}}else{t.push(i)}});return t}function p(e){var t=[];e.forEach(function(e){if(e.eventData.type()==n.EVENT_TYPE_PLAY||e.eventData.type()==n.EVENT_TYPE_BUFFER||e.eventData.type()==n.EVENT_TYPE_START){t.push(e)}});return t}var c="context:report_available";var d="filter:data_available";var _="clock:flush_filter.tick";var f="reset";var g="report";var m="repeat_count";var v="clock:flush_filter.resume";var y=250;var T="session_id";var w="ah::ReportFilter";t.filter.ReportFilter=o})(e.ADB.core,t);(function(e,t){"use strict";var i=e.ErrorInfo;function r(e,t){this._onFail={fn:e,ctx:t}}r.prototype.validateFields=function(e,t){if(!e){return this._fail("Data cannot be null")}if(t){for(var i=0;i<t.length;i++){var r=t[i];switch(r){case"videoId":if(!e.hasOwnProperty("videoId"))return this._fail("The ID for the main video must be specified.");if(typeof e.videoId!="string")return this._fail("The ID for the main video must be a String.");if(e.videoId==="")return this._fail("The ID for the main video cannot be an empty string.");break;case"streamType":if(!e.hasOwnProperty("streamType"))return this._fail("The stream type for the main video must be specified.");if(typeof e.streamType!="string")return this._fail("The stream type for the main video must be a String.");if(e.streamType==="")return this._fail("The stream type for the main video cannot be an empty string.");break;case"videoLength":if(!e.hasOwnProperty("videoLength"))return this._fail("The length of the main video must be specified.");if(typeof e.videoLength!="number")return this._fail("The length of the main video must be a Number.");if(isNaN(e.videoLength))return this._fail("The length of the main video cannot be NaN.");break;case"playhead":if(!e.hasOwnProperty("playhead"))return this._fail("The playhead for the main video must be specified.");if(typeof e.playhead!="number")return this._fail("The playhead for the main video must be a Number.");if(isNaN(e.playhead))return this._fail("The playhead for the main video cannot be NaN.");break;case"playerName":if(!e.hasOwnProperty("playerName"))return this._fail("The player name for the main video must be specified.");if(typeof e.playerName!="string")return this._fail("The player name for the main video must be a String.");if(e.playerName==="")return this._fail("The player name for the main video cannot be an empty string.");break;case"podPlayerName":if(!e.hasOwnProperty("podPlayerName"))return this._fail("The player name for the ad-break must be specified.");
if(typeof e.podPlayerName!="string")return this._fail("The player name for the ad-break must be a String.");if(e.podPlayerName==="")return this._fail("The player name for the ad-break cannot be an empty string.");break;case"podPosition":if(!e.hasOwnProperty("podPosition"))return this._fail("Position (index) of the ad-break must be specified.");if(typeof e.podPosition!="number")return this._fail("Position (index) of the ad-break must be a Number.");if(isNaN(e.podPosition))return this._fail("Position (index) of the ad-break cannot be NaN.");break;case"adId":if(!e.hasOwnProperty("adId"))return this._fail("The ad ID must be specified.");if(typeof e.adId!="string")return this._fail("The ad ID must be a String.");if(e.adId==="")return this._fail("The ad ID cannot be an empty string.");break;case"adPosition":if(!e.hasOwnProperty("adPosition"))return this._fail("Position (index) of the ad must be specified.");if(typeof e.adPosition!="number")return this._fail("Position (index) of the ad must be a Number.");if(isNaN(e.adPosition))return this._fail("Position (index) of the ad cannot be NaN.");break;case"chapterPosition":if(!e.hasOwnProperty("chapterPosition"))return this._fail("Position (index) of the chapter must be specified.");if(typeof e.chapterPosition!="number")return this._fail("Position (index) of the chapter must be a Number.");if(isNaN(e.chapterPosition))return this._fail("Position (index) of the chapter cannot be NaN.");break;case"chapterOffset":if(!e.hasOwnProperty("chapterOffset"))return this._fail("Chapter start-time (offset) must be specified.");if(typeof e.chapterOffset!="number")return this._fail("Chapter start-time (offset) must be a Number.");if(isNaN(e.chapterOffset))return this._fail("Chapter start-time (offset) cannot be NaN.");break;case"chapterLength":if(!e.hasOwnProperty("chapterLength"))return this._fail("The length of the chapter must be specified.");if(typeof e.chapterLength!="number")return this._fail("The length of the chapter must be a Number.");if(isNaN(e.chapterLength))return this._fail("The length of the chapter cannot be NaN.");break;default:return this._fail("Unable to validate unknown parameter: "+r);break}}}return true};r.prototype._fail=function(e){var t=new i("Invalid input data",e);if(this._onFail.fn){this._onFail.fn.call(this._onFail.ctx,t)}return false};t.context.InputDataValidator=r})(e.ADB.va,t);(function(e,t){"use strict";var i=t.model.Report;function r(e,t){if(!t){throw new Error("Reference to the logger object cannot be NULL")}this._logger=t;if(!e){throw new Error("Reference to the context object cannot be NULL")}this._context=e}r.prototype.createReportForItem=function(e){this._logger.debug(a,"Creating report for item: "+e.eventData.type());return new i(this._context._adobeAnalyticsData,this._context._userData,this._context._serviceProviderData,this._context._sessionData,e)};var a="ah::ReportFactory";t.context.ReportFactory=r})(e.ADB.core,t);(function(e,t,i,r){"use strict";var a=i.md5;var n=i.ObjectUtils;var s=e.Event;var o=r.model.SessionDao;var h=r.model.AdobeAnalyticsDao;var l=r.model.ServiceProviderDao;var u=r.model.UserDao;var p=r.model.EventDao;var c=r.model.AssetDao;var d=r.model.StreamDao;var _=r.model.QoSDao;var f=r.model.AdDao;var g=r.model.ChapterDao;var m=r.model.TrackItem;var v=r.context.ReportFactory;var y=r.context.InputDataValidator;function T(e,t){if(!e){throw new Error("Reference to the channel object cannot be NULL")}this._channel=e;if(!t){throw new Error("Reference to the logger object cannot be NULL")}this._logger=t;this._lastInBandItem=null;this._autoComputedStartupTime=0;this._assetData=null;this._streamData=null;this._qosData=null;this._sessionData=null;this._adobeAnalyticsData=new h;this._serviceProviderData=new l;this._userData=new u;this._isTrackingSessionActive=false;this._isVideoComplete=false;this._activeAssetId=null;this._isDestroyed=false;this._reportFactory=new v(this,this._logger);this._inputDataValidator=new y(function(e){this._logger.error(D,e.getMessage()+" | "+e.getDetails());this._channel.trigger(new s(A,e))},this);this._stashedChapterData=null;this._stashedAdData=null;this._trackExternalErrors=true;this._installEventListeners()}T.prototype.destroy=function(){if(this._isDestroyed)return;this._isDestroyed=true;this._logger.debug(D,"#destroy()");this._uninstallEventListeners()};T.prototype._onApiAnalyticsStart=function(e){this._logger.debug(D,"#_onApiAnalyticsStart()");var t=e.data;if(!this._checkCall("_onApiAnalyticsStart"))return;if(!this._inputDataValidator.validateFields(t,["playhead"]))return;this._userData.visitorId(t.vid);this._userData.analyticsVisitorId(t.aid);this._userData.marketingCloudVisitorId(t.mid);this._updateQoSInfo(t);var i=new m(this,p.EVENT_TYPE_AA_START,t.playhead,null,t._eventData[S]);i.assetData.adData(null);i.assetData.type(c.TYPE_MAIN_CONTENT);this._sendHit(i)};T.prototype._onApiAnalyticsAdStart=function(e){this._logger.debug(D,"#_onApiAnalyticsAdStart()");var t=e.data;if(!this._checkCall("_onApiAnalyticsAdStart"))return;if(!this._inputDataValidator.validateFields(t,["playhead"]))return;this._updateQoSInfo(t);var i=new m(this,p.EVENT_TYPE_AA_AD_START,t.playhead,null,t._eventData[S]);this._sendHit(i)};T.prototype._onApiVideoLoad=function(e){this._logger.debug(D,"#_onApiVideoLoad()");this._resetInternalState();this._isTrackingSessionActive=true};T.prototype._onApiVideoUnload=function(e){this._logger.debug(D,"#_onApiVideoUnload()");if(!this._isTrackingSessionActive){this._logger.debug(D,"#_onApiVideoUnload() > No active tracking session.");return}this._isTrackingSessionActive=false};T.prototype._onApiVideoStart=function(e){var t=e.data;this._logger.debug(D,"#_onApiVideoStart("+"id="+t.videoId+", name="+t.videoName+", length="+t.videoLength+", type="+t.streamType+", playerName="+t.playerName+")");if(!this._checkCall("_onApiVideoStart"))return;if(!this._inputDataValidator.validateFields(t,["videoId","streamType","videoLength","playhead","playerName"]))return;this._adobeAnalyticsData.reportSuiteId(t.rsid);this._adobeAnalyticsData.trackingServer(t.trackingServer);this._adobeAnalyticsData.ssl(Number(t.useSsl));this._serviceProviderData.ovp(t.ovp);this._serviceProviderData.sdk(t.sdk);this._serviceProviderData.channel(t.channel);this._serviceProviderData.libVersion(t.version);this._serviceProviderData.apiLevel(t.apiLvl);this._activeAssetId=t.videoId;this._serviceProviderData.playerName(t.playerName);this._assetData.videoId(this._activeAssetId);this._assetData.duration(t.videoLength);this._assetData.type(c.TYPE_MAIN_CONTENT);this._assetData.publisher(t.publisher);this._streamData.type(t.streamType);this._sessionData.sessionId(w());this._updateQoSInfo(t);var i=new m(this,p.EVENT_TYPE_START,t.playhead,t.metaVideo,t._eventData[S]);this._sendHit(i)};T.prototype._onApiVideoComplete=function(e){this._logger.debug(D,"#_onApiVideoComplete()");var t=e.data;if(!this._checkCall("_onApiVideoComplete"))return;var i=new m(this,p.EVENT_TYPE_COMPLETE,this._assetData.duration(),null,t._eventData[S]);this._sendHit(i);this._isVideoComplete=true};T.prototype._onApiPlay=function(e){this._logger.debug(D,"#_onApiPlay()");var t=e.data;if(!this._checkCall("_onApiPlay"))return;if(!this._inputDataValidator.validateFields(t,["playhead"]))return;this._updateQoSInfo(t);var i=new m(this,p.EVENT_TYPE_PLAY,t.playhead,null,t._eventData[S]);this._sendHit(i)};T.prototype._onApiPause=function(e){this._logger.debug(D,"#_onApiPause()");var t=e.data;if(!this._checkCall("_onApiPause"))return;if(!this._inputDataValidator.validateFields(t,["playhead"]))return;this._updateQoSInfo(t);var i=new m(this,p.EVENT_TYPE_PAUSE,t.playhead,null,t._eventData[S]);this._sendHit(i)};T.prototype._onApiBufferStart=function(e){this._logger.debug(D,"#_onApiBufferStart()");var t=e.data;if(!this._checkCall("_onApiBufferStart"))return;if(!this._inputDataValidator.validateFields(t,["playhead"]))return;this._updateQoSInfo(t);var i=new m(this,p.EVENT_TYPE_BUFFER,t.playhead,null,t._eventData[S]);this._sendHit(i)};T.prototype._onApiSeekStart=function(e){this._logger.debug(D,"#_onApiSeekStart()");if(!this._checkCall("_onApiSeekStart"))return;this._stashedAdData=this._assetData.adData();this._stashedChapterData=this._assetData.chapterData();this._assetData.adData(null);this._assetData.type(c.TYPE_MAIN_CONTENT);this._activeAssetId=this._assetData.videoId();this._assetData.chapterData(null)};T.prototype._onApiSeekComplete=function(e){this._logger.debug(D,"#_onApiSeekComplete()");var t=e.data;if(!this._checkCall("_onApiSeekComplete"))return;if(!this._inputDataValidator.validateFields(t,["playhead"]))return;if(t.isInAd){if(!this._inputDataValidator.validateFields(t,["adId","adPosition","podPosition","podPlayerName"]))return;var i=a(this._assetData.videoId())+"_"+t.podPosition;if(this._stashedAdData&&this._stashedAdData.podId()==i&&parseInt(this._stashedAdData.podPosition(),10)==t.adPosition){this._assetData.adData(this._stashedAdData);this._activeAssetId=this._stashedAdData.adId()}else if(!this._assetData.adData()){this._activeAssetId=t.adId;var r=new f;r.adId(this._activeAssetId);r.podId(i);r.resolver(t.podPlayerName);r.podPosition(t.podPosition+"");r.sid(w());this._assetData.adData(r)}this._assetData.type(c.TYPE_AD)}else{this._assetData.adData(null);this._assetData.type(c.TYPE_MAIN_CONTENT);this._activeAssetId=this._assetData.videoId()}if(t.isInChapter){if(!this._inputDataValidator.validateFields(t,["chapterPosition","chapterLength","chapterOffset"]))return;if(this._stashedChapterData&&t.chapterPosition==this._stashedChapterData.position()){this._assetData.chapterData(this._stashedChapterData)}else if(!this._assetData.chapterData()){var n=new g;n.id(a(this._assetData.videoId())+"_"+t.chapterPosition);n.name(t.chapterName);n.length(t.chapterLength);n.position(t.chapterPosition);n.offset(t.chapterOffset);n.sid(w());this._assetData.chapterData(n)}}else{this._assetData.chapterData(null)}this._stashedAdData=null;this._stashedChapterData=null};T.prototype._onApiAdStart=function(e){var t=e.data;this._logger.debug(D,"#_onApiAdStart("+"id="+t.adId+", player_name="+t.podPlayerName+", parent_name="+this._assetData.videoId()+", pod_pos="+t.adPosition+")");if(!this._checkCall("_onApiAdStart"))return;if(!this._inputDataValidator.validateFields(t,["playhead","podPosition","podPlayerName","adId","adPosition"]))return;this._activeAssetId=t.adId;var i=new f;i.adId(this._activeAssetId);i.resolver(t.podPlayerName);i.podId(a(this._assetData.videoId())+"_"+t.podPosition);i.podPosition(t.adPosition+"");i.sid(w());this._assetData.adData(i);this._assetData.type(c.TYPE_AD);this._updateQoSInfo(t);var r=new m(this,p.EVENT_TYPE_START,t.playhead,n.merge(t.metaVideo,t.metaAd),t._eventData[S]);this._sendHit(r)};T.prototype._onApiAdComplete=function(e){this._logger.debug(D,"#_onApiAdComplete()");var t=e.data;if(!this._checkCall("_onApiAdComplete"))return;if(!this._inputDataValidator.validateFields(t,["playhead"]))return;if(this._assetData.type()!=c.TYPE_AD){this._logger.warn(D,"#_onApiAdComplete() > Ignoring the ad complete event, because we are no longer in an ad.");return}this._updateQoSInfo(t);var i=new m(this,p.EVENT_TYPE_COMPLETE,t.playhead,null,t._eventData[S]);this._sendHit(i);this._assetData.adData(null);this._assetData.type(c.TYPE_MAIN_CONTENT);this._activeAssetId=this._assetData.videoId()};T.prototype._onApiChapterStart=function(e){var t=e.data;this._logger.debug(D,"#_onApiChapterStart("+"name="+t.chapterName+", length="+t.chapterLength+", position="+t.chapterPosition+", chapter_offset="+t.chapterOffset+")");if(!this._checkCall("_onApiChapterStart"))return;if(!this._inputDataValidator.validateFields(t,["playhead","chapterPosition","chapterOffset","chapterLength"]))return;var i=new g;i.id(a(this._assetData.videoId())+"_"+t.chapterPosition);i.name(t.chapterName);i.length(t.chapterLength);i.position(t.chapterPosition);i.offset(t.chapterOffset);i.sid(w());this._assetData.chapterData(i);this._updateQoSInfo(t);var r=new m(this,p.EVENT_TYPE_CHAPTER_START,t.playhead,n.merge(t.metaVideo,t.metaChapter),t._eventData[S]);r.assetData.adData(null);r.assetData.type(c.TYPE_MAIN_CONTENT);this._sendHit(r)};T.prototype._onApiChapterComplete=function(e){this._logger.debug(D,"#_onApiChapterComplete()");var t=e.data;if(!this._checkCall("_onApiChapterComplete"))return;if(!this._inputDataValidator.validateFields(t,["playhead"]))return;if(!this._assetData.chapterData()){this._logger.warn(D,"#_onApiChapterComplete() > Ignoring the chapter complete event, because we are no longer in a chapter.");return}this._updateQoSInfo(t);var i=new m(this,p.EVENT_TYPE_CHAPTER_COMPLETE,t.playhead,null,t._eventData[S]);i.assetData.adData(null);i.assetData.type(c.TYPE_MAIN_CONTENT);this._sendHit(i);this._assetData.chapterData(null)};T.prototype._onApiBitrateChange=function(e){this._logger.debug(D,"#_onApiBitrateChange()");var t=e.data;if(!this._checkCall("_onApiBitrateChange"))return;if(!this._inputDataValidator.validateFields(t,["playhead"]))return;this._updateQoSInfo(t);var i=new m(this,p.EVENT_TYPE_BITRATE_CHANGE,t.playhead,null,t._eventData[S]);this._sendHit(i)};T.prototype._onApiTrackError=function(e){var t=e.data;this._logger.debug(D,"#_onApiTrackError("+"source="+t._eventData.source+", err_id="+t._eventData.error_id+")");if(!this._isTrackingSessionActive){this._logger.warn(D,"#_onApiTrackError() > No active tracking session.");return}if(!this._trackExternalErrors&&t._eventData.source!==b){return}this._updateQoSInfo(t);var i=new m(this,p.EVENT_TYPE_ERROR,0,null,t._eventData[S]);i.eventData.id(t._eventData.error_id);i.eventData.source(t._eventData.source);this._sendHit(i)};T.prototype._onApiTrackInternalError=function(e){this._logger.debug(D,"#_onApiTrackInternalError("+"source="+t.source+", err_id="+t.error_id+")");var t=e.data;this._updateQoSInfo(t);var i=new m(this,p.EVENT_TYPE_ERROR,0);i.eventData.id(t.error_id);i.eventData.source(t.source);this._sendHit(i)};T.prototype._onApiQuantumEnd=function(e){this._logger.debug(D,"#_onApiQuantumEnd(interval="+this._channel.request(E)+")");var t=e.data;if(!this._checkCall("_onApiQuantumEnd"))return;if(!this._inputDataValidator.validateFields(t,["playhead"]))return;this._lastInBandItem.eventData.playhead(t.playhead);this._updateQoSInfo(t);this._lastInBandItem.qosData.bitrate(this._qosData.bitrate());this._lastInBandItem.qosData.fps(this._qosData.fps());this._lastInBandItem.qosData.droppedFrames(this._qosData.droppedFrames());this._lastInBandItem.qosData.startupTime(this._qosData.startupTime());this._sendHit(this._lastInBandItem)};T.prototype._onNetworkCheckStatusComplete=function(e){var t=e.data;this._trackExternalErrors=t[M];this._logger.debug(D,"#_onNetworkCheckStatusComplete(track_ext_err="+this._trackExternalErrors+")")};T.prototype._installEventListeners=function(){this._channel.on(R,this._onApiAnalyticsStart,this);this._channel.on(L,this._onApiAnalyticsAdStart,this);this._channel.on(B,this._onApiVideoLoad,this);this._channel.on(V,this._onApiVideoUnload,this);this._channel.on(q,this._onApiVideoStart,this);this._channel.on(x,this._onApiVideoComplete,this);this._channel.on(O,this._onApiAdStart,this);this._channel.on(F,this._onApiAdComplete,this);this._channel.on(Y,this._onApiPlay,this);this._channel.on(U,this._onApiPause,this);this._channel.on(H,this._onApiBufferStart,this);this._channel.on(z,this._onApiSeekStart,this);this._channel.on(Q,this._onApiSeekComplete,this);this._channel.on(j,this._onApiChapterStart,this);this._channel.on(K,this._onApiChapterComplete,this);this._channel.on(X,this._onApiBitrateChange,this);this._channel.on(W,this._onApiTrackError,this);this._channel.on(G,this._onApiTrackInternalError,this);this._channel.on(Z,this._onApiQuantumEnd,this);this._channel.on($,this._onNetworkCheckStatusComplete,this);this._channel.reply(P,function(){return this._sessionData&&this._sessionData.sessionId()?this._sessionData.sessionId():null},this)};T.prototype._uninstallEventListeners=function(){this._channel.off(null,null,this)};T.prototype._resetInternalState=function(){this._logger.debug(D,"#_resetInternalState()");this._isTrackingSessionActive=false;this._isVideoComplete=false;this._autoComputedStartupTime=0;this._streamData=new d;this._qosData=new _;this._sessionData=new o;this._assetData=new c;this._stashedAdData=null;this._stashedChapterData=null};function w(){return""+(new Date).getTime()+Math.floor(Math.random()*1e9)}T.prototype._updateQoSInfo=function(e){this._qosData.bitrate(e.bitrate||0);this._qosData.fps(e.fps||0);this._qosData.droppedFrames(e.droppedFrames||0);if(e.startupTime!=null&&!isNaN(e.startupTime)){this._qosData.startupTime(e.startupTime);this._qosData.isStartupTimeOverridden=true}else{this._qosData.startupTime(this._autoComputedStartupTime);this._qosData.isStartupTimeOverridden=false}};T.prototype._checkCall=function(e){if(!this._isTrackingSessionActive){this._logger.warn(D,"#"+e+"() > No active tracking session.");return false}if(this._isVideoComplete){this._logger.warn(D,"#"+e+"() > The video content already completed.");return false}return true};T.prototype._sendHit=function(e){var t=this;function i(e){var i=t._reportFactory.createReportForItem(e);if(!i.qosData.isStartupTimeOverridden){i.qosData.startupTime(t._autoComputedStartupTime)}var a={};a[N]=i;t._channel.trigger(new s(J,a));if(i.eventData.type()==p.EVENT_TYPE_PLAY||i.eventData.type()==p.EVENT_TYPE_BUFFER||i.eventData.type()==p.EVENT_TYPE_START){r={};r[C]=true;t._channel.command(k,r)}}var r={};var a=(new Date).getTime();switch(e.eventData.type()){case p.EVENT_TYPE_START:case p.EVENT_TYPE_PLAY:case p.EVENT_TYPE_PAUSE:case p.EVENT_TYPE_BUFFER:if(this._lastInBandItem){this._lastInBandItem.eventData.duration(a-this._lastInBandItem.eventData.ts());this._lastInBandItem.eventData.ts(a);this._lastInBandItem.eventData.playhead(e.eventData.playhead());this._lastInBandItem.qosData.startupTime(e.qosData.startupTime());this._lastInBandItem.qosData.isStartupTimeOverridden=e.qosData.isStartupTimeOverridden;if(this._lastInBandItem.eventData.type()==p.EVENT_TYPE_START&&this._lastInBandItem.assetData.type()==c.TYPE_MAIN_CONTENT){this._autoComputedStartupTime+=this._lastInBandItem.eventData.duration()}if(e!=this._lastInBandItem){i(this._lastInBandItem)}}i(e);this._lastInBandItem=e;r={};r[C]=true;this._channel.command(k,r);break;case p.EVENT_TYPE_COMPLETE:if(this._lastInBandItem){this._lastInBandItem.eventData.duration(a-this._lastInBandItem.eventData.ts());this._lastInBandItem.eventData.ts(a);this._lastInBandItem.eventData.playhead(e.eventData.playhead());this._lastInBandItem.qosData.startupTime(e.qosData.startupTime());this._lastInBandItem.qosData.isStartupTimeOverridden=e.qosData.isStartupTimeOverridden;i(this._lastInBandItem)}i(e);if(e.assetData.type()==c.TYPE_MAIN_CONTENT){this._lastInBandItem=null;r={};r[C]=true;this._channel.command(I,r)}else if(e.assetData.type()==c.TYPE_AD){this._lastInBandItem.assetData.adData(null);this._lastInBandItem.assetData.type(c.TYPE_MAIN_CONTENT)}break;case p.EVENT_TYPE_CHAPTER_START:case p.EVENT_TYPE_CHAPTER_COMPLETE:if(this._lastInBandItem){this._lastInBandItem.eventData.duration(a-this._lastInBandItem.eventData.ts());this._lastInBandItem.eventData.ts(a);this._lastInBandItem.eventData.playhead(e.eventData.playhead());this._lastInBandItem.qosData.startupTime(e.qosData.startupTime());this._lastInBandItem.qosData.isStartupTimeOverridden=e.qosData.isStartupTimeOverridden;i(this._lastInBandItem)}i(e);if(this._lastInBandItem){this._lastInBandItem.assetData.chapterData(e.eventData.type()==p.EVENT_TYPE_CHAPTER_START?new g(e.assetData.chapterData()):null);this._lastInBandItem.eventData.duration(0);i(this._lastInBandItem)}break;default:i(e);break}};var D="ah::Context";var b="sourceErrorSDK";var A="error";var k="clock:reporting.resume";var I="clock:reporting.pause";var E="reporting_interval";var P="session_id";var S="callback";var N="report";var C="reset";var M="track_external_errors";var R="api:aa_start";var L="api:aa_ad_start";var B="api:video_load";var V="api:video_unload";var q="api:video_start";var x="api:video_complete";var O="api:ad_start";var F="api:ad_complete";var Y="api:play";var U="api:pause";var H="api:buffer_start";var z="api:seek_start";var Q="api:seek_complete";var j="api:chapter_start";var K="api:chapter_complete";var W="api:track_error";var G="api:track_internal_error";var X="api:bitrate_change";var Z="api:quantum_end";var J="context:report_available";var $="net:check_status_complete";r.context.Context=T})(e.ADB.core,e.ADB.va,e.ADB.va.utils,t);(function(e){"use strict";function t(e,t){this.trackingServer=e;this.publisher=t;this.ssl=false;this.ovp=i;this.sdk=i;this.quietMode=false;this.debugLogging=false;this.__isPrimetime=false;this.__psdkVersion=null}var i="unknown";e.AdobeHeartbeatPluginConfig=t})(t);(function(e){"use strict";function t(){}t.prototype.onError=function(e){};e.AdobeHeartbeatPluginDelegate=t})(t);(function(e,t,i){"use strict";var r=e.Event;var a=e.Trigger;var n=e.plugin.BasePlugin;var s=e.plugin.ParamMapping;var o=e.radio.Radio;var h=t.ErrorInfo;var l=t.Version;var u=i.context.Context;var p=i.filter.ReportFilter;var c=i.network.Network;var d=i.clock.Clock;var _=i.AdobeHeartbeatPluginConfig;e.extend(f,n);function f(e){f.__super__.constructor.call(this,g);this._radio=new o(this._logger);this._channel=this._radio.channel(w);this._delegate=e;this._context=new u(this._channel,this._logger);this._filter=new p(this._channel,this._logger);this._network=new c(this._channel,this._logger);this._setupDataResolver()}f.prototype.configure=function(e){if(!e){throw new Error("Reference to the configuration data cannot be NULL.")}if(!(e instanceof _)){throw new Error("Expected config data to be instance of AdobeHeartbeatPluginConfig.")}this._config=e;if(this._config.debugLogging){this._logger.enable()}else{this._logger.disable()}this._logger.debug(this._logTag,"#configure({"+"trackingServer="+this._config.trackingServer+", publisher="+this._config.publisher+", quietMode="+this._config.quietMode+", ssl="+this._config.ssl+"})");var t=this._config.trackingServer+"/settings/";var i={};i[j]=this._config.trackingServer;i[K]=t;i[W]=this._config.publisher;i[G]=this._config.quietMode;i[X]=this._config.ssl;this._channel.trigger(new r($,i));this._isConfigured=true};f.prototype.bootstrap=function(e){f.__super__.bootstrap.call(this,e);this._channel.on(D,this._onError,this);this._clock=new d(this._pluginManager,this._channel,this._logger);this._channel.command(vt);this._channel.trigger(new r(Tt));this._registerCommands();this._registerBehaviours()};f.prototype._teardown=function(){this._logger.debug(this._logTag,"#_teardown()");this._radio.shutdown();this._context.destroy();this._clock.destroy();this._filter.destroy();this._network.destroy()};f.prototype._canProcess=function(){if(!this._isConfigured){this._logger.error(this._logTag,"_canProcess() > Plugin not configured.");return false}if(this._errorInfo){this._logger.error(this._logTag,"_canProcess() > Plugin in ERROR state.");return false}return f.__super__._canProcess.call(this)};f.prototype._cmdAnalyticsError=function(e){if(this._errorInfo)return;this._errorInfo=new h("Internal error","AdobeAnalyticsPlugin is in ERROR state.");this._trigger(D,this._errorInfo);if(this._delegate){this._delegate.onError(this._errorInfo)}};f.prototype._cmdAnalyticsStart=function(e){if(!this._canProcess())return;this._channel.trigger(new r(Z,e))};f.prototype._cmdAnalyticsAdStart=function(e){if(!this._canProcess())return;this._channel.trigger(new r(J,e))};f.prototype._cmdVideoLoad=function(e){this._errorInfo=null;if(!this._canProcess())return;if(this._isTrackingSessionActive){this._channel.trigger(new r(tt,e))}this._isTrackingSessionActive=false;this._isPaused=true;this._isSeeking=false;this._isBuffering=false;this._channel.trigger(new r(et,e));this._isTrackingSessionActive=true};f.prototype._cmdVideoUnload=function(e){this._errorInfo=null;if(!this._canProcess())return;this._channel.trigger(new r(tt,e));this._isTrackingSessionActive=false};f.prototype._cmdVideoStart=function(e){if(!this._canProcess())return;this._channel.trigger(new r(it,e))};f.prototype._cmdVideoComplete=function(e){if(!this._canProcess())return;this._channel.trigger(new r(rt,e))};f.prototype._cmdPlay=function(e){if(!this._canProcess())return;this._isPaused=false;this._resumePlaybackIfPossible(e)};f.prototype._cmdPause=function(e){if(!this._canProcess())return;this._channel.trigger(new r(ot,e));this._isPaused=true};f.prototype._cmdAdStart=function(e){if(!this._canProcess())return;this._channel.trigger(new r(at,e));this._resumePlaybackIfPossible(e)};f.prototype._cmdAdComplete=function(e){if(!this._canProcess())return;this._channel.trigger(new r(nt,e));if(!e.isInAdBreak){this._resumePlaybackIfPossible(e)}};f.prototype._cmdBufferStart=function(e){if(!this._canProcess())return;this._channel.trigger(new r(ht,e));this._isBuffering=true};f.prototype._cmdBufferComplete=function(e){if(!this._canProcess())return;this._isBuffering=false;this._resumePlaybackIfPossible(e)};f.prototype._cmdSeekStart=function(e){if(!this._canProcess())return;this._channel.trigger(new r(lt,e));this._channel.trigger(new r(ot,e));this._isSeeking=true};f.prototype._cmdSeekComplete=function(e){if(!this._canProcess())return;this._channel.trigger(new r(ut,e));this._isSeeking=false;this._resumePlaybackIfPossible(e)};f.prototype._cmdChapterStart=function(e){if(!this._canProcess())return;this._channel.trigger(new r(pt,e))};f.prototype._cmdChapterComplete=function(e){if(!this._canProcess())return;this._channel.trigger(new r(ct,e))};f.prototype._cmdBitrateChange=function(e){if(!this._canProcess())return;this._channel.trigger(new r(ft,e))};f.prototype._cmdTrackError=function(e){if(!this._canProcess())return;this._channel.trigger(new r(dt,e))};f.prototype._cmdClockReportingTick=function(e){if(!this._canProcess())return;this._channel.trigger(new r(gt,e))};f.prototype._onError=function(e){this._errorInfo=e.data;var t={};t[z]=mt;t[Q]=this._errorInfo.getMessage()+"|"+this._errorInfo.getDetails();this._channel.trigger(new r(_t,t));var i={};i[H]=true;this._channel.command(yt,i);this._trigger(D,this._errorInfo);if(this._delegate){this._delegate.onError(this._errorInfo)}};f.prototype._registerCommands=function(){this._pluginManager.comply(this,"handleAnalyticsError",this._cmdAnalyticsError);this._pluginManager.comply(this,"handleAnalyticsStart",this._cmdAnalyticsStart);this._pluginManager.comply(this,"handleAnalyticsAdStart",this._cmdAnalyticsAdStart);this._pluginManager.comply(this,"handleVideoLoad",this._cmdVideoLoad);this._pluginManager.comply(this,"handleVideoUnload",this._cmdVideoUnload);this._pluginManager.comply(this,"handleVideoStart",this._cmdVideoStart);this._pluginManager.comply(this,"handleVideoComplete",this._cmdVideoComplete);this._pluginManager.comply(this,"handlePlay",this._cmdPlay);this._pluginManager.comply(this,"handlePause",this._cmdPause);this._pluginManager.comply(this,"handleAdStart",this._cmdAdStart);this._pluginManager.comply(this,"handleAdComplete",this._cmdAdComplete);this._pluginManager.comply(this,"handleBufferStart",this._cmdBufferStart);this._pluginManager.comply(this,"handleBufferComplete",this._cmdBufferComplete);this._pluginManager.comply(this,"handleSeekStart",this._cmdSeekStart);this._pluginManager.comply(this,"handleSeekComplete",this._cmdSeekComplete);this._pluginManager.comply(this,"handleChapterStart",this._cmdChapterStart);this._pluginManager.comply(this,"handleChapterComplete",this._cmdChapterComplete);this._pluginManager.comply(this,"handleBitrateChange",this._cmdBitrateChange);this._pluginManager.comply(this,"handleTrackError",this._cmdTrackError);this._pluginManager.comply(this,"handleClockReportingTick",this._cmdClockReportingTick)};f.prototype._registerBehaviours=function(){this._pluginManager.registerBehaviour(new a(y,k),this,"handleVideoLoad");this._pluginManager.registerBehaviour(new a(y,I),this,"handleVideoUnload");this._pluginManager.registerBehaviour(new a(y,E),this,"handleVideoStart",[new s(y,"video.id","videoId"),new s(y,"video.name","videoName"),new s(y,"video.length","videoLength"),new s(y,"video.playhead","playhead"),new s(y,"video.playerName","playerName"),new s(y,"video.streamType","streamType"),new s(y,"qos.fps","fps"),new s(y,"qos.droppedFrames","droppedFrames"),new s(y,"qos.bitrate","bitrate"),new s(y,"qos.startupTime","startupTime"),new s(v,"rsid","rsid"),new s(v,"tracking_server","trackingServer"),new s(v,"channel","channel"),new s(v,"meta.video.*","metaVideo"),new s(v,"ssl","useSsl"),new s(m,"publisher","publisher"),new s(m,"sdk","sdk"),new s(m,"ovp","ovp"),new s(m,"version","version"),new s(m,"api_level","apiLvl")]);this._pluginManager.registerBehaviour(new a(y,P),this,"handleVideoComplete",[new s(y,"qos.fps","fps"),new s(y,"qos.droppedFrames","droppedFrames"),new s(y,"qos.bitrate","bitrate"),new s(y,"qos.startupTime","startupTime")]);this._pluginManager.registerBehaviour(new a(y,S),this,"handlePlay",[new s(y,"video.playhead","playhead"),new s(y,"qos.fps","fps"),new s(y,"qos.droppedFrames","droppedFrames"),new s(y,"qos.bitrate","bitrate"),new s(y,"qos.startupTime","startupTime")]);this._pluginManager.registerBehaviour(new a(y,N),this,"handlePause",[new s(y,"video.playhead","playhead"),new s(y,"qos.fps","fps"),new s(y,"qos.droppedFrames","droppedFrames"),new s(y,"qos.bitrate","bitrate"),new s(y,"qos.startupTime","startupTime")]);this._pluginManager.registerBehaviour(new a(y,C),this,"handleAdStart",[new s(y,"video.playhead","playhead"),new s(y,"ad.id","adId"),new s(y,"ad.position","adPosition"),new s(y,"pod.name","podName"),new s(y,"pod.playerName","podPlayerName"),new s(y,"pod.position","podPosition"),new s(y,"qos.fps","fps"),new s(y,"qos.droppedFrames","droppedFrames"),new s(y,"qos.bitrate","bitrate"),new s(y,"qos.startupTime","startupTime"),new s(v,"meta.video.*","metaVideo"),new s(v,"meta.ad.*","metaAd")]);this._pluginManager.registerBehaviour(new a(y,M),this,"handleAdComplete",[new s(y,"video.playhead","playhead"),new s(y,"ad.isInAdBreak","isInAdBreak"),new s(y,"qos.fps","fps"),new s(y,"qos.droppedFrames","droppedFrames"),new s(y,"qos.bitrate","bitrate"),new s(y,"qos.startupTime","startupTime")]);this._pluginManager.registerBehaviour(new a(y,R),this,"handleBufferStart",[new s(y,"video.playhead","playhead"),new s(y,"qos.fps","fps"),new s(y,"qos.droppedFrames","droppedFrames"),new s(y,"qos.bitrate","bitrate"),new s(y,"qos.startupTime","startupTime")]);this._pluginManager.registerBehaviour(new a(y,L),this,"handleBufferComplete",[new s(y,"video.playhead","playhead"),new s(y,"qos.fps","fps"),new s(y,"qos.droppedFrames","droppedFrames"),new s(y,"qos.bitrate","bitrate"),new s(y,"qos.startupTime","startupTime")]);this._pluginManager.registerBehaviour(new a(y,B),this,"handleSeekStart",[new s(y,"video.playhead","playhead")]);this._pluginManager.registerBehaviour(new a(y,V),this,"handleSeekComplete",[new s(y,"video.playhead","playhead"),new s(y,"ad.isInAd","isInAd"),new s(y,"ad.id","adId"),new s(y,"ad.position","adPosition"),new s(y,"pod.playerName","podPlayerName"),new s(y,"pod.position","podPosition"),new s(y,"chapter.isInChapter","isInChapter"),new s(y,"chapter.position","chapterPosition"),new s(y,"chapter.name","chapterName"),new s(y,"chapter.length","chapterLength"),new s(y,"chapter.startTime","chapterOffset"),new s(y,"qos.fps","fps"),new s(y,"qos.droppedFrames","droppedFrames"),new s(y,"qos.bitrate","bitrate"),new s(y,"qos.startupTime","startupTime")]);this._pluginManager.registerBehaviour(new a(y,q),this,"handleChapterStart",[new s(y,"video.playhead","playhead"),new s(y,"chapter.position","chapterPosition"),new s(y,"chapter.name","chapterName"),new s(y,"chapter.length","chapterLength"),new s(y,"chapter.startTime","chapterOffset"),new s(y,"qos.fps","fps"),new s(y,"qos.droppedFrames","droppedFrames"),new s(y,"qos.bitrate","bitrate"),new s(y,"qos.startupTime","startupTime"),new s(v,"meta.video.*","metaVideo"),new s(v,"meta.chapter.*","metaChapter")]);this._pluginManager.registerBehaviour(new a(y,x),this,"handleChapterComplete",[new s(y,"video.playhead","playhead"),new s(y,"qos.fps","fps"),new s(y,"qos.droppedFrames","droppedFrames"),new s(y,"qos.bitrate","bitrate"),new s(y,"qos.startupTime","startupTime")]);
this._pluginManager.registerBehaviour(new a(y,O),this,"handleBitrateChange",[new s(y,"video.playhead","playhead"),new s(y,"qos.fps","fps"),new s(y,"qos.droppedFrames","droppedFrames"),new s(y,"qos.bitrate","bitrate"),new s(y,"qos.startupTime","startupTime")]);this._pluginManager.registerBehaviour(new a(y,F),this,"handleTrackError");this._pluginManager.registerBehaviour(new a(T,U),this,"handleClockReportingTick",[new s(y,"video.playhead","playhead"),new s(y,"qos.fps","fps"),new s(y,"qos.droppedFrames","droppedFrames"),new s(y,"qos.bitrate","bitrate"),new s(y,"qos.startupTime","startupTime")]);this._pluginManager.registerBehaviour(new a(v,D),this,"handleAnalyticsError");this._pluginManager.registerBehaviour(new a(v,b),this,"handleAnalyticsStart",[new s(v,"vid","vid"),new s(v,"aid","aid"),new s(v,"mid","mid"),new s(y,"video.playhead","playhead"),new s(y,"qos.fps","fps"),new s(y,"qos.droppedFrames","droppedFrames"),new s(y,"qos.bitrate","bitrate"),new s(y,"qos.startupTime","startupTime")]);this._pluginManager.registerBehaviour(new a(v,A),this,"handleAnalyticsAdStart",[new s(y,"video.playhead","playhead"),new s(y,"qos.fps","fps"),new s(y,"qos.droppedFrames","droppedFrames"),new s(y,"qos.bitrate","bitrate"),new s(y,"qos.startupTime","startupTime")])};f.prototype._setupDataResolver=function(){var e={};var t=this;e["version"]=function(){return l.getVersion()};e["api_level"]=function(){return l.getApiLevel()};e["tracking_server"]=function(){return t._config?t._config.trackingServer:null};e["publisher"]=function(){return t._config?t._config.publisher:null};e["quiet_mode"]=function(){return t._config?t._config.quietMode:false};e["ovp"]=function(){return t._config?t._config.ovp:null};e["sdk"]=function(){return t._config?t._config.sdk:null};e["is_primetime"]=function(){return t._config?t._config.__isPrimetime:false};e["psdk_version"]=function(){return t._config?t._config.__psdkVersion:null};this._dataResolver=function(t){if(!t||t.length==0)return null;var i=null;for(var r=0;r<t.length;r++){var a=t[r];i=i||{};i[a]=e.hasOwnProperty(a)?e[a].call(this):null}return i}};f.prototype._resumePlaybackIfPossible=function(e){if(this._errorInfo)return;if(!this._isPaused&&!this._isSeeking&&!this._isBuffering){this._channel.trigger(new r(st,e))}};var g="adobe-heartbeat";var m=g;var v="adobe-analytics";var y="player";var T="service.clock";var w="heartbeat-channel";var D="error";var b="aa_start";var A="sc_ad_start";var k="video_load";var I="video_unload";var E="video_start";var P="video_complete";var S="play";var N="pause";var C="ad_start";var M="ad_complete";var R="buffer_start";var L="buffer_complete";var B="seek_start";var V="seek_complete";var q="chapter_start";var x="chapter_complete";var O="bitrate_change";var F="track_error";var Y="heartbeat.reporting";var U=Y+".tick";var H="reset";var z="source";var Q="error_id";var j="tracking_server";var K="check_status_server";var W="publisher";var G="quiet_mode";var X="ssl";var Z="api:aa_start";var J="api:aa_ad_start";var $="api:config";var et="api:video_load";var tt="api:video_unload";var it="api:video_start";var rt="api:video_complete";var at="api:ad_start";var nt="api:ad_complete";var st="api:play";var ot="api:pause";var ht="api:buffer_start";var lt="api:seek_start";var ut="api:seek_complete";var pt="api:chapter_start";var ct="api:chapter_complete";var dt="api:track_error";var _t="api:track_internal_error";var ft="api:bitrate_change";var gt="api:quantum_end";var mt="sourceErrorHeartbeat";var vt="clock:check_status.resume";var yt="clock:reporting.pause";var Tt="clock:check_status.get_settings";i.AdobeHeartbeatPlugin=f})(e.ADB.core,e.ADB.va,t);e.ADB.va.plugins.ah||(e.ADB.va.plugins.ah=t)})(this);(function(e){if(typeof t==="undefined"){var t={}}(function(e,t){"use strict";var i=e.ErrorInfo;function r(e,t){this._onFail={fn:e,ctx:t}}r.prototype.validateFields=function(e,t){if(!e){return this._fail("Data cannot be null")}if(t){for(var i=0;i<t.length;i++){var r=t[i];switch(r){case"videoId":if(!e.hasOwnProperty("videoId"))return this._fail("The ID for the main video must be specified.");if(typeof e.videoId!="string")return this._fail("The ID for the main video must be a String.");if(e.videoId==="")return this._fail("The ID for the main video cannot be an empty string.");break;case"streamType":if(!e.hasOwnProperty("streamType"))return this._fail("The stream type for the main video must be specified.");if(typeof e.streamType!="string")return this._fail("The stream type for the main video must be a String.");if(e.streamType==="")return this._fail("The stream type for the main video cannot be an empty string.");break;case"playerName":if(!e.hasOwnProperty("playerName"))return this._fail("The player name for the main video must be specified.");if(typeof e.playerName!="string")return this._fail("The player name for the main video must be a String.");if(e.playerName==="")return this._fail("The player name for the main video cannot be an empty string.");break;case"videoLength":if(!e.hasOwnProperty("videoLength"))return this._fail("The length of the main video must be specified.");if(typeof e.videoLength!="number")return this._fail("The length of the main video must be a Number.");if(isNaN(e.videoLength))return this._fail("The length of the main video cannot be NaN.");break;case"podPlayerName":if(!e.hasOwnProperty("podPlayerName"))return this._fail("The player name for the ad-break must be specified.");if(typeof e.podPlayerName!="string")return this._fail("The player name for the ad-break must be a String.");if(e.podPlayerName==="")return this._fail("The player name for the ad-break cannot be an empty string.");break;case"podPosition":if(!e.hasOwnProperty("podPosition"))return this._fail("Position (index) of the ad-break must be specified.");if(typeof e.podPosition!="number")return this._fail("Position (index) of the ad-break must be a Number.");if(isNaN(e.podPosition))return this._fail("Position (index) of the ad-break cannot be NaN.");break;case"adId":if(!e.hasOwnProperty("adId"))return this._fail("The ad ID must be specified.");if(typeof e.adId!="string")return this._fail("The ad ID must be a String.");if(e.adId==="")return this._fail("The ad ID cannot be an empty string.");break;case"adPosition":if(!e.hasOwnProperty("adPosition"))return this._fail("Position (index) of the ad must be specified.");if(typeof e.adPosition!="number")return this._fail("Position (index) of the ad must be a Number.");if(isNaN(e.adPosition))return this._fail("Position (index) of the ad cannot be NaN.");break;case"adLength":if(!e.hasOwnProperty("adLength"))return this._fail("The length of the ad must be specified.");if(typeof e.adLength!="number")return this._fail("The length of the ad must be a Number.");if(isNaN(e.adLength))return this._fail("The length of the ad cannot be NaN.");break;default:return this._fail("Unable to validate unknown parameter: "+r);break}}}return true};r.prototype._fail=function(e){var t=new i("Invalid input data",e);if(this._onFail.fn){this._onFail.fn.call(this._onFail.ctx,t)}return false};t.InputDataValidator=r})(e.ADB.va,t);(function(e){"use strict";function t(){this.channel=i;this.debugLogging=false}var i="";e.AdobeAnalyticsPluginConfig=t})(t);(function(e){"use strict";function t(){}t.prototype.onError=function(e){};e.AdobeAnalyticsPluginDelegate=t})(t);(function(e,t,i,r){"use strict";var a=e.Trigger;var n=e.plugin.BasePlugin;var s=e.plugin.ParamMapping;var o=e.radio.Channel;var h=e.radio.Command;var l=e.radio.CommandQueue;var u=t.ErrorInfo;var p=i.md5;var c=i.StringUtils;var d=i.ObjectUtils;var _=r.AdobeAnalyticsPluginConfig;var f=r.InputDataValidator;e.extend(g,n);function g(e,t){g.__super__.constructor.call(this,m);if(!e){throw new Error("The reference to the AppMeasurement object cannot be NULL.")}this._appMeasurement=e;this._delegate=t;this._customMetaKeys=[];this._videoMetadata={};this._adMetadata={};this._chapterMetadata={};this._errorInfo=null;this._workQueue=new l(true,w);this._inputDataValidator=new f(function(e){this._errorInfo=e;this._logger.error(this._logTag,e.getMessage()+" | "+e.getDetails());this._trigger(D,e);if(this._delegate){this._delegate.onError(this._errorInfo)}},this);this._appMeasurement.isReadyToTrack();this._setupDataResolver()}g.prototype.configure=function(e){if(!e){throw new Error("Reference to the configuration data cannot be NULL.")}if(!(e instanceof _)){throw new Error("Expected config data to be instance of AdobeAnalyticsPluginConfig.")}this._config=e;if(this._config.debugLogging){this._logger.enable()}else{this._logger.disable()}this._logger.debug(this._logTag,"#configure({"+"trackingServer="+this._config.debugLogging+", channel="+this._config.channel+", ssl="+this._appMeasurement.ssl+"})")};g.prototype.bootstrap=function(e){g.__super__.bootstrap.call(this,e);this._registerCommands();this._registerBehaviours()};g.prototype.setup=function(){if(this._appMeasurement.isReadyToTrack()){this._onAppMeasurementReady()}else{this._appMeasurement.callbackWhenReadyToTrack(this,this._onAppMeasurementReady,[])}g.__super__.setup.call(this)};g.prototype.setVideoMetadata=function(e){this._videoMetadata=d.clone(e)};g.prototype.setAdMetadata=function(e){this._adMetadata=d.clone(e)};g.prototype.setChapterMetadata=function(e){this._chapterMetadata=d.clone(e)};g.prototype._canProcess=function(){if(this._errorInfo){this._logger.error(this._logTag,"#_canProcess() > In ERROR state.");return false}return g.__super__._canProcess.call(this)};g.prototype._cmdVideoLoad=function(e){this._errorInfo=null};g.prototype._cmdVideoStart=function(e){this._logger.debug(this._logTag,"#_cmdVideoStart()");if(!this._canProcess())return;this._workQueue.addCommand(new h(this._executeOpen,this,[e]))};g.prototype._cmdAdStart=function(e){this._logger.debug(this._logTag,"#_cmdAdStart()");if(!this._canProcess())return;this._workQueue.addCommand(new h(this._executeOpenAd,this,[e]))};g.prototype._cmdHeartbeatPluginError=function(e){if(this._errorInfo)return;this._errorInfo=new u("Internal error","HeartbeatPlugin is in ERROR state.");this._trigger(D,this._errorInfo);if(this._delegate){this._delegate.onError(this._errorInfo)}};g.prototype._resetAppMeasurementContextData=function(){delete this._appMeasurement.contextData["a.contentType"];delete this._appMeasurement.contextData["a.media.name"];delete this._appMeasurement.contextData["a.media.friendlyName"];delete this._appMeasurement.contextData["a.media.length"];delete this._appMeasurement.contextData["a.media.playerName"];delete this._appMeasurement.contextData["a.media.channel"];delete this._appMeasurement.contextData["a.media.view"];delete this._appMeasurement.contextData["a.media.ad.name"];delete this._appMeasurement.contextData["a.media.ad.friendlyName"];delete this._appMeasurement.contextData["a.media.ad.podFriendlyName"];delete this._appMeasurement.contextData["a.media.ad.length"];delete this._appMeasurement.contextData["a.media.ad.playerName"];delete this._appMeasurement.contextData["a.media.ad.pod"];delete this._appMeasurement.contextData["a.media.ad.podPosition"];delete this._appMeasurement.contextData["a.media.ad.podSecond"];delete this._appMeasurement.contextData["a.media.ad.view"];for(var e=0;e<this._customMetaKeys.length;e++){var t=this._customMetaKeys[e];delete this._appMeasurement.contextData[t]}this._customMetaKeys=[]};g.prototype._executeOpen=function(e){this._logger.debug(this._logTag,"#_executeOpen("+"id="+e.videoId+", videoName="+e.videoName+", streamType="+e.streamType+", length="+e.videoLength+", playerName="+e.playerName+", channel="+e.channel+", isPrimetime="+e.isPrimetime+")");if(!this._canProcess())return;if(!this._inputDataValidator.validateFields(e,["videoId","streamType","videoLength","playerName"]))return;this._resetAppMeasurementContextData();for(var t in e.metaVideo){if(e.metaVideo.hasOwnProperty(t)){this._appMeasurement.contextData[t]=e.metaVideo[t];this._customMetaKeys.push(t)}}this._appMeasurement.contextData["a.contentType"]=e.streamType;this._appMeasurement.contextData["a.media.name"]=e.videoId;this._appMeasurement.contextData["a.media.friendlyName"]=e.videoName||"";this._appMeasurement.contextData["a.media.length"]=Math.floor(e.videoLength)||"0.0";this._appMeasurement.contextData["a.media.playerName"]=e.playerName;this._appMeasurement.contextData["a.media.channel"]=e.channel||"";this._appMeasurement.contextData["a.media.view"]=true;this._appMeasurement.pev3=b;this._appMeasurement.pe=e.isPrimetime?I:k;this._appMeasurement.track();var i=this;setTimeout(function(){i._trigger(S,e)},0)};g.prototype._executeOpenAd=function(e){var t=p(e.videoId)+"_"+e.podPosition;this._logger.debug(this._logTag,"#_executeOpenAd("+"id="+e.adId+", streamType="+e.streamType+", length="+e.adLength+", podPlayerName="+e.podPlayerName+", parentId="+e.videoId+", podId="+t+", parentPodPosition="+e.adPosition+", podSecond="+e.podSecond+")");if(!this._canProcess())return;if(!this._inputDataValidator.validateFields(e,["videoId","streamType","playerName","adId","adLength","podPlayerName","adPosition"]))return;e.podSecond=e.podSecond==null||isNaN(e.podSecond)?e.playhead:e.podSecond;this._resetAppMeasurementContextData();var i;for(i in e.metaVideo){if(e.metaVideo.hasOwnProperty(i)){this._appMeasurement.contextData[i]=e.metaVideo[i];this._customMetaKeys.push(i)}}for(i in e.metaAd){if(e.metaAd.hasOwnProperty(i)){this._appMeasurement.contextData[i]=e.metaAd[i];this._customMetaKeys.push(i)}}this._appMeasurement.contextData["a.contentType"]=e.streamType;this._appMeasurement.contextData["a.media.name"]=e.videoId;this._appMeasurement.contextData["a.media.playerName"]=e.playerName;this._appMeasurement.contextData["a.media.channel"]=e.channel||"";this._appMeasurement.contextData["a.media.ad.name"]=e.adId;this._appMeasurement.contextData["a.media.ad.friendlyName"]=e.adName||"";this._appMeasurement.contextData["a.media.ad.podFriendlyName"]=e.podName||"";this._appMeasurement.contextData["a.media.ad.length"]=Math.floor(e.adLength)||"0.0";this._appMeasurement.contextData["a.media.ad.playerName"]=e.podPlayerName;this._appMeasurement.contextData["a.media.ad.pod"]=t;this._appMeasurement.contextData["a.media.ad.podPosition"]=Math.floor(e.adPosition)||"0.0";this._appMeasurement.contextData["a.media.ad.podSecond"]=Math.floor(e.podSecond)||"0.0";this._appMeasurement.contextData["a.media.ad.view"]=true;this._appMeasurement.pev3=A;this._appMeasurement.pe=e.isPrimetime?P:E;this._appMeasurement.track();var r=this;setTimeout(function(){r._trigger(N,e)},0)};g.prototype._setupDataResolver=function(){var e={};var t=this;e["rsid"]=function(){return t._appMeasurement.account};e["tracking_server"]=function(){return t._appMeasurement.ssl&&t._appMeasurement.trackingServerSecure?t._appMeasurement.trackingServerSecure:t._appMeasurement.trackingServer};e["ssl"]=function(){return t._appMeasurement.ssl};e["vid"]=function(){return t._appMeasurement.visitorID};e["aid"]=function(){return t._appMeasurement.analyticsVisitorID};e["mid"]=function(){return t._appMeasurement.marketingCloudVisitorID};e["channel"]=function(){return t._config?t._config.channel:null};e["meta"]=function(e){var i=e.split(".");if(i.length<2){return null}var r=i.shift();e=i.join(".");switch(r){case"video":if(e==o.WILDCARD){return t._videoMetadata}else{return t._videoMetadata[e]}break;case"ad":if(e==o.WILDCARD){return t._adMetadata}else{return t._adMetadata[e]}break;case"chapter":if(e==o.WILDCARD){return t._chapterMetadata}else{return t._chapterMetadata[e]}break;default:return null}};this._dataResolver=function(t){if(!t||t.length==0)return null;var i=null;for(var r=0;r<t.length;r++){var a=t[r];i=i||{};if(c.startsWith(a,"meta.")){i[a]=e.meta(a.split("meta.")[1])}else{i[a]=e.hasOwnProperty(a)?e[a].call(this):null}}return i}};g.prototype._registerCommands=function(){this._pluginManager.comply(this,"handleVideoLoad",this._cmdVideoLoad);this._pluginManager.comply(this,"handleVideoStart",this._cmdVideoStart);this._pluginManager.comply(this,"handleAdStart",this._cmdAdStart);this._pluginManager.comply(this,"handleHeartbeatPluginError",this._cmdHeartbeatPluginError)};g.prototype._registerBehaviours=function(){this._pluginManager.registerBehaviour(new a(y,C),this,"handleVideoLoad");this._pluginManager.registerBehaviour(new a(y,M),this,"handleVideoStart",[new s(y,"video.id","videoId"),new s(y,"video.streamType","streamType"),new s(y,"video.name","videoName"),new s(y,"video.length","videoLength"),new s(y,"video.playerName","playerName"),new s(y,"video.streamType","streamType"),new s(T,"is_primetime","isPrimetime"),new s(v,"channel","channel"),new s(v,"meta.video.*","metaVideo")]);this._pluginManager.registerBehaviour(new a(y,R),this,"handleAdStart",[new s(y,"video.id","videoId"),new s(y,"video.streamType","streamType"),new s(y,"video.playhead","playhead"),new s(y,"video.playerName","playerName"),new s(y,"ad.id","adId"),new s(y,"ad.length","adLength"),new s(y,"ad.position","adPosition"),new s(y,"ad.name","adName"),new s(y,"pod.name","podName"),new s(y,"pod.position","podPosition"),new s(y,"pod.playerName","podPlayerName"),new s(y,"pod.startTime","podSecond"),new s(T,"is_primetime","isPrimetime"),new s(v,"channel","channel"),new s(v,"meta.video.*","metaVideo"),new s(v,"meta.ad.*","metaAd")]);this._pluginManager.registerBehaviour(new a(T,D),this,"handleHeartbeatPluginError")};g.prototype._onAppMeasurementReady=function(){this._workQueue.resume()};var m="adobe-analytics";var v=m;var y="player";var T="adobe-heartbeat";var w=2e3;var D="error";var b="video";var A="videoAd";var k="ms_s";var I="msp_s";var E="msa_s";var P="mspa_s";var S="aa_start";var N="sc_ad_start";var C="video_load";var M="video_start";var R="ad_start";r.AdobeAnalyticsPlugin=g})(e.ADB.core,e.ADB.va,e.ADB.va.utils,t);e.ADB.va.plugins.aa||(e.ADB.va.plugins.aa=t)})(this);
